import{_ as i,f as a,o as e,an as h}from"./chunks/framework.CFMQV-X7.js";const g=JSON.parse('{"title":"从 v1.14 升级到 v1.15","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/upgrade/v1.15.md","filePath":"zh_CN/upgrade/v1.15.md","lastUpdated":1761449547000}'),t={name:"zh_CN/upgrade/v1.15.md"};function n(l,s,k,p,r,d){return e(),a("div",null,s[0]||(s[0]=[h(`<h1 id="从-v1-14-升级到-v1-15" tabindex="-1">从 v1.14 升级到 v1.15 <a class="header-anchor" href="#从-v1-14-升级到-v1-15" aria-label="Permalink to “从 v1.14 升级到 v1.15”">​</a></h1><h2 id="令人兴奋的新功能-🎉" tabindex="-1">令人兴奋的新功能 🎉 <a class="header-anchor" href="#令人兴奋的新功能-🎉" aria-label="Permalink to “令人兴奋的新功能 🎉”">​</a></h2><ul><li><a href="#migration-支持使用-go-语言迁移">Migration 支持使用 Go 语言迁移</a></li><li><a href="#testing-支持-http-测试">Testing 支持 HTTP 测试</a></li></ul><h2 id="功能增强-🚀" tabindex="-1">功能增强 🚀 <a class="header-anchor" href="#功能增强-🚀" aria-label="Permalink to “功能增强 🚀”">​</a></h2><ul><li><a href="#http-支持返回-stream">HTTP 支持返回 Stream</a></li><li><a href="#http-支持设置超时时间">HTTP 支持设置超时时间</a></li><li><a href="#http-支持设置自定义-recovery-方法">HTTP 支持设置自定义 recovery 方法</a></li><li><a href="#request-支持设置-filter">Request 支持设置 Filter</a></li><li><a href="#request-增加-bindquery-方法">Request 增加 BindQuery 方法</a></li><li><a href="#validation-支持-regex-规则">Validation 支持 Regex 规则</a></li><li><a href="#schedule-支持控制日志输出">Schedule 支持控制日志输出</a></li><li><a href="#schedule-新增-shutdown-方法">Schedule 新增 Shutdown 方法</a></li><li><a href="#mail-支持-mailable-模版">Mail 支持 Mailable 模版</a></li><li><a href="#log-错误日志输出的-trace-支持点击跳转">Log 错误日志输出的 trace 支持点击跳转</a></li><li><a href="#log-支持打印-context-中的键值">Log 支持打印 Context 中的键值</a></li><li><a href="#支持直接设置-dsn-连接数据库">支持直接设置 DSN 连接数据库</a></li><li><a href="#orm-的-create-方法支持使用-map-创建">Orm 的 Create 方法支持使用 map 创建</a></li><li><a href="#orm-新增配置项">Orm 新增配置项</a></li><li><a href="#orm-新增-restore-方法">Orm 新增 Restore 方法</a></li><li><a href="#orm-日志集成-log-模块">Orm 日志集成 Log 模块</a></li><li><a href="#postgres-和-sqlserver-驱动支持-schema">Postgres 和 Sqlserver 驱动支持 Schema</a></li><li><a href="#新增-about-命令">新增 about 命令</a></li><li><a href="#新增-db-table-命令">新增 db:table 命令</a></li><li><a href="#新增-db-show-命令">新增 db:show 命令</a></li><li><a href="#优化-artisan-输出样式">优化 Artisan 输出样式</a></li><li><a href="#auth-新增-id-方法">Auth 新增 ID 方法</a></li><li><a href="#多个-auth-guard-可以设置自己的-ttl">多个 Auth.Guard 可以设置自己的 TTL</a></li></ul><h2 id="破坏性变化-🛠" tabindex="-1">破坏性变化 🛠 <a class="header-anchor" href="#破坏性变化-🛠" aria-label="Permalink to “破坏性变化 🛠”">​</a></h2><ul><li><a href="#postgresql-驱动名称更改为-postgres">Postgresql 驱动名称更改为 Postgres</a></li><li><a href="#修改-orm-transaction-方法回调参数类型">修改 Orm.Transaction 方法回调参数类型</a></li><li><a href="#优化-orm-的-delete-与-forcedelete-方法">优化 Orm 的 Delete 与 ForceDelete 方法</a></li><li><a href="#优化-cache-的-decrement-与-increment-方法">优化 Cache 的 Decrement 与 Increment 方法</a></li><li><a href="#优化-artisan-的-call-方法">优化 Artisan 的 Call 方法</a></li><li><a href="#testing-database-的-clear-方法重命名为-shutdown">Testing.Database 的 Clear 方法重命名为 Shutdown</a></li><li><a href="#优化-testing-database-的-build-方法">优化 Testing.Database 的 Build 方法</a></li><li><a href="#优化-request-input-方法">优化 Request.Input* 方法</a></li><li><a href="#优化-validation-prepareforvalidation-方法">优化 validation.PrepareForValidation 方法</a></li><li><a href="#优化-queue-模块的-worker-方法">优化 Queue 模块的 Worker 方法</a></li></ul><h2 id="v1-15-3" tabindex="-1">v1.15.3 <a class="header-anchor" href="#v1-15-3" aria-label="Permalink to “v1.15.3”">​</a></h2><ul><li><a href="#go-迁移支持-boolean-字段">Go 迁移支持 Boolean 字段</a></li><li><a href="#go-迁移支持自定义字段">Go 迁移支持自定义字段</a></li><li><a href="#优化-artisan-log-输出规则">优化 Artisan log 输出规则</a></li></ul><h2 id="v1-15-4" tabindex="-1">v1.15.4 <a class="header-anchor" href="#v1-15-4" aria-label="Permalink to “v1.15.4”">​</a></h2><p>同时升级：goravel/gin: v1.3.3, goravel/fiber: v1.3.3</p><ul><li><a href="#修复-prepareforvalidation-中-ctx-为-nil-的问题">修复 PrepareForValidation 中 ctx 为 nil 的问题</a></li><li><a href="#修复-fiber-驱动高并发下-orm-withcontext-方法报错的问题">修复 Fiber 驱动高并发下 Orm WithContext 方法报错的问题</a></li><li><a href="#优化打包体积">优化打包体积</a></li><li><a href="#优化-model-id-多重嵌套时的问题">优化 model ID 多重嵌套时的问题</a></li><li><a href="#添加-artisan-命令别名">添加 artisan 命令别名</a></li></ul><h2 id="v1-15-5" tabindex="-1">v1.15.5 <a class="header-anchor" href="#v1-15-5" aria-label="Permalink to “v1.15.5”">​</a></h2><p>同时升级：goravel/redis: v1.3.1, goravel/fiber: v1.3.4</p><ul><li><a href="#修复使用-redis-驱动时-throttle-无效的问题">修复使用 Redis 驱动时 Throttle 无效的问题</a></li><li><a href="#修复使用-fiber-驱动时-fallback-异常的问题">修复使用 Fiber 驱动时 Fallback 异常的问题</a></li></ul><h2 id="v1-15-6" tabindex="-1">v1.15.6 <a class="header-anchor" href="#v1-15-6" aria-label="Permalink to “v1.15.6”">​</a></h2><ul><li><a href="#修复-orm-withcontext-方法在并发下异常的问题">修复 Orm WithContext 方法在并发下异常的问题</a></li></ul><h2 id="v1-15-7" tabindex="-1">v1.15.7 <a class="header-anchor" href="#v1-15-7" aria-label="Permalink to “v1.15.7”">​</a></h2><ul><li><a href="#升级-carbon">升级 Carbon</a></li></ul><h2 id="v1-15-8" tabindex="-1">v1.15.8 <a class="header-anchor" href="#v1-15-8" aria-label="Permalink to “v1.15.8”">​</a></h2><p>同时升级：goravel/fiber: v1.3.6</p><ul><li><a href="#修复-facades-testing-docker-database-异常的问题">修复 facades.Testing().Docker().Database() 异常的问题</a></li><li><a href="#修复-fiber-驱动-ctx-request-ip-获取-ip-无效的问题">修复 fiber 驱动 ctx.Request().Ip() 获取 IP 无效的问题</a></li><li><a href="#orm-中-wherebetween-相关方法不支持字符串的问题">Orm 中 WhereBetween 相关方法不支持字符串的问题</a></li></ul><h2 id="v1-15-9" tabindex="-1">v1.15.9 <a class="header-anchor" href="#v1-15-9" aria-label="Permalink to “v1.15.9”">​</a></h2><ul><li><a href="#修复-orm-中-cursor-方法在某些情况下内存泄露的问题">修复 Orm 中 Cursor 方法在某些情况下内存泄露的问题</a></li><li><a href="#修复-schedule-中使用秒级任务时-ononeserver-异常的问题">修复 Schedule 中使用秒级任务时 OnOneServer 异常的问题</a></li><li><a href="#make-migration-命令生成的迁移文件中默认-timestamps-改为-timestampstz">make:migration 命令生成的迁移文件中默认 Timestamps 改为 TimestampsTz</a></li></ul><h2 id="v1-15-10" tabindex="-1">v1.15.10 <a class="header-anchor" href="#v1-15-10" aria-label="Permalink to “v1.15.10”">​</a></h2><ul><li><a href="#修复-orm-query-在重复使用时-where-条件可能错乱的问题">修复 Orm Query 在重复使用时 Where 条件可能错乱的问题</a></li></ul><h2 id="v1-15-11" tabindex="-1">v1.15.11 <a class="header-anchor" href="#v1-15-11" aria-label="Permalink to “v1.15.11”">​</a></h2><ul><li><a href="#修复发送邮件时-bcc-和-cc-设置无效的问题">修复发送邮件时 bcc 和 cc 设置无效的问题</a></li><li><a href="#修复使用队列发送邮件时返回的-error-错误的问题">修复使用队列发送邮件时返回的 error 错误的问题</a></li><li><a href="#修复使用-orm-create-方法创建多条记录时会触发-create-事件的问题">修复使用 Orm Create 方法创建多条记录时会触发 create 事件的问题</a></li></ul><h2 id="v1-15-12" tabindex="-1">v1.15.12 <a class="header-anchor" href="#v1-15-12" aria-label="Permalink to “v1.15.12”">​</a></h2><ul><li><a href="#修复事务中-panic-不会回滚的问题">修复事务中 panic 不会回滚的问题</a></li></ul><h2 id="升级指南" tabindex="-1">升级指南 <a class="header-anchor" href="#升级指南" aria-label="Permalink to “升级指南”">​</a></h2><p><strong>预计升级时间：10 分钟</strong></p><p>随着 <a href="https://endoflife.date/go" target="_blank" rel="noreferrer">Golang v1.21 不再被维护</a>，Goravel v1.15 默认支持 Golang 版本由 1.21 升级为 1.22。 请在 go.mod 文件中更新版本。</p><h3 id="_1-更新依赖" tabindex="-1">1. 更新依赖 <a class="header-anchor" href="#_1-更新依赖" aria-label="Permalink to “1. 更新依赖”">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>go get github.com/goravel/framework@v1.15.9</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 gin</span></span>
<span class="line"><span>go get github.com/goravel/gin@v1.3.3</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 fiber</span></span>
<span class="line"><span>go get github.com/goravel/fiber@v1.3.6</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 redis</span></span>
<span class="line"><span>go get github.com/goravel/redis@v1.3.1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 S3</span></span>
<span class="line"><span>go get github.com/goravel/s3@v1.3.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 Oss</span></span>
<span class="line"><span>go get github.com/goravel/oss@v1.3.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 Cos</span></span>
<span class="line"><span>go get github.com/goravel/cos@v1.3.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 Minio</span></span>
<span class="line"><span>go get github.com/goravel/minio@v1.3.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 如果使用 Cloudinary</span></span>
<span class="line"><span>go get github.com/goravel/cloudinary@v1.3.1</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>go mod tidy</span></span></code></pre></div><h3 id="_2-如果正在使用-postgres-数据库" tabindex="-1">2. 如果正在使用 Postgres 数据库 <a class="header-anchor" href="#_2-如果正在使用-postgres-数据库" aria-label="Permalink to “2. 如果正在使用 Postgres 数据库”">​</a></h3><p>需相应修改：<a href="#postgresql-驱动名称更改为-postgres">Postgresql 驱动名称更改为 Postgres</a></p><h3 id="_3-如果正在使用-orm-transaction-方法" tabindex="-1">3. 如果正在使用 Orm.Transaction 方法 <a class="header-anchor" href="#_3-如果正在使用-orm-transaction-方法" aria-label="Permalink to “3. 如果正在使用 Orm.Transaction 方法”">​</a></h3><p>需相应修改：<a href="#修改-orm-transaction-方法回调参数类型">修改 Orm.Transaction 方法回调参数类型</a></p><h3 id="_4-如果正在使用-orm-的-delete-或-forcedelete-方法" tabindex="-1">4. 如果正在使用 Orm 的 Delete 或 ForceDelete 方法 <a class="header-anchor" href="#_4-如果正在使用-orm-的-delete-或-forcedelete-方法" aria-label="Permalink to “4. 如果正在使用 Orm 的 Delete 或 ForceDelete 方法”">​</a></h3><p>需相应修改：<a href="#优化-orm-的-delete-与-forcedelete-方法">优化 Orm 的 Delete 与 ForceDelete 方法</a></p><h3 id="_5-如果正在使用-cache-的-decrement-或-increment-方法" tabindex="-1">5. 如果正在使用 Cache 的 Decrement 或 Increment 方法 <a class="header-anchor" href="#_5-如果正在使用-cache-的-decrement-或-increment-方法" aria-label="Permalink to “5. 如果正在使用 Cache 的 Decrement 或 Increment 方法”">​</a></h3><p>需相应修改：<a href="#优化-cache-的-decrement-与-increment-方法">优化 Cache 的 Decrement 与 Increment 方法</a></p><h3 id="_6-如果正在使用-queue-模块的-worker-方法" tabindex="-1">6. 如果正在使用 Queue 模块的 Worker 方法 <a class="header-anchor" href="#_6-如果正在使用-queue-模块的-worker-方法" aria-label="Permalink to “6. 如果正在使用 Queue 模块的 Worker 方法”">​</a></h3><p>需相应修改：<a href="#优化-queue-模块的-worker-方法">优化 Queue 模块的 Worker 方法</a></p><h3 id="_7-如果正在使用-artisan-的-call-方法" tabindex="-1">7. 如果正在使用 Artisan 的 Call 方法 <a class="header-anchor" href="#_7-如果正在使用-artisan-的-call-方法" aria-label="Permalink to “7. 如果正在使用 Artisan 的 Call 方法”">​</a></h3><p>需相应修改：<a href="#优化-artisan-的-call-方法">优化 Artisan 的 Call 方法</a></p><h3 id="_8-如果正在使用-testing-database-的-clear-方法" tabindex="-1">8. 如果正在使用 Testing.Database 的 Clear 方法 <a class="header-anchor" href="#_8-如果正在使用-testing-database-的-clear-方法" aria-label="Permalink to “8. 如果正在使用 Testing.Database 的 Clear 方法”">​</a></h3><p>需相应修改：<a href="#testing-database-的-clear-方法重命名为-shutdown">Testing.Database 的 Clear 方法重命名为 Shutdown</a></p><h3 id="_9-如果正在使用-testing-database-的-build-方法" tabindex="-1">9. 如果正在使用 Testing.Database 的 Build 方法 <a class="header-anchor" href="#_9-如果正在使用-testing-database-的-build-方法" aria-label="Permalink to “9. 如果正在使用 Testing.Database 的 Build 方法”">​</a></h3><p>需相应修改：<a href="#优化-testing-database-的-build-方法">优化 Testing.Database 的 Build 方法</a></p><h3 id="_10-如果正在使用-migration-模块" tabindex="-1">10. 如果正在使用 Migration 模块 <a class="header-anchor" href="#_10-如果正在使用-migration-模块" aria-label="Permalink to “10. 如果正在使用 Migration 模块”">​</a></h3><p>修改 <code>config/database.go</code> 中的配置：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sql&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span></code></pre></div><h3 id="_11-如果正在使用-request-input-方法" tabindex="-1">11. 如果正在使用 Request.Input* 方法 <a class="header-anchor" href="#_11-如果正在使用-request-input-方法" aria-label="Permalink to “11. 如果正在使用 Request.Input* 方法”">​</a></h3><p>需相应修改：<a href="#优化-request-input-方法">优化 Request.Input* 方法</a></p><h3 id="_12-如果正在使用-validation-prepareforvalidation-方法" tabindex="-1">12. 如果正在使用 validation.PrepareForValidation 方法 <a class="header-anchor" href="#_12-如果正在使用-validation-prepareforvalidation-方法" aria-label="Permalink to “12. 如果正在使用 validation.PrepareForValidation 方法”">​</a></h3><p>需相应修改：<a href="#优化-validation-prepareforvalidation-方法">优化 validation.PrepareForValidation 方法</a></p><h3 id="_13-如果正在使用-mail-模块" tabindex="-1">13. 如果正在使用 Mail 模块 <a class="header-anchor" href="#_13-如果正在使用-mail-模块" aria-label="Permalink to “13. 如果正在使用 Mail 模块”">​</a></h3><p>修改 <code>Subject</code> 的设置方式：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/mail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/mail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Subject: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Subject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Html: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;h1&gt;Hello Goravel&lt;/h1&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;h1&gt;Hello Goravel&lt;/h1&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Subject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Subject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>如果使用了 <code>From</code> 方法：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/mail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/mail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">From</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">From</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Address: testFromAddress, Name: testFromName})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">From</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testFromAddress, testFromName))</span></span></code></pre></div><p>如果使用了 <code>Queue</code> 方法：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/mail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/mail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Connection: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;high&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Queue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;high&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mail&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h3 id="_14-如果正在使用-validation-prepareforvalidation-方法" tabindex="-1">14. 如果正在使用 <code>validation.PrepareForValidation</code> 方法 <a class="header-anchor" href="#_14-如果正在使用-validation-prepareforvalidation-方法" aria-label="Permalink to “14. 如果正在使用 validation.PrepareForValidation 方法”">​</a></h3><p>需相应修改：<a href="#优化-validation-prepareforvalidation-方法">优化 validation.PrepareForValidation 方法</a></p><h2 id="功能介绍" tabindex="-1">功能介绍 <a class="header-anchor" href="#功能介绍" aria-label="Permalink to “功能介绍”">​</a></h2><h3 id="migration-支持使用-go-语言迁移" tabindex="-1">Migration 支持使用 Go 语言迁移 <a class="header-anchor" href="#migration-支持使用-go-语言迁移" aria-label="Permalink to “Migration 支持使用 Go 语言迁移”">​</a></h3><p>之前框架仅支持 SQL 迁移， 当想要切换数据库时，由于不同数据库间的 SQL 语法差异，将使迁移过程极其困难。 此外，迁移文件中也无法执行代码，在进行数据修复时，无法进行逻辑判断。</p><p>现在框架支持直接使用 Go 语言生成迁移文件，方便开发者编写复杂的迁移逻辑。 但在当前版本中，尚未实现对表字段的修改功能，仅支持创建表、删除表、创建索引等操作。 如果想进行修改，需要使用 <code>Sql</code> 方法直接执行 SQL 语句。 修改表字段的功能将在后续版本中支持。</p><p>在 v1.15 版本中，框架同时支持 Go 语言迁移（默认）和 SQL 迁移，但 SQL 迁移将在 v1.16 版本中移除。</p><h4 id="由-sql-迁移切换到-go-语言迁移" tabindex="-1">由 SQL 迁移切换到 Go 语言迁移 <a class="header-anchor" href="#由-sql-迁移切换到-go-语言迁移" aria-label="Permalink to “由 SQL 迁移切换到 Go 语言迁移”">​</a></h4><p>如果你正在使用 SQL 迁移，可以通过以下步骤切换到 Go 语言迁移：</p><ol><li>修改 <code>config/database.go</code> 中的配置；</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span></code></pre></div><ol start="2"><li>使用 <code>go run . artisan make:migration {NAME}</code> 命令创建迁移文件；</li></ol><p>在生成的文件的 <code>Up</code>, <code>Down</code> 方法中，分别执行原 SQL 迁移文件中的迁移、回滚语句，注意使用 <code>facades.Schema().HasTable</code> 方法判断表是否存在：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({SQL})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li>注册迁移文件到 <code>database/kernel.go</code> 文件；</li></ol><p>新建 <code>database/kernel.go</code> 文件，并注册迁移文件与 Seeder：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> database</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/database/schema</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/database/seeder</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">goravel/database/migrations</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">goravel/database/seeders</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Kernel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">kernel </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Kernel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migrations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">migrations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">kernel </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Kernel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">seeders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DatabaseSeeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="4"><li>修改 <code>app/providers/database_service_provider.go</code> 文件完成注册，请将原本在此注册的 <code>Seeder</code> 移动到 <code>database/kernel.go::Seeders</code>；</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (receiver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DatabaseServiceProvider) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app foundation.Application) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">seeders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DatabaseSeeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (receiver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DatabaseServiceProvider) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app foundation.Application) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   kernel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Kernel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(kernel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migrations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(kernel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Seeders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div><ol start="5"><li><p>备份现有 <code>migrations</code> 表数据，之后删除 <code>migrations</code> 表；</p></li><li><p>执行 <code>go run . artisan migrate</code> 命令进行迁移，迁移完成后，将生成新的 <code>migrations</code> 表。</p></li></ol><p><a href="./../database/migrations.html">查看文档</a></p><h3 id="testing-支持-http-测试" tabindex="-1">Testing 支持 HTTP 测试 <a class="header-anchor" href="#testing-支持-http-测试" aria-label="Permalink to “Testing 支持 HTTP 测试”">​</a></h3><p>goravel/framework: v1.15.0</p><p>框架新增 <code>Testing.Http</code> 模块，支持对 HTTP 请求进行测试，可以模拟请求、获取响应、断言响应等。</p><p><a href="./../testing/http-tests.html">查看文档</a></p><h3 id="http-支持返回-stream" tabindex="-1">HTTP 支持返回 Stream <a class="header-anchor" href="#http-支持返回-stream" aria-label="Permalink to “HTTP 支持返回 Stream”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../the-basics/response.html#返回-stream">查看文档</a></p><h3 id="http-支持设置超时时间" tabindex="-1">HTTP 支持设置超时时间 <a class="header-anchor" href="#http-支持设置超时时间" aria-label="Permalink to “HTTP 支持设置超时时间”">​</a></h3><p>goravel/framework: v1.15.0</p><p>可以通过在 <code>config/http.go</code> 文件中配置 <code>http.request_timeout</code> 设置超时时间，默认为 3 秒。</p><h3 id="http-支持设置自定义-recovery-方法" tabindex="-1">HTTP 支持设置自定义 recovery 方法 <a class="header-anchor" href="#http-支持设置自定义-recovery-方法" aria-label="Permalink to “HTTP 支持设置自定义 recovery 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../the-basics/request.html#自定义-recovery">查看文档</a></p><h3 id="request-支持设置-filter" tabindex="-1">Request 支持设置 Filter <a class="header-anchor" href="#request-支持设置-filter" aria-label="Permalink to “Request 支持设置 Filter”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../the-basics/validation.html#过滤输入数据">查看文档</a></p><h3 id="request-增加-bindquery-方法" tabindex="-1">Request 增加 BindQuery 方法 <a class="header-anchor" href="#request-增加-bindquery-方法" aria-label="Permalink to “Request 增加 BindQuery 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>支持使用 <code>ctx.Request().BindQuery()</code> 直接绑定链接中的参数。</p><p><a href="./../the-basics/request.html#绑定-query">查看文档</a></p><h3 id="validation-支持-regex-规则" tabindex="-1">Validation 支持 Regex 规则 <a class="header-anchor" href="#validation-支持-regex-规则" aria-label="Permalink to “Validation 支持 Regex 规则”">​</a></h3><p>goravel/framework: v1.15.0</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">validator, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`required|regex:^\\d{4,6}$\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="schedule-支持控制日志输出" tabindex="-1">Schedule 支持控制日志输出 <a class="header-anchor" href="#schedule-支持控制日志输出" aria-label="Permalink to “Schedule 支持控制日志输出”">​</a></h3><p>goravel/framework: v1.15.0</p><p>当 <code>app.debug</code> 为 <code>false</code> 时，将只输出 <code>error</code> 级别日志。</p><h3 id="schedule-新增-shutdown-方法" tabindex="-1">Schedule 新增 Shutdown 方法 <a class="header-anchor" href="#schedule-新增-shutdown-方法" aria-label="Permalink to “Schedule 新增 Shutdown 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>使得可以优雅的关闭 Schedule。</p><p><a href="./../digging-deeper/task-scheduling.html#关闭调度程序">查看文档</a></p><h3 id="mail-支持-mailable-模版" tabindex="-1">Mail 支持 Mailable 模版 <a class="header-anchor" href="#mail-支持-mailable-模版" aria-label="Permalink to “Mail 支持 Mailable 模版”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../digging-deeper/mail.html#使用-mailable">查看文档</a></p><h3 id="log-错误日志输出的-trace-支持点击跳转" tabindex="-1">Log 错误日志输出的 trace 支持点击跳转 <a class="header-anchor" href="#log-错误日志输出的-trace-支持点击跳转" aria-label="Permalink to “Log 错误日志输出的 trace 支持点击跳转”">​</a></h3><p>goravel/framework: v1.15.0</p><p>在错误日志输出中，点击 trace 可以跳转到错误发生的代码行。</p><h3 id="log-支持打印-context-中的键值" tabindex="-1">Log 支持打印 Context 中的键值 <a class="header-anchor" href="#log-支持打印-context-中的键值" aria-label="Permalink to “Log 支持打印 Context 中的键值”">​</a></h3><p>goravel/framework: v1.15.0</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello Goravel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Output:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">58</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] local.info: Hello Goravel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Context: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="支持直接设置-dsn-连接数据库" tabindex="-1">支持直接设置 DSN 连接数据库 <a class="header-anchor" href="#支持直接设置-dsn-连接数据库" aria-label="Permalink to “支持直接设置 DSN 连接数据库”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../orm/getting-started.html#dsn">查看文档</a></p><h3 id="orm-的-create-方法支持使用-map-创建" tabindex="-1">Orm 的 Create 方法支持使用 map 创建 <a class="header-anchor" href="#orm-的-create-方法支持使用-map-创建" aria-label="Permalink to “Orm 的 Create 方法支持使用 map 创建”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../orm/getting-started.html#创建">查看文档</a></p><h3 id="orm-新增配置项" tabindex="-1">Orm 新增配置项 <a class="header-anchor" href="#orm-新增配置项" aria-label="Permalink to “Orm 新增配置项”">​</a></h3><p>goravel/framework: v1.15.0</p><p>配置项是针对特定情况的，正常使用时不必须，没有被默认添加到配置文件中。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// config/database.go</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{driver_name}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{driver_name}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;host&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:     config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DB_HOST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;goravel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Set the default schema for the connection, only for postgres and sqlserver</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;no_lower_case&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Set whether to convert the table name to lowercase</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;name_replacer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: strings.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewReplacer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Set the columns name replacement</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h3 id="orm-新增-restore-方法" tabindex="-1">Orm 新增 Restore 方法 <a class="header-anchor" href="#orm-新增-restore-方法" aria-label="Permalink to “Orm 新增 Restore 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>新增 <code>Restore</code> 方法，可以用于恢复软删除的数据，并添加 <code>Restored</code>, <code>Restoring</code> 事件。</p><p><a href="./../orm/getting-started.html#恢复软删除">查看文档</a></p><h3 id="orm-日志集成-log-模块" tabindex="-1">Orm 日志集成 Log 模块 <a class="header-anchor" href="#orm-日志集成-log-模块" aria-label="Permalink to “Orm 日志集成 Log 模块”">​</a></h3><p>goravel/framework: v1.15.0</p><p>之前 Orm 的日志输出是直接输出到控制台，现在 Orm 的日志输出将集成到 Log 模块，可以同时打印到控制台和日志文件。</p><h3 id="postgres-和-sqlserver-驱动支持-schema" tabindex="-1">Postgres 和 Sqlserver 驱动支持 Schema <a class="header-anchor" href="#postgres-和-sqlserver-驱动支持-schema" aria-label="Permalink to “Postgres 和 Sqlserver 驱动支持 Schema”">​</a></h3><p>goravel/framework: v1.15.0</p><p><a href="./../orm/getting-started.html#schema">查看文档</a></p><h3 id="新增-about-命令" tabindex="-1">新增 about 命令 <a class="header-anchor" href="#新增-about-命令" aria-label="Permalink to “新增 about 命令”">​</a></h3><p>goravel/framework: v1.15.0</p><p>新增 <code>about</code> 命令，可以查看框架的版本、配置等信息。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> about</span></span></code></pre></div><h3 id="新增-db-show-命令" tabindex="-1">新增 db:show 命令 <a class="header-anchor" href="#新增-db-show-命令" aria-label="Permalink to “新增 db:show 命令”">​</a></h3><p>goravel/framework: v1.15.0</p><p>新增 <code>db:show</code> 命令，可以查看数据库中的所有表。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:show</span></span></code></pre></div><h3 id="新增-db-table-命令" tabindex="-1">新增 db:table 命令 <a class="header-anchor" href="#新增-db-table-命令" aria-label="Permalink to “新增 db:table 命令”">​</a></h3><p>goravel/framework: v1.15.0</p><p>新增 <code>db:table</code> 命令，可以查看指定表的结构。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:table</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db:table</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span></code></pre></div><h3 id="优化-artisan-输出样式" tabindex="-1">优化 Artisan 输出样式 <a class="header-anchor" href="#优化-artisan-输出样式" aria-label="Permalink to “优化 Artisan 输出样式”">​</a></h3><p>goravel/framework: v1.15.0</p><p>优化 Artisan 输出样式，增加颜色，使输出更加美观。</p><h3 id="auth-新增-id-方法" tabindex="-1">Auth 新增 ID 方法 <a class="header-anchor" href="#auth-新增-id-方法" aria-label="Permalink to “Auth 新增 ID 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="多个-auth-guard-可以设置自己的-ttl" tabindex="-1">多个 Auth.Guard 可以设置自己的 TTL <a class="header-anchor" href="#多个-auth-guard-可以设置自己的-ttl" aria-label="Permalink to “多个 Auth.Guard 可以设置自己的 TTL”">​</a></h3><p>goravel/framework: v1.15.0</p><p>之前多个 Guard 公用 <code>jwt.ttl</code> 配置。 现在你可以通过在 <code>config/auth.go</code> 文件中为每个 Guard 单独设置 TTL。 如果不设置，则默认使用 <code>jwt.ttl</code> 配置。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// config/auth.go</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;guards&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jwt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;ttl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h3 id="postgresql-驱动名称更改为-postgres" tabindex="-1">Postgresql 驱动名称更改为 Postgres <a class="header-anchor" href="#postgresql-驱动名称更改为-postgres" aria-label="Permalink to “Postgresql 驱动名称更改为 Postgres”">​</a></h3><p>goravel/framework: v1.15.0</p><p>Postgresql 驱动的名称已更改为 <code>postgres</code>。 如果你正在使用 Postgresql 驱动程序，则需要修改配置文件：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// config/database.go</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postgres&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postgresql&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postgres&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;host&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:     config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DB_HOST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="修改-orm-transaction-方法回调参数类型" tabindex="-1">修改 Orm.Transaction 方法回调参数类型 <a class="header-anchor" href="#修改-orm-transaction-方法回调参数类型" aria-label="Permalink to “修改 Orm.Transaction 方法回调参数类型”">​</a></h3><p>goravel/framework: v1.15.0</p><p><code>facades.Orm().Transaction()</code> 方法的回调参数类型由 <code>func(tx orm.Transaction) error</code> 改为 <code>func(tx orm.Query) error</code>，如果你正在使用该方法，请相应修改。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Transaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user, user.ID)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="优化-orm-的-delete-与-forcedelete-方法" tabindex="-1">优化 Orm 的 Delete 与 ForceDelete 方法 <a class="header-anchor" href="#优化-orm-的-delete-与-forcedelete-方法" aria-label="Permalink to “优化 Orm 的 Delete 与 ForceDelete 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>如果你正在向 <code>Delete</code> 或 <code>ForceDelete</code> 方法传入 ID 删除数据，请改为使用 <code>Where</code> 方法：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}, []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WhereIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ForceDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ForceDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span></code></pre></div><p><code>Delete</code> 和 <code>ForceDelete</code> 方法支持不传入参数删除数据：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="优化-cache-的-decrement-与-increment-方法" tabindex="-1">优化 Cache 的 Decrement 与 Increment 方法 <a class="header-anchor" href="#优化-cache-的-decrement-与-increment-方法" aria-label="Permalink to “优化 Cache 的 Decrement 与 Increment 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p><code>Decrement</code> 和 <code>Increment</code> 方法的入参与出参类型由 <code>int</code> 修改为 <code>int64</code>：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Decrement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Decrement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Increment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Increment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="优化-artisan-的-call-方法" tabindex="-1">优化 Artisan 的 Call 方法 <a class="header-anchor" href="#优化-artisan-的-call-方法" aria-label="Permalink to “优化 Artisan 的 Call 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>之前 <code>facades.Artisan().Call()</code> 方法执行时遇到错误将会直接 panic。 现在将返回错误，如果你正在使用该方法，请处理该错误返回。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Artisan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;command:name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="testing-database-的-clear-方法重命名为-shutdown" tabindex="-1">Testing.Database 的 Clear 方法重命名为 Shutdown <a class="header-anchor" href="#testing-database-的-clear-方法重命名为-shutdown" aria-label="Permalink to “Testing.Database 的 Clear 方法重命名为 Shutdown”">​</a></h3><p>goravel/framework: v1.15.0</p><p>为了保持方法名称与其他模块一致，我们将 <code>Clear</code> 方法重命名为 <code>Shutdown</code>。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">database, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Testing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Docker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="优化-testing-database-的-build-方法" tabindex="-1">优化 Testing.Database 的 Build 方法 <a class="header-anchor" href="#优化-testing-database-的-build-方法" aria-label="Permalink to “优化 Testing.Database 的 Build 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>之前在调用 <code>Build</code> 方法时，会自动进行数据库迁移。 升级后，需要手动调用 <code>Migrate</code> 方法进行迁移，数据库控制更加灵活。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">database, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Testing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Docker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Migrate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="优化-request-input-方法" tabindex="-1">优化 Request.Input* 方法 <a class="header-anchor" href="#优化-request-input-方法" aria-label="Permalink to “优化 Request.Input* 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>goravel/gin: v1.3.0</p><p>goravel/fiber: v1.3.0</p><p>之前 <code>Request.Input*</code> 方法仅能获取 <code>Body</code> 中的数据，现在将依次查找 <code>Body</code>、 <code>Query</code>、<code>Param</code>。 并且之前向 <code>Request.Input*</code> 方法传递第二个参数(默认值)时，如果 <code>key</code> 存在，但置为空，将返回默认值。 现在将返回空字符串，因为空字符串也是一种有效值，只有当 key 不存在时，才返回默认值。</p><p>你需要检查所有使用 <code>Request.Input*</code> 方法的地方，确保传递的参数正确与返回值符合预期。</p><h3 id="优化-validation-prepareforvalidation-方法" tabindex="-1">优化 validation.PrepareForValidation 方法 <a class="header-anchor" href="#优化-validation-prepareforvalidation-方法" aria-label="Permalink to “优化 validation.PrepareForValidation 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>修改入参的类型，增加 <code>http.Context</code> 参数：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> github.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">goravel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">framework</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">validation</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validator, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Validation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(input, rules, validation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrepareForValidation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validationcontract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validator, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Validation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(input, rules, validation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrepareForValidation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validationcontract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name, exist </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); exist {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}))</span></span></code></pre></div><h3 id="优化-queue-模块的-worker-方法" tabindex="-1">优化 Queue 模块的 Worker 方法 <a class="header-anchor" href="#优化-queue-模块的-worker-方法" aria-label="Permalink to “优化 Queue 模块的 Worker 方法”">​</a></h3><p>goravel/framework: v1.15.0</p><p>当 <code>Worker</code> 方法不需要设置参数时，可以保持为空：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>当需要设置参数时，参数由指针改为实例：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Connection: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;redis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Connection: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;redis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="go-迁移支持-boolean-字段" tabindex="-1">Go 迁移支持 Boolean 字段 <a class="header-anchor" href="#go-迁移支持-boolean-字段" aria-label="Permalink to “Go 迁移支持 Boolean 字段”">​</a></h3><p>goravel/framework: v1.15.3</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;is_admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="go-迁移支持自定义字段" tabindex="-1">Go 迁移支持自定义字段 <a class="header-anchor" href="#go-迁移支持自定义字段" aria-label="Permalink to “Go 迁移支持自定义字段”">​</a></h3><p>goravel/framework: v1.15.3</p><p>如果你正在使用框架尚不支持的字段类型，可以通过 <code>Column</code> 方法自定义字段类型：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;geometry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;geometry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="优化-artisan-log-输出规则" tabindex="-1">优化 Artisan log 输出规则 <a class="header-anchor" href="#优化-artisan-log-输出规则" aria-label="Permalink to “优化 Artisan log 输出规则”">​</a></h3><p>goravel/framework: v1.15.3</p><p>之前 Artisan log 仅输出 error 级别的日志，现在将输出所有级别的日志。 如果想禁止 console 打印日志且正在使用 <code>single</code> 或 <code>daily</code> 日志驱动，请将 <code>logging.channels.single.print</code> 或 <code>logging.channels.daily.print</code> 配置设置为 <code>false</code>。</p><h3 id="修复-prepareforvalidation-中-ctx-为-nil-的问题" tabindex="-1">修复 PrepareForValidation 中 ctx 为 nil 的问题 <a class="header-anchor" href="#修复-prepareforvalidation-中-ctx-为-nil-的问题" aria-label="Permalink to “修复 PrepareForValidation 中 ctx 为 nil 的问题”">​</a></h3><p>goravel/framework: v1.15.4</p><p>goravel/gin: v1.3.3</p><p>goravel/fiber: v1.3.3</p><p>修复前，<code>PrepareForValidation</code> 方法中 <code>ctx</code> 始终为 <code>nil</code>，现在将正确传递 <code>ctx</code> 参数。 如果你正在使用 <code>validation.PrepareForValidation</code> 方法，请相应修改。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  github.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">goravel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">framework</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">validation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contarctsvalidate </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/validation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrepareForValidation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> contarctsvalidate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrepareForValidation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> contarctsvalidate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span></code></pre></div><h3 id="修复-fiber-驱动高并发下-orm-withcontext-方法报错的问题" tabindex="-1">修复 Fiber 驱动高并发下 Orm WithContext 方法报错的问题 <a class="header-anchor" href="#修复-fiber-驱动高并发下-orm-withcontext-方法报错的问题" aria-label="Permalink to “修复 Fiber 驱动高并发下 Orm WithContext 方法报错的问题”">​</a></h3><p>goravel/framework: v1.15.4</p><p>goravel/fiber: v1.3.3</p><p>详见：<a href="https://github.com/goravel/framework/pull/866" target="_blank" rel="noreferrer">#866</a></p><h3 id="优化打包体积" tabindex="-1">优化打包体积 <a class="header-anchor" href="#优化打包体积" aria-label="Permalink to “优化打包体积”">​</a></h3><p>goravel/framework: v1.15.4</p><p>详见：<a href="https://github.com/goravel/framework/pull/865" target="_blank" rel="noreferrer">#865</a></p><h3 id="优化-model-id-多重嵌套时的问题" tabindex="-1">优化 model ID 多重嵌套时的问题 <a class="header-anchor" href="#优化-model-id-多重嵌套时的问题" aria-label="Permalink to “优化 model ID 多重嵌套时的问题”">​</a></h3><p>goravel/framework: v1.15.4</p><p>详见：<a href="https://github.com/goravel/framework/pull/898" target="_blank" rel="noreferrer">#898</a></p><h3 id="添加-artisan-命令别名" tabindex="-1">添加 artisan 命令别名 <a class="header-anchor" href="#添加-artisan-命令别名" aria-label="Permalink to “添加 artisan 命令别名”">​</a></h3><p>goravel/framework: v1.15.4</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>// Before</span></span>
<span class="line"><span>go run  . artisan key:generate</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// After</span></span>
<span class="line"><span>./artisan key:generate</span></span></code></pre></div><h3 id="修复使用-redis-驱动时-throttle-无效的问题" tabindex="-1">修复使用 Redis 驱动时 Throttle 无效的问题 <a class="header-anchor" href="#修复使用-redis-驱动时-throttle-无效的问题" aria-label="Permalink to “修复使用 Redis 驱动时 Throttle 无效的问题”">​</a></h3><p>goravel/framework: v1.15.5</p><p>goravel/redis: v1.3.1</p><p>使用 Redis 驱动时，<code>Throttle</code> 无法进行正常的存储，导致限流失效。</p><p>详见：<a href="https://github.com/goravel/goravel/issues/625" target="_blank" rel="noreferrer">#625</a></p><h3 id="修复使用-fiber-驱动时-fallback-异常的问题" tabindex="-1">修复使用 Fiber 驱动时 Fallback 异常的问题 <a class="header-anchor" href="#修复使用-fiber-驱动时-fallback-异常的问题" aria-label="Permalink to “修复使用 Fiber 驱动时 Fallback 异常的问题”">​</a></h3><p>goravel/framework: v1.15.5</p><p>goravel/fiber: v1.3.4</p><p>使用 Fiber 驱动时，如果设置 <code>Fallback</code>，其他路由将无法正常访问。</p><p>详见：<a href="https://github.com/goravel/goravel/issues/624" target="_blank" rel="noreferrer">#624</a></p><h3 id="修复-orm-withcontext-方法在并发下异常的问题" tabindex="-1">修复 Orm WithContext 方法在并发下异常的问题 <a class="header-anchor" href="#修复-orm-withcontext-方法在并发下异常的问题" aria-label="Permalink to “修复 Orm WithContext 方法在并发下异常的问题”">​</a></h3><p>goravel/framework: v1.15.6</p><p>通过 <code>WithContext</code> 方法设置 <code>Context</code> 时，高并发下被异常共享。</p><h3 id="升级-carbon" tabindex="-1">升级 Carbon <a class="header-anchor" href="#升级-carbon" aria-label="Permalink to “升级 Carbon”">​</a></h3><p>goravel/framework: v1.15.7</p><p><a href="https://github.com/dromara/carbon" target="_blank" rel="noreferrer">dromara/carbon</a> ~v2.5.5 以上版本引入了新的特性，导致框架部分功能异常。 注意，当前尚不支持 dromara/carbon v2.6 以上版本，将在 Goravel v1.16 中兼容。</p><h3 id="修复-facades-testing-docker-database-异常的问题" tabindex="-1">修复 facades.Testing().Docker().Database() 异常的问题 <a class="header-anchor" href="#修复-facades-testing-docker-database-异常的问题" aria-label="Permalink to “修复 facades.Testing().Docker().Database() 异常的问题”">​</a></h3><p>goravel/framework: v1.15.8</p><p>详见：<a href="https://github.com/goravel/goravel/issues/672" target="_blank" rel="noreferrer">#672</a></p><h3 id="修复-fiber-驱动-ctx-request-ip-获取-ip-无效的问题" tabindex="-1">修复 fiber 驱动 ctx.Request().Ip() 获取 IP 无效的问题 <a class="header-anchor" href="#修复-fiber-驱动-ctx-request-ip-获取-ip-无效的问题" aria-label="Permalink to “修复 fiber 驱动 ctx.Request().Ip() 获取 IP 无效的问题”">​</a></h3><p>goravel/fiber: v1.3.6</p><p>之前一直返回 <code>127.0.0.1</code>。 修复后，新增了 <code>http.drivers.fiber.proxy_header</code>, <code>http.drivers.fiber.enable_trusted_proxy_check</code> 和 <code>http.drivers.fiber.trusted_proxies</code> 配置，用于设置代理头与可信任的代理 IP 地址。</p><p>详见：<a href="https://github.com/goravel/goravel/issues/678" target="_blank" rel="noreferrer">#678</a></p><h3 id="orm-中-wherebetween-相关方法不支持字符串的问题" tabindex="-1">Orm 中 WhereBetween 相关方法不支持字符串的问题 <a class="header-anchor" href="#orm-中-wherebetween-相关方法不支持字符串的问题" aria-label="Permalink to “Orm 中 WhereBetween 相关方法不支持字符串的问题”">​</a></h3><p>goravel/framework: v1.15.8</p><p>详见：<a href="https://github.com/goravel/goravel/issues/1036" target="_blank" rel="noreferrer">#1036</a></p><h3 id="修复-orm-中-cursor-方法在某些情况下内存泄露的问题" tabindex="-1">修复 Orm 中 Cursor 方法在某些情况下内存泄露的问题 <a class="header-anchor" href="#修复-orm-中-cursor-方法在某些情况下内存泄露的问题" aria-label="Permalink to “修复 Orm 中 Cursor 方法在某些情况下内存泄露的问题”">​</a></h3><p>goravel/framework: v1.15.9</p><p>当获取 <code>rows</code> 时，<code>chan</code> 未被正确关闭，导致内存泄露。</p><h3 id="修复-schedule-中使用秒级任务时-ononeserver-异常的问题" tabindex="-1">修复 Schedule 中使用秒级任务时 OnOneServer 异常的问题 <a class="header-anchor" href="#修复-schedule-中使用秒级任务时-ononeserver-异常的问题" aria-label="Permalink to “修复 Schedule 中使用秒级任务时 OnOneServer 异常的问题”">​</a></h3><p>goravel/framework: v1.15.9</p><p>详见：<a href="https://github.com/goravel/goravel/issues/690" target="_blank" rel="noreferrer">#690</a></p><h3 id="make-migration-命令生成的迁移文件中默认-timestamps-改为-timestampstz" tabindex="-1">make:migration 命令生成的迁移文件中默认 Timestamps 改为 TimestampsTz <a class="header-anchor" href="#make-migration-命令生成的迁移文件中默认-timestamps-改为-timestampstz" aria-label="Permalink to “make:migration 命令生成的迁移文件中默认 Timestamps 改为 TimestampsTz”">​</a></h3><p>goravel/framework: v1.15.9</p><p>详见：<a href="https://github.com/goravel/goravel/issues/699" target="_blank" rel="noreferrer">#699</a></p><h3 id="修复-orm-query-在重复使用时-where-条件可能错乱的问题" tabindex="-1">修复 Orm Query 在重复使用时 Where 条件可能错乱的问题 <a class="header-anchor" href="#修复-orm-query-在重复使用时-where-条件可能错乱的问题" aria-label="Permalink to “修复 Orm Query 在重复使用时 Where 条件可能错乱的问题”">​</a></h3><p>goravel/framework: v1.15.10</p><p>详见：<a href="https://github.com/goravel/goravel/issues/732" target="_blank" rel="noreferrer">#732</a></p><h3 id="修复发送邮件时-bcc-和-cc-设置无效的问题" tabindex="-1">修复发送邮件时 bcc 和 cc 设置无效的问题 <a class="header-anchor" href="#修复发送邮件时-bcc-和-cc-设置无效的问题" aria-label="Permalink to “修复发送邮件时 bcc 和 cc 设置无效的问题”">​</a></h3><p>goravel/framework: v1.15.11</p><p>Issue: <a href="https://github.com/goravel/goravel/issues/737" target="_blank" rel="noreferrer">#737</a></p><h3 id="修复使用队列发送邮件时返回的-error-错误的问题" tabindex="-1">修复使用队列发送邮件时返回的 error 错误的问题 <a class="header-anchor" href="#修复使用队列发送邮件时返回的-error-错误的问题" aria-label="Permalink to “修复使用队列发送邮件时返回的 error 错误的问题”">​</a></h3><p>goravel/framework: v1.15.11</p><p>PR: <a href="https://github.com/goravel/framework/pull/1148" target="_blank" rel="noreferrer">#1148</a></p><h3 id="修复使用-orm-create-方法创建多条记录时会触发-create-事件的问题" tabindex="-1">修复使用 Orm Create 方法创建多条记录时会触发 create 事件的问题 <a class="header-anchor" href="#修复使用-orm-create-方法创建多条记录时会触发-create-事件的问题" aria-label="Permalink to “修复使用 Orm Create 方法创建多条记录时会触发 create 事件的问题”">​</a></h3><p>goravel/framework: v1.15.11</p><p>Issue: <a href="https://github.com/goravel/goravel/issues/738" target="_blank" rel="noreferrer">#738</a></p><h3 id="修复事务中-panic-不会回滚的问题" tabindex="-1">修复事务中 panic 不会回滚的问题 <a class="header-anchor" href="#修复事务中-panic-不会回滚的问题" aria-label="Permalink to “修复事务中 panic 不会回滚的问题”">​</a></h3><p>goravel/framework: v1.15.12</p><p>Issue: <a href="https://github.com/goravel/goravel/issues/762" target="_blank" rel="noreferrer">#762</a></p>`,293)]))}const o=i(t,[["render",n]]);export{g as __pageData,o as default};
