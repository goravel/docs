import{_ as e,f as s,o as i,an as t}from"./chunks/framework.CFMQV-X7.js";const m=JSON.parse('{"title":"Upgrading To v1.8 From v1.7","description":"","frontmatter":{},"headers":[],"relativePath":"upgrade/v1.8.md","filePath":"en/upgrade/v1.8.md","lastUpdated":1767496911000}'),n={name:"upgrade/v1.8.md"};function r(o,a,d,l,p,h){return i(),s("div",null,a[0]||(a[0]=[t(`<h1 id="upgrading-to-v1-8-from-v1-7" tabindex="-1">Upgrading To v1.8 From v1.7 <a class="header-anchor" href="#upgrading-to-v1-8-from-v1-7" aria-label="Permalink to â€œUpgrading To v1.8 From v1.7â€">â€‹</a></h1><nav class="table-of-contents"><ul><li><a href="#exciting-new-features-ğŸ‰">Exciting New Features ğŸ‰</a></li><li><a href="#enhancements-ğŸš€">Enhancements ğŸš€</a></li><li><a href="#breaking-changes-ğŸ› ">Breaking Changes ğŸ› </a></li><li><a href="#bug-fixes-ğŸ›">Bug Fixes ğŸ›</a></li><li><a href="#upgrade-guide">Upgrade Guide</a><ul><li><a href="#updating-dependencies">Updating Dependencies</a></li><li><a href="#add-model-association-for-orm">Add model association for Orm</a></li><li><a href="#add-methods-for-request">Add methods for Request</a></li><li><a href="#add-methods-for-response">Add-methods-for-Response</a></li><li><a href="#optimize-import-order">Optimize import order</a></li><li><a href="#optimize-database-migrate">Optimize database migrate</a></li><li><a href="#mock-validator-change-name">mock.Validator Change Name</a></li><li><a href="#support-mysql-change-name">support.Mysql Change Name</a></li><li><a href="#database-newgorminstance-is-about-to-be-deprecated">database.NewGormInstance is about to be deprecated</a></li><li><a href="#fix-orm-concurrency-safety-issue">Fix Orm concurrency safety issue</a></li><li><a href="#fix-mail-module-can-t-send-mail-by-25-and-465-ports">Fix Mail module can&#39;t send mail by 25 and 465 ports</a></li><li><a href="#route-supports-https">Route supports HTTPS</a></li></ul></li></ul></nav><h2 id="exciting-new-features-ğŸ‰" tabindex="-1">Exciting New Features ğŸ‰ <a class="header-anchor" href="#exciting-new-features-ğŸ‰" aria-label="Permalink to â€œExciting New Features ğŸ‰â€">â€‹</a></h2><ul><li><a href="#add-model-association-for-orm">Add model association for Orm(1.8.0)</a></li></ul><h2 id="enhancements-ğŸš€" tabindex="-1">Enhancements ğŸš€ <a class="header-anchor" href="#enhancements-ğŸš€" aria-label="Permalink to â€œEnhancements ğŸš€â€">â€‹</a></h2><ul><li><a href="#add-methods-for-request">Add methods for Request(1.8.0)</a></li><li><a href="#add-methods-for-response">Add methods for Response(1.8.0)</a></li><li><a href="#optimize-database-migrate">Optimize database migrate(1.8.0)</a></li><li><a href="#route-supports-https">Route supports HTTPS(1.8.3)</a></li></ul><h2 id="breaking-changes-ğŸ› " tabindex="-1">Breaking Changes ğŸ›  <a class="header-anchor" href="#breaking-changes-ğŸ› " aria-label="Permalink to â€œBreaking Changes ğŸ› â€">â€‹</a></h2><ul><li><a href="#optimize-import-order">Optimize import order(1.8.0)</a></li><li><a href="#mock-validator-change-Name">mock.Validator change name(1.8.0)</a></li><li><a href="#support-mysql-change-name">support.Mysql change name(1.8.0)</a></li><li><a href="#database-newgorminstance-is-about-to-be-deprecated">database.NewGormInstance is about to be deprecated(1.8.0)</a></li></ul><h2 id="bug-fixes-ğŸ›" tabindex="-1">Bug Fixes ğŸ› <a class="header-anchor" href="#bug-fixes-ğŸ›" aria-label="Permalink to â€œBug Fixes ğŸ›â€">â€‹</a></h2><ul><li><a href="#fix-Orm-concurrency-safety-issue">Fix Orm concurrency safety issue(1.8.1)</a></li><li><a href="#fix-mail-module-can-t-send-mail-by-25-and-465-ports">Fix Mail module can&#39;t send mail by 25 and 465 ports(1.8.2)</a></li></ul><h2 id="upgrade-guide" tabindex="-1">Upgrade Guide <a class="header-anchor" href="#upgrade-guide" aria-label="Permalink to â€œUpgrade Guideâ€">â€‹</a></h2><p><strong>Estimated Upgrade Time: 1 Minutes</strong></p><h3 id="updating-dependencies" tabindex="-1">Updating Dependencies <a class="header-anchor" href="#updating-dependencies" aria-label="Permalink to â€œUpdating Dependenciesâ€">â€‹</a></h3><p>Update dependencies in the <code>go.mod</code> file:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>go get -u github.com/goravel/framework@v1.8.3</span></span></code></pre></div><h3 id="add-model-association-for-orm" tabindex="-1">Add model association for Orm <a class="header-anchor" href="#add-model-association-for-orm" aria-label="Permalink to â€œAdd model association for Ormâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>Add methods for Orm, to handle model association:</p><table tabindex="0"><thead><tr><th>Method</th><th>Action</th></tr></thead><tbody><tr><td>Association</td><td><a href="./../orm/relationships.html#querying-associations">Association</a></td></tr><tr><td>DB</td><td><a href="./../orm/getting-started.html#generic-database-interface-sqldb">Generic Database Interface sql.DB</a></td></tr><tr><td>Load</td><td><a href="./../orm/relationships.html#lazy-eager-loading">Lazy Eager Loading</a></td></tr><tr><td>LoadMissing</td><td><a href="./../orm/relationships.html#lazy-eager-loading">Lazy Eager Loading(not exist)</a></td></tr><tr><td>Omit</td><td><a href="./../orm/relationships.html#create-or-update-associations">Omit associations</a></td></tr><tr><td>With</td><td><a href="./../orm/relationships.html#Eager-Loading">Eager Loading</a></td></tr></tbody></table><h3 id="add-methods-for-request" tabindex="-1">Add methods for Request <a class="header-anchor" href="#add-methods-for-request" aria-label="Permalink to â€œAdd methods for Requestâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>Add methods for <code>ctx.Request()</code>, to enrich the format of <code>Query</code> parameters:</p><table tabindex="0"><thead><tr><th>Method</th><th>Action</th></tr></thead><tbody><tr><td><code>QueryArray</code></td><td><a href="./../the-basics/request.html#Retrieving-Input-From-The-Query-String">Get the array parameters</a></td></tr><tr><td><code>QueryMap</code></td><td><a href="./../the-basics/request.html#Retrieving-Input-From-The-Query-String">Get the map parameters</a></td></tr></tbody></table><h3 id="add-methods-for-response" tabindex="-1">Add-methods-for-Response <a class="header-anchor" href="#add-methods-for-response" aria-label="Permalink to â€œAdd-methods-for-Responseâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>Add <code>Origin</code> method to <code>ctx.Response()</code>, you can get all information of <code>Response</code> in the HTTP middleware.</p><p><a href="./../the-basics/response.html#Get-Response">Detail</a></p><h3 id="optimize-import-order" tabindex="-1">Optimize import order <a class="header-anchor" href="#optimize-import-order" aria-label="Permalink to â€œOptimize import orderâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>The import order in the <code>bootstrap/app.go</code> file change to:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bootstrap</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/foundation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">goravel/config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><a href="https://github.com/goravel/goravel/blob/v1.8.0/bootstrap/app.go" target="_blank" rel="noreferrer">The File</a></p><h3 id="optimize-database-migrate" tabindex="-1">Optimize database migrate <a class="header-anchor" href="#optimize-database-migrate" aria-label="Permalink to â€œOptimize database migrateâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>Run the command that generate the migrate file: <code>go run . artisan make:migration create_users_table</code>, the corresponding migration file will be generated based on the default database driver currently in use(<code>facades.Config.GetString(&quot;database.default&quot;)</code>).</p><h3 id="mock-validator-change-name" tabindex="-1">mock.Validator Change Name <a class="header-anchor" href="#mock-validator-change-name" aria-label="Permalink to â€œmock.Validator Change Nameâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>If you use <code>mock.Validator</code> to write unit tests, the following modifications are required:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>import &quot;github.com/goravel/framework/testing/mock&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mock.Validator</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// Modify to</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import &quot;github.com/goravel/framework/testing/mock&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>mock.Validation</span></span></code></pre></div><p><a href="./../testing/mock.html#Mock-facades.Validation">Detail</a></p><h3 id="support-mysql-change-name" tabindex="-1">support.Mysql Change Name <a class="header-anchor" href="#support-mysql-change-name" aria-label="Permalink to â€œsupport.Mysql Change Nameâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>If you use framework constants such as <code>support.Mysql</code> to judge the database driver, you need to make the following modifications:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/database/support</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">support.Mysql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">support.Postgresql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">support.Sqlite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">support.Sqlserver</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify to</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/database/orm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orm.Mysql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orm.Postgresql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orm.Sqlite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">orm.Sqlserver</span></span></code></pre></div><p>The new constants such as <code>orm.Mysql</code> are of type <code>orm.Driver</code> and can be converted to a string type using the <code>orm.Mysql.String()</code> method.</p><h3 id="database-newgorminstance-is-about-to-be-deprecated" tabindex="-1">database.NewGormInstance is about to be deprecated <a class="header-anchor" href="#database-newgorminstance-is-about-to-be-deprecated" aria-label="Permalink to â€œdatabase.NewGormInstance is about to be deprecatedâ€">â€‹</a></h3><p>Version: v1.8.0</p><p>The <code>database.NewGormInstance</code> method will be deprecated in v1.9.0 version, it can be used in current version, if you use the method to get the <code>gorm</code> instance, the following modifications are required:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/database</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gorm, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewGormInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(connection)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify to</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/database/gorm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gorm, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gorm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(connection)</span></span></code></pre></div><h3 id="fix-orm-concurrency-safety-issue" tabindex="-1">Fix Orm concurrency safety issue <a class="header-anchor" href="#fix-orm-concurrency-safety-issue" aria-label="Permalink to â€œFix Orm concurrency safety issueâ€">â€‹</a></h3><p>Version: v1.8.1</p><p>When high concurrent access, reading <code>facades.Orm</code> for the first time may return nil.</p><h3 id="fix-mail-module-can-t-send-mail-by-25-and-465-ports" tabindex="-1">Fix Mail module can&#39;t send mail by 25 and 465 ports <a class="header-anchor" href="#fix-mail-module-can-t-send-mail-by-25-and-465-ports" aria-label="Permalink to â€œFix Mail module can&#39;t send mail by 25 and 465 portsâ€">â€‹</a></h3><p>Version: v1.8.2</p><p>You can send mail by 25, 465, 587 ports now.</p><h3 id="route-supports-https" tabindex="-1">Route supports HTTPS <a class="header-anchor" href="#route-supports-https" aria-label="Permalink to â€œRoute supports HTTPSâ€">â€‹</a></h3><p>Version: v1.8.3</p><p><code>facades.Route</code> Add <code>RunTLS</code> methodï¼Œsupport start HTTPS server, <a href="./../the-basics/routing.html#start-https-server">For Detail</a>.</p>`,58)]))}const g=e(n,[["render",r]]);export{m as __pageData,g as default};
