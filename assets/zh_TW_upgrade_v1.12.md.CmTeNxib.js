import{_ as s,f as i,o as e,an as t}from"./chunks/framework.CFMQV-X7.js";const c=JSON.parse('{"title":"從 v1.11 升級到 v1.12","description":"","frontmatter":{},"headers":[],"relativePath":"zh_TW/upgrade/v1.12.md","filePath":"zh_TW/upgrade/v1.12.md","lastUpdated":1761724533000}'),h={name:"zh_TW/upgrade/v1.12.md"};function n(l,a,d,r,p,k){return e(),i("div",null,a[0]||(a[0]=[t(`<h1 id="從-v1-11-升級到-v1-12" tabindex="-1">從 v1.11 升級到 v1.12 <a class="header-anchor" href="#從-v1-11-升級到-v1-12" aria-label="Permalink to “從 v1.11 升級到 v1.12”">​</a></h1><h2 id="v1-12-6" tabindex="-1">v1.12.6 <a class="header-anchor" href="#v1-12-6" aria-label="Permalink to “v1.12.6”">​</a></h2><h3 id="錯誤修復-🐛" tabindex="-1">錯誤修復 🐛 <a class="header-anchor" href="#錯誤修復-🐛" aria-label="Permalink to “錯誤修復 🐛”">​</a></h3><ul><li><a href="#fix-the-problem-of-jwt">修復 JWT 的問題</a></li></ul><h2 id="v1-12-5" tabindex="-1">v1.12.5 <a class="header-anchor" href="#v1-12-5" aria-label="Permalink to “v1.12.5”">​</a></h2><h3 id="錯誤修復-🐛-1" tabindex="-1">錯誤修復 🐛 <a class="header-anchor" href="#錯誤修復-🐛-1" aria-label="Permalink to “錯誤修復 🐛”">​</a></h3><ul><li><a href="#fix-the-problem-of-facades-orm-query-load">修復 facades.Orm().Query().Load() 的問題</a></li></ul><h2 id="v1-12-4" tabindex="-1">v1.12.4 <a class="header-anchor" href="#v1-12-4" aria-label="Permalink to “v1.12.4”">​</a></h2><h3 id="錯誤修復-🐛-2" tabindex="-1">錯誤修復 🐛 <a class="header-anchor" href="#錯誤修復-🐛-2" aria-label="Permalink to “錯誤修復 🐛”">​</a></h3><ul><li><a href="#the-problem-of-the-throttle-middleware-throw-panic">throttle 中間件 panic 的問題</a></li></ul><h2 id="v1-12-3" tabindex="-1">v1.12.3 <a class="header-anchor" href="#v1-12-3" aria-label="Permalink to “v1.12.3”">​</a></h2><h3 id="錯誤修復-🐛-3" tabindex="-1">錯誤修復 🐛 <a class="header-anchor" href="#錯誤修復-🐛-3" aria-label="Permalink to “錯誤修復 🐛”">​</a></h3><ul><li><a href="#the-problem-of-make-package-command-under-windows">Windows 下 make:package 命令的問題</a></li></ul><h2 id="v1-12-2" tabindex="-1">v1.12.2 <a class="header-anchor" href="#v1-12-2" aria-label="Permalink to “v1.12.2”">​</a></h2><h3 id="錯誤修復-🐛-4" tabindex="-1">錯誤修復 🐛 <a class="header-anchor" href="#錯誤修復-🐛-4" aria-label="Permalink to “錯誤修復 🐛”">​</a></h3><ul><li><a href="#the-problem-of-facades-gate-return-nil">facades.Gate() 返回 nil 的問題</a></li></ul><h2 id="v1-12-1" tabindex="-1">v1.12.1 <a class="header-anchor" href="#v1-12-1" aria-label="Permalink to “v1.12.1”">​</a></h2><h3 id="錯誤修復-🐛-5" tabindex="-1">錯誤修復 🐛 <a class="header-anchor" href="#錯誤修復-🐛-5" aria-label="Permalink to “錯誤修復 🐛”">​</a></h3><ul><li><a href="#the-panic-problem-caused-by-file-path-under-windows">Windows 下因文件路徑引發 panic 的問題</a></li></ul><h2 id="v1-12-0" tabindex="-1">v1.12.0 <a class="header-anchor" href="#v1-12-0" aria-label="Permalink to “v1.12.0”">​</a></h2><h3 id="令人興奮的新功能-🎉" tabindex="-1">令人興奮的新功能 🎉 <a class="header-anchor" href="#令人興奮的新功能-🎉" aria-label="Permalink to “令人興奮的新功能 🎉”">​</a></h3><ul><li><a href="#service-container">服務容器</a></li><li><a href="#package-development">擴展包開發</a></li><li><a href="#add-helpers-methods">新增 Carbon 模塊</a></li></ul><h2 id="功能增強-🚀" tabindex="-1">功能增強 🚀 <a class="header-anchor" href="#功能增強-🚀" aria-label="Permalink to “功能增強 🚀”">​</a></h2><ul><li><a href="#artisan-flag-adds-new-methods">Artisan Flag 新增方法</a></li><li><a href="#add-helpers-methods">新增 Helpers 方法</a></li><li><a href="#upgrade-dependencies">升級依賴</a></li><li><a href="#migration-adds-new-methods">Migration 新增命令</a></li><li><a href="#some-make-commands-support-subdirectories">部分 <code>make</code> 命令支持子文件夾</a></li></ul><h2 id="破壞性變化-🛠" tabindex="-1">破壞性變化 🛠 <a class="header-anchor" href="#破壞性變化-🛠" aria-label="Permalink to “破壞性變化 🛠”">​</a></h2><ul><li><a href="#_3-modify-facades">修改 facades 調用方式</a></li><li><a href="#_6-modify-flag-in-the-artisan-command-if-using">優化 Artisan Flag 參數格式</a></li><li><a href="#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio">Filesystem 模塊取消對 S3, OSS, COS, Minio 驅動的默認支持</a></li><li><a href="#_8-cache-module-cancels-default-support-for-redis">Cache 模塊取消對 Redis 驅動的默認支持</a></li><li><a href="#_9-change-the-type-of-createdat-updatedat-in-model">修改 Model 中 CreatedAt, UpdatedAt 的類型</a></li><li><a href="#_10-optimize-the-rule-of-validation-module">優化 Validation 模塊的校驗規則</a></li></ul><h2 id="升級指南" tabindex="-1">升級指南 <a class="header-anchor" href="#升級指南" aria-label="Permalink to “升級指南”">​</a></h2><p>請根據本節內容，一步步進行框架升級。</p><p><strong>預計升級時間：30 分鐘</strong></p><h3 id="_1-更新依賴" tabindex="-1">1. 更新依賴 <a class="header-anchor" href="#_1-更新依賴" aria-label="Permalink to “1. 更新依賴”">​</a></h3><p>在 <code>go.mod</code> 文件中更新依賴：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>go get -u github.com/goravel/framework@v1.12.0 &amp;&amp; go mod tidy</span></span></code></pre></div><p><code>go mod tidy</code> 將會拋出一個錯誤，執行完下面升級步驟即可解決。</p><h3 id="_2-修改-bootstrap-app-go" tabindex="-1">2. 修改 <code>bootstrap/app.go</code> <a class="header-anchor" href="#_2-修改-bootstrap-app-go" aria-label="Permalink to “2. 修改 bootstrap/app.go”">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改前</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改後</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> foundation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="_3-修改-facades" tabindex="-1">3. 修改 facades.* <a class="header-anchor" href="#_3-修改-facades" aria-label="Permalink to “3. 修改 facades.*”">​</a></h3><table tabindex="0"><thead><tr><th>修改前</th><th>修改後</th></tr></thead><tbody><tr><td><code>facades.Artisan</code></td><td><code>facades.Artisan()</code></td></tr><tr><td><code>facades.Auth</code></td><td><code>facades.Auth()</code></td></tr><tr><td><code>facades.Cache</code></td><td><code>facades.Cache()</code></td></tr><tr><td><code>facades.Config</code></td><td><code>facades.Config()</code></td></tr><tr><td><code>facades.Crypt</code></td><td><code>facades.Crypt()</code></td></tr><tr><td><code>facades.Event</code></td><td><code>facades.Event()</code></td></tr><tr><td><code>facades.Gate</code></td><td><code>facades.Gate()</code></td></tr><tr><td><code>facades.Grpc</code></td><td><code>facades.Grpc()</code></td></tr><tr><td><code>facades.Hash</code></td><td><code>facades.Hash()</code></td></tr><tr><td><code>facades.Log</code></td><td><code>facades.Log()</code></td></tr><tr><td><code>facades.Mail</code></td><td><code>facades.Mail()</code></td></tr><tr><td><code>facades.Orm</code></td><td><code>facades.Orm()</code></td></tr><tr><td><code>facades.Queue</code></td><td><code>facades.Queue()</code></td></tr><tr><td><code>facades.RateLimiter</code></td><td><code>facades.RateLimiter()</code></td></tr><tr><td><code>facades.Route</code></td><td><code>facades.Route()</code></td></tr><tr><td><code>facades.Schedule</code></td><td><code>facades.Schedule()</code></td></tr><tr><td><code>facades.Storage</code></td><td><code>facades.Storage()</code></td></tr><tr><td><code>facades.Validation</code></td><td><code>facades.Validation()</code></td></tr></tbody></table><h3 id="_4-修改-app-providers" tabindex="-1">4. 修改 <code>app/providers/*</code> <a class="header-anchor" href="#_4-修改-app-providers" aria-label="Permalink to “4. 修改 app/providers/*”">​</a></h3><p>所有檔案增加導入：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/foundation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>所有 <code>Register</code>, <code>Boot</code> 方法增加 <code>app foundation.Application</code> 入參：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">receiver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">receiver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span></code></pre></div><h3 id="_5-修改-app-config-app-go" tabindex="-1">5. 修改 <code>app/config/app.go</code> <a class="header-anchor" href="#_5-修改-app-config-app-go" aria-label="Permalink to “5. 修改 app/config/app.go”">​</a></h3><p>修改導入：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改前</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;github.com/goravel/framework/contracts&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;providers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contracts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改後</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;github.com/goravel/framework/contracts/foundation&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;providers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span></code></pre></div><h3 id="_6-修改-artisan-命令中的-flag-如果用到" tabindex="-1">6. 修改 Artisan 命令中的 Flag（如果用到） <a class="header-anchor" href="#_6-修改-artisan-命令中的-flag-如果用到" aria-label="Permalink to “6. 修改 Artisan 命令中的 Flag（如果用到）”">​</a></h3><p>為 <code>[]command.Flag</code> 中的項增加 <code>&amp;command.StringFlag</code> 類型：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改前</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">receiver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VendorPublishCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Flags: []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Flag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改後</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">receiver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VendorPublishCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Flags: []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Flag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StringFlag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_7-filesystem-模塊取消對-s3-oss-cos-minio-驅動的默認支持" tabindex="-1">7. Filesystem 模塊取消對 S3, OSS, COS, Minio 驅動的默認支持 <a class="header-anchor" href="#_7-filesystem-模塊取消對-s3-oss-cos-minio-驅動的默認支持" aria-label="Permalink to “7. Filesystem 模塊取消對 S3, OSS, COS, Minio 驅動的默認支持”">​</a></h3><p>為減少加載不必要的第三方包，減小打包體積，提高編譯效率，Goravel 將逐步剝離各模組驅動到獨立擴展包。 本次升級 Filesystem 模組取消對 <code>S3</code>, <code>OSS</code>, <code>COS</code>, <code>Minio</code> 驅動的默認支持，轉由獨立擴展包提供支持。 在此次升級中，<code>Filesystem</code> 模組取消對 <code>S3</code>, <code>OSS</code>, <code>COS</code>, <code>Minio</code> 驅動的默認支持，並轉移支持至獨立擴展包。</p><p>刪除 <code>config/filesystems.go::disks</code> 中除 <code>local</code> 和正在使用的驅動以外的鍵：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改後</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;disks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;local&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;local&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;storage/app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:    config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;APP_URL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/storage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>如果你用到了 <code>local</code> 以外的驅動，請參考對應驅動文檔進行安裝：</p><table tabindex="0"><thead><tr><th>驅動</th><th>鏈接</th></tr></thead><tbody><tr><td>S3</td><td><a href="https://github.com/goravel/s3" target="_blank" rel="noreferrer">https://github.com/goravel/s3</a></td></tr><tr><td>OSS</td><td><a href="https://github.com/goravel/oss" target="_blank" rel="noreferrer">https://github.com/goravel/oss</a></td></tr><tr><td>COS</td><td><a href="https://github.com/goravel/cos" target="_blank" rel="noreferrer">https://github.com/goravel/cos</a></td></tr><tr><td>Minio</td><td><a href="https://github.com/goravel/minio" target="_blank" rel="noreferrer">https://github.com/goravel/minio</a></td></tr></tbody></table><h3 id="_8-cache-模塊取消對-redis-驅動的默認支持" tabindex="-1">8. Cache 模塊取消對 Redis 驅動的默認支持 <a class="header-anchor" href="#_8-cache-模塊取消對-redis-驅動的默認支持" aria-label="Permalink to “8. Cache 模塊取消對 Redis 驅動的默認支持”">​</a></h3><p>如果你沒有使用 <code>redis</code> 驅動，刪除 <code>config/cache.go::stores</code> 中的 <code>redis</code> 鍵：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改後</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stores&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>如果你用到了 <code>redis</code> 驅動，請參考文檔進行安裝：</p><table tabindex="0"><thead><tr><th>驅動</th><th>連結</th></tr></thead><tbody><tr><td>Redis</td><td><a href="https://github.com/goravel/redis" target="_blank" rel="noreferrer">https://github.com/goravel/redis</a></td></tr></tbody></table><h3 id="_9-修改-model-中-createdat-updatedat-的類型" tabindex="-1">9. 修改 Model 中 CreatedAt, UpdatedAt 的類型 <a class="header-anchor" href="#_9-修改-model-中-createdat-updatedat-的類型" aria-label="Permalink to “9. 修改 Model 中 CreatedAt, UpdatedAt 的類型”">​</a></h3><p>為了使時間類型在 API 輸出時更加標準，<code>CreatedAt</code>、<code>UpdatedAt</code> 的類型由 <code>time.Time</code> 修改為 <code>carbon.DateTime</code>. 如果你對這兩個欄位進行了額外處理，可以通過 <code>CreatedAt.ToStdTime()</code> 方法獲取原有的 <code>time.Time</code> 類型。</p><h3 id="_10-優化-validation-模塊的校驗規則" tabindex="-1">10. 優化 Validation 模塊的校驗規則 <a class="header-anchor" href="#_10-優化-validation-模塊的校驗規則" aria-label="Permalink to “10. 優化 Validation 模塊的校驗規則”">​</a></h3><p>檢查原有校驗規則中的零值，例如，若規則設置為 <code>date</code> 且未設置 <code>required</code>，若該欄位為空或未傳入，校驗模塊將提示該欄位為必填。 優化後，校驗模塊會通過檢查，更符合使用直覺。 如果你用到了相關校驗，請確保升級後與預期一致。</p><h3 id="_11-再次安裝依賴" tabindex="-1">11. 再次安裝依賴 <a class="header-anchor" href="#_11-再次安裝依賴" aria-label="Permalink to “11. 再次安裝依賴”">​</a></h3><p>運行 <code>go mod tidy</code></p><h2 id="功能介紹" tabindex="-1">功能介紹 <a class="header-anchor" href="#功能介紹" aria-label="Permalink to “功能介紹”">​</a></h2><h3 id="服務容器" tabindex="-1">服務容器 <a class="header-anchor" href="#服務容器" aria-label="Permalink to “服務容器”">​</a></h3><p>版本：v1.12.0</p><p>Goravel 中所有服務都註冊到服務容器當中，為第三方包的開發提供有力的支持，<a href="./../architecture-concepts/service-container.html">詳見文檔</a>。</p><h3 id="擴展包開發" tabindex="-1">擴展包開發 <a class="header-anchor" href="#擴展包開發" aria-label="Permalink to “擴展包開發”">​</a></h3><p>版本：v1.12.0</p><p>包是向 Goravel 添加功能的主要方式，可以使 Goravel 的生態更加豐富，<a href="./../digging-deeper/package-development.html">詳見文檔</a>。</p><h3 id="artisan-flag-新增方法" tabindex="-1">Artisan Flag 新增方法 <a class="header-anchor" href="#artisan-flag-新增方法" aria-label="Permalink to “Artisan Flag 新增方法”">​</a></h3><p>版本：v1.12.0</p><p>為 Artisan 模塊新增獲取不同類型 <code>Flag</code> 的方法，<a href="./../digging-deeper/artisan-console.html#options">詳見文檔</a></p><h3 id="新增-helpers-方法" tabindex="-1">新增 Helpers 方法 <a class="header-anchor" href="#新增-helpers-方法" aria-label="Permalink to “新增 Helpers 方法”">​</a></h3><p>版本：v1.12.0</p><p>新增 <code>path</code> 和 <code>carbon</code> Helpers 方法，您可以輕鬆獲取項目的路徑信息並處理時間，<a href="./../digging-deeper/helpers.html">詳見文檔</a>。</p><h3 id="升級依賴" tabindex="-1">升級依賴 <a class="header-anchor" href="#升級依賴" aria-label="Permalink to “升級依賴”">​</a></h3><p>版本：v1.12.0</p><p>為提供更好的功能支持，升級了 Goravel 依賴的所有包的版本。</p><h3 id="migration-新增命令" tabindex="-1">Migration 新增命令 <a class="header-anchor" href="#migration-新增命令" aria-label="Permalink to “Migration 新增命令”">​</a></h3><p>版本：v1.12.0</p><table tabindex="0"><thead><tr><th>命令</th><th>操作</th></tr></thead><tbody><tr><td>migrate:fresh</td><td>刪除所有表並重新運行所有遷移</td></tr><tr><td>migrate:refresh</td><td>回滾所有遷移並重新運行所有遷移</td></tr><tr><td>migrate:reset</td><td>回滾所有資料庫遷移</td></tr><tr><td>migrate:status</td><td>查詢遷移狀態</td></tr></tbody></table><h3 id="部分-make-命令支持子文件夾" tabindex="-1">部分 <code>make</code> 命令支持子文件夾 <a class="header-anchor" href="#部分-make-命令支持子文件夾" aria-label="Permalink to “部分 make 命令支持子文件夾”">​</a></h3><p>版本：v1.12.0</p><table tabindex="0"><thead><tr><th>命令</th><th>生成文件</th></tr></thead><tbody><tr><td>make:policy User/AuthPolicy</td><td>app/policies/User/auth_policy.go</td></tr><tr><td>make:command Goravel/CleanCache</td><td>app/console/commands/Goravel/clean_cache.go</td></tr><tr><td>make:model User/Phone</td><td>app/models/User/phone.go</td></tr><tr><td>make:observer User/PhoneObserver</td><td>app/observers/User/phone_observer.go</td></tr><tr><td>make:event User/GoravelEvent</td><td>app/events/User/goravel_event.go</td></tr><tr><td>make:listener User/GoravelListen</td><td>app/listeners/User/goravel_listen.go</td></tr><tr><td>make:controller User/AuthController</td><td>app/http/controllers/User/auth_controller.go</td></tr><tr><td>make:middleware User/Auth</td><td>app/http/middleware/User/auth.go</td></tr><tr><td>make:request User/Auth</td><td>app/http/requests/User/auth.go</td></tr><tr><td>make:job Goravel/Job</td><td>app/jobs/Goravel/job.go</td></tr><tr><td>make:rule User/Phone</td><td>app/rules/User/phone.go</td></tr></tbody></table><h3 id="windows-下因文件路徑引發-panic-的問題" tabindex="-1">Windows 下因文件路徑引發 panic 的問題 <a class="header-anchor" href="#windows-下因文件路徑引發-panic-的問題" aria-label="Permalink to “Windows 下因文件路徑引發 panic 的問題”">​</a></h3><p>版本：v1.12.1</p><p>修復 Windows 下，<code>make</code> 命令自動創建文件夾時，由於反斜杠引發 panic 的問題。</p><h3 id="facades-gate-返回-nil-的問題" tabindex="-1">facades.Gate() 返回 nil 的問題 <a class="header-anchor" href="#facades-gate-返回-nil-的問題" aria-label="Permalink to “facades.Gate() 返回 nil 的問題”">​</a></h3><p>版本：v1.12.2</p><p>修復 facades.Gate() 返回 nil 的問題。</p><h3 id="windows-下-make-package-命令的問題" tabindex="-1">Windows 下 make:package 命令的問題 <a class="header-anchor" href="#windows-下-make-package-命令的問題" aria-label="Permalink to “Windows 下 make:package 命令的問題”">​</a></h3><p>版本：v1.12.3</p><p>修復 Windows 下 make:package 命令創建的文件中的路徑錯誤的問題。</p><h3 id="throttle-中間件-panic-的問題" tabindex="-1">throttle 中間件 panic 的問題 <a class="header-anchor" href="#throttle-中間件-panic-的問題" aria-label="Permalink to “throttle 中間件 panic 的問題”">​</a></h3><p>版本：v1.12.4</p><p>修復 throttle 中間件 panic 的問題。</p><h3 id="修復-facades-orm-query-load-的問題" tabindex="-1">修復 facades.Orm().Query().Load() 的問題 <a class="header-anchor" href="#修復-facades-orm-query-load-的問題" aria-label="Permalink to “修復 facades.Orm().Query().Load() 的問題”">​</a></h3><p>版本：v1.12.5</p><p>修復 <code>facades.Orm().Query().Load()</code> 某種情況下無法正確加載模型的問題。</p><h3 id="修復-jwt-的問題" tabindex="-1">修復 JWT 的問題 <a class="header-anchor" href="#修復-jwt-的問題" aria-label="Permalink to “修復 JWT 的問題”">​</a></h3><p>版本：v1.12.6</p><p>修復 JWT Token 過期且無效時，返回過期錯誤的問題，預期優先返回無效錯誤。</p>`,105)]))}const g=s(h,[["render",n]]);export{c as __pageData,g as default};
