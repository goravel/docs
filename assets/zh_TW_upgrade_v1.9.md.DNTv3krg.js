import{_ as e,f as i,o as s,an as n}from"./chunks/framework.CFMQV-X7.js";const k=JSON.parse('{"title":"從 v1.8 升級到 v1.9","description":"","frontmatter":{},"headers":[],"relativePath":"zh_TW/upgrade/v1.9.md","filePath":"zh_TW/upgrade/v1.9.md","lastUpdated":1761724533000}'),r={name:"zh_TW/upgrade/v1.9.md"};function l(t,a,o,h,p,d){return s(),i("div",null,a[0]||(a[0]=[n(`<h1 id="從-v1-8-升級到-v1-9" tabindex="-1">從 v1.8 升級到 v1.9 <a class="header-anchor" href="#從-v1-8-升級到-v1-9" aria-label="Permalink to “從 v1.8 升級到 v1.9”">​</a></h1><nav class="table-of-contents"><ul><li><a href="#功能增強-🚀">功能增強 🚀</a></li><li><a href="#破壞性變化-🛠">破壞性變化 🛠</a></li><li><a href="#bug-修復-🐛">Bug 修復 🐛</a></li><li><a href="#升級依賴-⬆️">升級依賴 ⬆️</a></li><li><a href="#升級指南">升級指南</a><ul><li><a href="#更新依賴">更新依賴</a></li><li><a href="#新增資料庫讀寫分離">新增資料庫讀寫分離</a></li><li><a href="#新增資料庫連接池配置">新增資料庫連接池配置</a></li><li><a href="#自定義-env-路徑">自定義 .env 路徑</a></li><li><a href="#cache-新增-memory-驅動">Cache 新增 Memory 驅動</a></li><li><a href="#orm-新增分頁方法">Orm 新增分頁方法</a></li><li><a href="#新增-make-命令">新增 make 命令</a></li><li><a href="#response-新增方法">Response 新增方法</a></li><li><a href="#request-prepareforvalidation-方法新增-error-返回">Request PrepareForValidation 方法新增 error 返回</a></li><li><a href="#file-獲取錯誤的文件類型">File 獲取錯誤的文件類型</a></li><li><a href="#修復-make-event-和-make-listener-命令生成模板有誤的問題">修復 make:event 和 make:listener 命令生成模板有誤的問題</a></li><li><a href="#修復保存文件時有些類型無法獲取後綴的問題">修復保存文件時有些類型無法獲取後綴的問題</a></li></ul></li></ul></nav><h2 id="功能增強-🚀" tabindex="-1">功能增強 🚀 <a class="header-anchor" href="#功能增強-🚀" aria-label="Permalink to “功能增強 🚀”">​</a></h2><ul><li><a href="#add-database-read-write-separation">新增資料庫讀寫分離(1.9.0)</a></li><li><a href="#add-database-pool-configuration">新增資料庫連接池配置(1.9.0)</a></li><li><a href="#custom--env-path">自定義 .env 路徑(1.9.0)</a></li><li><a href="#cache-add-memory-driver">Cache 新增 Memory 驅動(1.9.0)</a></li><li><a href="#orm-add-paginate-method">Orm 新增分頁方法(1.9.0)</a></li><li><a href="#add-make-command">新增 make 命令(1.9.0)</a></li><li><a href="#add-new-methods-for-Response">Response 新增方法(1.9.0)</a></li></ul><h2 id="破壞性變化-🛠" tabindex="-1">破壞性變化 🛠 <a class="header-anchor" href="#破壞性變化-🛠" aria-label="Permalink to “破壞性變化 🛠”">​</a></h2><ul><li><a href="#add-return-for-request-prepareforvalidation-method">Request PrepareForValidation 方法新增 error 返回(1.9.0)</a></li></ul><h2 id="bug-修復-🐛" tabindex="-1">Bug 修復 🐛 <a class="header-anchor" href="#bug-修復-🐛" aria-label="Permalink to “Bug 修復 🐛”">​</a></h2><ul><li><a href="#file-gets-the-wrong-file-type">File 獲取錯誤的文件類型(1.9.0)</a></li><li><a href="#fix-template-error-on-make-event-and-make-listener-command">修復 make:event 和 make:listener 命令生成模板有誤的問題(1.9.0)</a></li><li><a href="#fix-some-types-cannot-obtain-suffixes-when-save-file">修復保存文件時有些類型無法獲取後綴的問題(1.9.1)</a></li></ul><h2 id="升級依賴-⬆️" tabindex="-1">升級依賴 ⬆️ <a class="header-anchor" href="#升級依賴-⬆️" aria-label="Permalink to “升級依賴 ⬆️”">​</a></h2><ul><li>build(deps): bump github.com/gin-gonic/gin from v1.7.3 to v1.8.2</li></ul><h2 id="升級指南" tabindex="-1">升級指南 <a class="header-anchor" href="#升級指南" aria-label="Permalink to “升級指南”">​</a></h2><p><strong>預估升級時間：10 分鐘</strong></p><h3 id="更新依賴" tabindex="-1">更新依賴 <a class="header-anchor" href="#更新依賴" aria-label="Permalink to “更新依賴”">​</a></h3><p>在 <code>go.mod</code> 文件中更新依賴：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>go get -u github.com/goravel/framework@v1.9.0</span></span></code></pre></div><h3 id="新增資料庫讀寫分離" tabindex="-1">新增資料庫讀寫分離 <a class="header-anchor" href="#新增資料庫讀寫分離" aria-label="Permalink to “新增資料庫讀寫分離”">​</a></h3><p>Version: v1.9.0</p><p>資料庫支持讀寫分離，<a href="./../orm/getting-started.html#read--write-connections">詳見文檔</a>。</p><h3 id="新增資料庫連接池配置" tabindex="-1">新增資料庫連接池配置 <a class="header-anchor" href="#新增資料庫連接池配置" aria-label="Permalink to “新增資料庫連接池配置”">​</a></h3><p>Version: v1.9.0</p><p>資料庫配置文件 <code>config/database.go</code> 新增連接池配置 <code>pool</code>，<a href="https://github.com/goravel/goravel/blob/v1.9.x/config/database.go" target="_blank" rel="noreferrer">詳見文件</a>。</p><h3 id="自定義-env-路徑" tabindex="-1">自定義 .env 路徑 <a class="header-anchor" href="#自定義-env-路徑" aria-label="Permalink to “自定義 .env 路徑”">​</a></h3><p>Version: v1.9.0</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>// 開發</span></span>
<span class="line"><span>go run . --env=../.env</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 編譯後</span></span>
<span class="line"><span>./main --env=../.env</span></span></code></pre></div><h3 id="cache-新增-memory-驅動" tabindex="-1">Cache 新增 Memory 驅動 <a class="header-anchor" href="#cache-新增-memory-驅動" aria-label="Permalink to “Cache 新增 Memory 驅動”">​</a></h3><p>Version: v1.9.0</p><p><code>config/cache.go</code> 新增 <code>memory</code> 配置：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>&quot;stores&quot;: map[string]any{</span></span>
<span class="line"><span>  // 新增</span></span>
<span class="line"><span>  &quot;memory&quot;: map[string]any{</span></span>
<span class="line"><span>    &quot;driver&quot;: &quot;memory&quot;,</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>},</span></span></code></pre></div><p><a href="https://github.com/goravel/goravel/blob/v1.9.x/config/cache.go" target="_blank" rel="noreferrer">詳見文件</a></p><h3 id="orm-新增分頁方法" tabindex="-1">Orm 新增分頁方法 <a class="header-anchor" href="#orm-新增分頁方法" aria-label="Permalink to “Orm 新增分頁方法”">​</a></h3><p>Version: v1.9.0</p><p><code>facades.Orm</code> 新增 <code>Paginate</code> 方法，<a href="./../orm/getting-started.html#Paginate">詳見文檔</a>。</p><h3 id="新增-make-命令" tabindex="-1">新增 make 命令 <a class="header-anchor" href="#新增-make-命令" aria-label="Permalink to “新增 make 命令”">​</a></h3><p>Version: v1.9.0</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>// 創建控制器</span></span>
<span class="line"><span>go run . artisan make:controller UserController</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 創建中間件</span></span>
<span class="line"><span>go run . artisan make:middleware Cors</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 創建模型</span></span>
<span class="line"><span>go run . artisan make:model User</span></span></code></pre></div><h3 id="response-新增方法" tabindex="-1">Response 新增方法 <a class="header-anchor" href="#response-新增方法" aria-label="Permalink to “Response 新增方法”">​</a></h3><p>Version: v1.9.0</p><table tabindex="0"><thead><tr><th>方法名</th><th>操作</th></tr></thead><tbody><tr><td>Data</td><td><a href="./../the-basics/response.html#custom-return">自定義返回</a></td></tr><tr><td>Redirect</td><td><a href="./../the-basics/response.html#redirect">重定向</a></td></tr></tbody></table><h3 id="request-prepareforvalidation-方法新增-error-返回" tabindex="-1">Request PrepareForValidation 方法新增 error 返回 <a class="header-anchor" href="#request-prepareforvalidation-方法新增-error-返回" aria-label="Permalink to “Request PrepareForValidation 方法新增 error 返回”">​</a></h3><p>Version: v1.9.0</p><p>如果你使用到了 <a href="./../the-basics/validation.html#驗證前格式化數據">表單驗證中的 PrepareForValidation 方法</a>，請新增返回值：<code>PrepareForValidation(data validation.Data) error</code>。</p><h3 id="file-獲取錯誤的文件類型" tabindex="-1">File 獲取錯誤的文件類型 <a class="header-anchor" href="#file-獲取錯誤的文件類型" aria-label="Permalink to “File 獲取錯誤的文件類型”">​</a></h3><p>Version: v1.9.0</p><p>修復 <code>.docx</code>, <code>.xlsx</code> 等類型錯誤的識別為 <code>.zip</code> 的問題。</p><h3 id="修復-make-event-和-make-listener-命令生成模板有誤的問題" tabindex="-1">修復 make:event 和 make:listener 命令生成模板有誤的問題 <a class="header-anchor" href="#修復-make-event-和-make-listener-命令生成模板有誤的問題" aria-label="Permalink to “修復 make:event 和 make:listener 命令生成模板有誤的問題”">​</a></h3><p>Version: v1.9.0</p><p><code>import &quot;github.com/goravel/framework/contracts/events&quot;</code> 改為 <code>import &quot;github.com/goravel/framework/contracts/event&quot;</code></p><h3 id="修復保存文件時有些類型無法獲取後綴的問題" tabindex="-1">修復保存文件時有些類型無法獲取後綴的問題 <a class="header-anchor" href="#修復保存文件時有些類型無法獲取後綴的問題" aria-label="Permalink to “修復保存文件時有些類型無法獲取後綴的問題”">​</a></h3><p>Version: v1.9.1</p><p>下面代碼有些類型無法獲取後綴:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;upload&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div>`,51)]))}const m=e(r,[["render",l]]);export{k as __pageData,m as default};
