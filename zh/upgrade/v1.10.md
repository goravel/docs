# 从 v1.9 升级到 v1.10

[[toc]]

## 功能增强 🚀

- [优化 HTTP 启动方式(1.10.0)](#优化-HTTP-启动方式)
- [增加控制日志输出到控制台的配置(1.10.0)](#增加控制日志输出到控制台的配置)
- [Request 修改、新增方法](#Request-新增方法)

## 破坏性变化 🛠

- [优化 Authorization.Response 包路径(1.10.0)](#优化-Authorization.Response-包路径)
- [APP_KEY 必填](#APP_KEY-必填)

## Bug 修复 🐛

## 升级依赖 ⬆️

## 升级指南

**预计升级时间：5 分钟**

### 更新依赖

`go.mod` 中更新依赖：

```
go get -u github.com/goravel/framework@v1.10.0
```

### 优化 HTTP 启动方式

Version: v1.10.0

1. `facades.Route.Run` 方法不再需要传参（您无需修改代码，向下兼容）；
2. `facades.Route.RunTLS` 方法不再需要传参，如果用到，需修改代码；
3. 新增 `facades.Route.RunTLSWithCert`；
4. 新增 `config/route.go` 配置文件，[详见文件](https://github.com/goravel/goravel/blob/v1.10.x/config/route.go)；

### 增加控制日志输出到控制台的配置

Version: v1.10.0

`config/logging.go` 文件中，`single`, `daily` channel 新增 `print` 配置，可以控制日志是否输出到控制台，[详见文件](https://github.com/goravel/goravel/blob/v1.10.x/config/logging.go)；

### Request 修改、新增方法

Version: v1.10.0

1. `Input` 方法由仅获取路由参数，修改为根据以下顺序获取数据：`json`, `form`, `query`, `route`。注意：`json` 只能获取一维数据，否则将返回空；
2. 新增 `Route` 方法替代原有 `Input` 方法；
3. `Query` 与 `Form` 方法默认值修改为不必填；
4. 新增以下方法：

| 方法名        | 作用           |
| -----------  | -------------- |
| Route        | [获取路由中的参数](../the-basics/request.md#获取路由中的参数)     |
| RouteInt        | [获取路由中的参数](../the-basics/request.md#获取路由中的参数)     |
| RouteInt64        | [获取路由中的参数](../the-basics/request.md#获取路由中的参数)     |
| QueryInt        | [获取路由传入的参数](../the-basics/request.md#获取路由传入的参数)     |
| QueryInt64        | [获取路由传入的参数](../the-basics/request.md#获取路由传入的参数)     |
| QueryBool        | [获取路由传入的参数](../the-basics/request.md#获取路由传入的参数)     |
| InputInt        | [获取路由传入的参数](../the-basics/request.md#获取路由传入的参数)     |
| InputInt64        | [获取路由传入的参数](../the-basics/request.md#获取路由传入的参数)     |
| InputBool        | [获取路由传入的参数](../the-basics/request.md#获取路由传入的参数)     |
| Json        | [获取路由传入的 Json](../the-basics/request.md#获取-json)     |

### 优化 Authorization.Response 包路径

Version: v1.10.0

如果您使用了 `github.com/goravel/framework/contracts/auth/access::NewAllowResponse()` 或 `github.com/goravel/framework/contracts/auth/access::NewAllowResponse()`，请修改代码：

1. `github.com/goravel/framework/contracts/auth/access::Response` struct 修改为 `github.com/goravel/framework/auth/access::Response`；

2. 新增 `github.com/goravel/framework/contracts/auth/access::Response` 接口；

### APP_KEY 必填

Version: v1.10.0

`.env` 文件中 `APP_KEY` 修改为必填项，可以通过 `go run . artisan key:generate` 生成。