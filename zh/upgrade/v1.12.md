# 从 v1.11 升级到 v1.12

[[toc]]

### 令人兴奋的新功能 🎉

- [服务容器(1.12.0)](#服务容器)
- [扩展包开发(1.12.0)](#扩展包开发)

### 功能增强 🚀

- [Artisan Flag 新增方法](#artisan-flag-新增方法)
- [升级依赖](#升级依赖)

### 破坏性变化 🛠

- [修改 facades 调用方式(1.12.0)](#5--修改-facades-*)
- [优化 Artisan Flag 参数格式(1.12.0)](#6--修改-artisan-命令中的-flag（如果用到）)

## 升级指南

请根据本节内容，一步步进行框架升级。

**预计升级时间：10 分钟**

### 1. 更新依赖

`go.mod` 中更新依赖：

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

### 2. 修改 `bootstrap/app.go`

```go
// 修改前
app := foundation.Application{}

// 修改后
app := foundation.NewApplication()
```

### 3. 修改 `app/providers/*` 

所有文件增加导入：

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

所有 `Register`, `Boot` 方法增加 `app foundation.Application` 入参：

```go
func (receiver *AppServiceProvider) Register(app foundation.Application) {}

func (receiver *AppServiceProvider) Boot(app foundation.Application) {}
```

### 4. 修改 `app/config/*` 

修改导入：

```go
// 修改前
"github.com/goravel/framework/contracts"

// 修改后
"github.com/goravel/framework/contracts/foundation"
```

### 5. 修改 facades.*

| 修改前        | 修改后           |
| -----------  | -------------- |
| `facades.Artisan`    | `facades.Artisan()`     |
| `facades.Auth`    | `facades.Auth()`     |
| `facades.Cache`    | `facades.Cache()`     |
| `facades.Config`    | `facades.Config()`     |
| `facades.Crypt`    | `facades.Crypt()`     |
| `facades.Orm`    | `facades.Orm()`     |
| `facades.Event`    | `facades.Event()`     |
| `facades.Grpc`    | `facades.Grpc()`     |
| `facades.Hash`    | `facades.Hash()`     |
| `facades.Http`    | `facades.Http()`     |
| `facades.Log`    | `facades.Log()`     |
| `facades.Mail`    | `facades.Mail()`     |
| `facades.Queue`    | `facades.Queue()`     |
| `facades.Route`    | `facades.Route()`     |
| `facades.Schedule`    | `facades.Schedule()`     |
| `facades.Validation`    | `facades.Validation()`     |

### 6. 修改 Artisan 命令中的 Flag（如果用到）

为 `[]command.Flag` 中的项增加 `&command.StringFlag` 类型：

```go
// 修改前
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      {
        Name: "test",
      },
    },
  }
}

// 修改后
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      &command.StringFlag{
        Name: "test",
      },
    },
  }
}
```

## 功能介绍

### 服务容器

Version: v1.12.0

Goravel 中所有服务都注册到服务容器当中，为第三方包的开发提供有力的支持，[详见文档](../architecutre-concepts/service-container.md)。

### 扩展包开发

Version: v1.12.0

包是向 Goravel 添加功能的主要方式，可以使 Goravel 的生态更加丰富，[详见文档](../digging-deeper/package-development.md)。

### Artisan Flag 新增方法

Version: v1.12.0

新增获取不同类型 `Flag` 的方法，[详见文档](../digging-deeper/artisan-console.md#选项)。

### 升级依赖

Version: v1.12.0

为提供更好的功能支持，升级了 Goravel 依赖的所有包的版本。
