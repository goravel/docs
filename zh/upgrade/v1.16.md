# 从 v1.15 升级到 v1.16

### 令人兴奋的新功能 🎉

### 功能增强 🚀

- [Migration 支持 Change 方法](#migration-支持-change-方法)

### 破坏性变化 🛠

- [移除 SQL 迁移](#移除-sql-迁移)

## 升级指南

**预计升级时间：10 分钟**

// TODO
随着 [Golang v1.22 不再被维护](https://endoflife.date/go)，Goravel v1.15 默认支持 Golang 版本由 1.21 升级为 1.22，请在 go.mod 文件中更新版本。

### 1. 更新依赖

```
go get -u github.com/goravel/framework@v1.16.0

// 如果使用 gin
go get -u github.com/goravel/gin@v1.4.0

// 如果使用 fiber
go get -u github.com/goravel/fiber@v1.4.0

// 如果使用 redis
go get -u github.com/goravel/redis@v1.4.0

// 如果使用 S3
go get -u github.com/goravel/s3@v1.4.0

// 如果使用 Oss
go get -u github.com/goravel/oss@v1.4.0

// 如果使用 Cos
go get -u github.com/goravel/cos@v1.4.0

// 如果使用 Minio
go get -u github.com/goravel/minio@v1.4.0

// 如果使用 Cloudinary
go get -u github.com/goravel/cloudinary@v1.4.0
```

```
go mod tidy
```

### 2. 如果正在使用 SQL 数据迁移

需相应修改：[移除 SQL 迁移](#移除-sql-迁移)

## 功能介绍

### Migration 支持 Change 方法

新增 `Change` 方法，用于修改表结构：

```go
table.String("name").Change()
```

### 移除 SQL 迁移

SQL 迁移被完全移除，请使用 Go 语言迁移。迁移步骤：

1. 移除 `config/database.go` 中的 `migrations.driver` 键；
2. 将 `database/migrations` 目录下的 SQL 迁移文件转换为 Go 语言迁移文件：

```go
// Up Run the migrations.
func (r *M20241207095921CreateUsersTable) Up() error {
	return facades.Schema().Sql({Original SQL})
}

// Down Reverse the migrations.
func (r *M20241207095921CreateUsersTable) Down() error {
	return facades.Schema().Sql({Original SQL})
}
```

3. 在 `database/kernel.go` 文件中注册迁移文件；
