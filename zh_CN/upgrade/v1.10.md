# ä» v1.9 å‡çº§åˆ° v1.10

[[toc]]

## ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ ğŸ‰

- [æ–°å¢ facades.Crypt(1.10.0)](#åŠ å¯†è§£å¯†)
- [æ–°å¢ facades.Hash(1.10.0)](#å“ˆå¸Œ)
- [æ–°å¢è·¯ç”±é™æµå™¨(1.10.0)](#æ–°å¢è·¯ç”±é™æµå™¨)

## åŠŸèƒ½å¢å¼º ğŸš€

- [ä¼˜åŒ– HTTP å¯åŠ¨æ–¹å¼(1.10.0)](#ä¼˜åŒ–-http-å¯åŠ¨æ–¹å¼)
- [ä¼˜åŒ– GPRC å¯åŠ¨æ–¹å¼(1.10.0)](#ä¼˜åŒ–-grpc-å¯åŠ¨æ–¹å¼)
- [å¢åŠ æ§åˆ¶æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°çš„é…ç½®(1.10.0)](#å¢åŠ æ§åˆ¶æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°çš„é…ç½®)
- [Request ä¿®æ”¹ã€æ–°å¢æ–¹æ³•(1.10.0)](#request-ä¿®æ”¹ã€æ–°å¢æ–¹æ³•)
- [é˜Ÿåˆ—æ”¯æŒå»¶è¿Ÿè°ƒåº¦(1.10.0)](#é˜Ÿåˆ—æ”¯æŒå»¶è¿Ÿè°ƒåº¦)
- [ORM Connection æ”¯æŒé…ç½®è¡¨åå‰ç¼€ä¸å•å¤æ•°(1.10.0)](#orm-connection-æ”¯æŒé…ç½®è¡¨åå‰ç¼€ä¸å•å¤æ•°)
- [æ–°å¢ docker-compose.yml æ–‡ä»¶(1.10.0)](#æ–°å¢-docker-compose-yml-æ–‡ä»¶)
- [ä¼˜åŒ– Orm(1.10.0)](#ä¼˜åŒ–-orm)
- [è¿ç§»æ–‡ä»¶ä¸­æ”¯æŒæ‰§è¡Œå¤šæ¡ SQL è¯­å¥(1.10.0)](#è¿ç§»æ–‡ä»¶ä¸­æ”¯æŒæ‰§è¡Œå¤šæ¡-sql-è¯­å¥)
- [æ–‡ä»¶ç³»ç»Ÿæ–°å¢ minio é©±åŠ¨(1.10.0)](#æ–‡ä»¶ç³»ç»Ÿæ–°å¢-minio-é©±åŠ¨)
- [contracts/http å¢åŠ  net/http çš„ Status æ˜ å°„(1.10.0)](#contracts-http-å¢åŠ -net-http-çš„-status-æ˜ å°„)

## ç ´åæ€§å˜åŒ– ğŸ› 

- [APP_KEY å¿…å¡«(1.10.0)](#app-key-å¿…å¡«)
- [è¡¨å•éªŒè¯ä¸­æ–¹æ³•æ–°å¢ ctx å‚æ•°(1.10.0)](#è¡¨å•éªŒè¯ä¸­æ–¹æ³•æ–°å¢-ctx-å‚æ•°)
- [facades.Auth.Parse æ–°å¢ payload è¿”å›(1.10.0)](#facades-auth-parse-æ–°å¢-payload-è¿”å›)
- [Orm çš„éƒ¨åˆ†æ–¹æ³•æ–°å¢è¿”å›å€¼(1.10.0)](#orm-çš„éƒ¨åˆ†æ–¹æ³•æ–°å¢è¿”å›å€¼)

## å‡çº§æŒ‡å—

**é¢„è®¡å‡çº§æ—¶é—´ï¼š20 åˆ†é’Ÿ**

### æ›´æ–°ä¾èµ–

`go.mod` ä¸­æ›´æ–°ä¾èµ–ï¼š

```
go get -u github.com/goravel/framework@v1.10.1 && go mod tidy
```

### åŠ å¯†è§£å¯†

Version: v1.10.0

æ–°å¢ `facades.Crypt`ï¼š

1. [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go) æ–‡ä»¶ `providers` æ–°å¢ `&crypt.ServiceProvider{},`ã€‚

[æŸ¥çœ‹æ–‡æ¡£](../security/encryption.md)

### å“ˆå¸Œ

Version: v1.10.0

æ–°å¢ `facades.Hash`ï¼š

1. [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go) æ–‡ä»¶ `providers` æ–°å¢ `&hash.ServiceProvider{},`ï¼›

2. æ–°å¢ [config/hashing.go](https://github.com/goravel/goravel/blob/v1.10.x/config/hashing.go) æ–‡ä»¶ï¼›

[æŸ¥çœ‹æ–‡æ¡£](../security/hashing.md)

### [ä¸ºè·¯ç”±æ·»åŠ é™æµ](#add-rate-limiting-for-routing)

Version: v1.10.0

[æŸ¥çœ‹æ–‡æ¡£](../the-basics/routing.md#é€Ÿç‡é™åˆ¶)

### ä¼˜åŒ– HTTP å¯åŠ¨æ–¹å¼

Version: v1.10.0

1. æ–°å¢ `config/http.go` é…ç½®æ–‡ä»¶ï¼Œ[è¯¦è§æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/http.go)ï¼›
2. `facades.Route.Run` æ–¹æ³•ä¸å†éœ€è¦ä¼ å‚ï¼Œé»˜è®¤è¯»å– `http.host` å’Œ `http.port`ï¼ˆæ‚¨æ— éœ€ä¿®æ”¹ä»£ç ï¼Œå‘ä¸‹å…¼å®¹ï¼‰ï¼›
3. `facades.Route.RunTLS` æ–¹æ³•ä¸å†éœ€è¦ä¼ å‚ï¼Œé»˜è®¤è¯»å– `http.tls.host`ï¼Œ`http.tls.port`ï¼Œ`http.tls.ssl.cert` å’Œ `http.tls.ssl.key`ï¼Œå¦‚æœç”¨åˆ°ï¼Œéœ€ä¿®æ”¹ä»£ç ï¼›
4. æ–°å¢ `facades.Route.RunTLSWithCert` æ–¹æ³•ï¼Œ[è¯¦è§æ–‡æ¡£](../the-basics/routing.md#å¯åŠ¨æœåŠ¡å™¨)ï¼›
5. ç§»åŠ¨é…ç½® `app.url`, `app.host` åˆ° `http.url`, `http.host`ï¼›

### ä¼˜åŒ– GRPC å¯åŠ¨æ–¹å¼

Version: v1.10.0

`facades.Grpc.Run` æ–¹æ³•ä¸å†éœ€è¦ä¼ å‚ï¼Œé»˜è®¤è¯»å– `grpc.host` å’Œ `grpc.port`ï¼ˆæ‚¨æ— éœ€ä¿®æ”¹ä»£ç ï¼Œå‘ä¸‹å…¼å®¹ï¼‰ï¼›

### å¢åŠ æ§åˆ¶æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°çš„é…ç½®

Version: v1.10.0

`config/logging.go` æ–‡ä»¶ä¸­ï¼Œ`single`, `daily` channel æ–°å¢ `print` é…ç½®ï¼Œå¯ä»¥æ§åˆ¶æ—¥å¿—æ˜¯å¦è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œ[è¯¦è§æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/logging.go)ï¼›

### Request ä¿®æ”¹ã€æ–°å¢æ–¹æ³•

Version: v1.10.0

1. `Input` æ–¹æ³•ç”±ä»…è·å–è·¯ç”±å‚æ•°ï¼Œä¿®æ”¹ä¸ºæ ¹æ®ä»¥ä¸‹é¡ºåºè·å–æ•°æ®ï¼š`json`, `form`, `query`, `route`ã€‚æ³¨æ„ï¼š`json` åªèƒ½è·å–ä¸€ç»´æ•°æ®ï¼Œå¦åˆ™å°†è¿”å›ç©ºï¼›
2. æ–°å¢ `Route` æ–¹æ³•æ›¿ä»£åŸæœ‰ `Input` æ–¹æ³•åŠŸèƒ½ï¼›
3. `Query` ä¸ `Form` æ–¹æ³•é»˜è®¤å€¼ä¿®æ”¹ä¸ºä¸å¿…å¡«ï¼›
4. æ–°å¢ä»¥ä¸‹æ–¹æ³•ï¼š

| æ–¹æ³•å        | ä½œç”¨                                                                      |
| ---------- | ----------------------------------------------------------------------- |
| Route      | [è·å–è·¯ç”±ä¸­çš„å‚æ•°](../the-basics/request.md#è·å–è·¯ç”±ä¸­çš„å‚æ•°)                           |
| RouteInt   | [è·å–è·¯ç”±ä¸­çš„å‚æ•°](../the-basics/request.md#è·å–è·¯ç”±ä¸­çš„å‚æ•°)                           |
| RouteInt64 | [è·å–è·¯ç”±ä¸­çš„å‚æ•°](../the-basics/request.md#è·å–è·¯ç”±ä¸­çš„å‚æ•°)                           |
| QueryInt   | [ä»æŸ¥è¯¢å­—ç¬¦ä¸²è·å–è¾“å…¥](../basic/requests#Retrieving-Input-From-The-Query-String)  |
| QueryInt64 | [ä»æŸ¥è¯¢å­—ç¬¦ä¸²è·å–è¾“å…¥](../basic/requests#Retrieving-Input-From-The-Query-String)  |
| QueryBool  | [ä»æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­æ£€ç´¢è¾“å…¥](../basic/requests#Retrieving-Input-From-The-Query-String) |
| InputInt   | [æ£€ç´¢è¾“å…¥å€¼](../basic/requests#Retrieving-An-Input-Value)                    |
| InputInt64 | [æ£€ç´¢è¾“å…¥å€¼](../basic/requests#Retrieving-An-Input-Value)                    |
| InputBool  | [æ£€ç´¢è¾“å…¥å€¼](../basic/requests#Retrieving-An-Input-Value)                    |
| Json       | [è·å–è·¯ç”±ä¼ å…¥çš„ Json](../the-basics/request.md#è·å–-json)                        |

### é˜Ÿåˆ—æ”¯æŒå»¶è¿Ÿè°ƒåº¦

Version: v1.10.0

æ–°å¢ `Delay` æ–¹æ³•ï¼Œ[è¯¦è§æ–‡æ¡£](../digging-deeper/queues.md#å»¶è¿Ÿè°ƒåº¦)

### ORM Connection æ”¯æŒé…ç½®è¡¨åå‰ç¼€ä¸å•å¤æ•°

Version: v1.10.0

1. `Model` æ”¯æŒæŒ‡å®šè¡¨åï¼Œ[è¯¦è§æ–‡æ¡£](../orm/getting-started.md#æŒ‡å®šè¡¨å)ï¼›
2. `config/database.go` ä¸­çš„ `connection` æ–°å¢é”®å€¼ï¼š

`prefix`ï¼šè®¾ç½®è¡¨åå‰ç¼€ï¼›
`singular`ï¼šè®¾ç½®è¡¨åä½¿ç”¨å•æ•°è¿˜æ˜¯å¤æ•°ï¼›

[è¯¦è§æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/database.go)

### æ–°å¢ docker-compose.yml æ–‡ä»¶

Version: v1.10.0

æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¿«é€Ÿå¯åŠ¨æœåŠ¡ï¼š

```
docker-compose build
docker-compose up
```

### ä¼˜åŒ– Orm

Version: v1.10.0

1. æ–°å¢ä»¥ä¸‹æ–¹æ³•ï¼š

| ä½œç”¨             | ä½œç”¨                                               |
| -------------- | ------------------------------------------------ |
| FirstOr        | [é€šè¿‡å›è°ƒæŸ¥è¯¢æˆ–è¿”å›æ•°æ®](#Query-one-line)                   |
| FirstOrNew     | [æ£€ç´¢æˆ–åˆ›å»ºæ–°æ¨¡å‹](#Retrieving-Or-Creating-Models)       |
| FirstOrFail    | [æœªæ‰¾åˆ°é”™è¯¯](#Not-Found-Error)                        |
| UpdateOrCreate | [æ›´æ–°æˆ–åˆ›å»ºä¸€æ¡æ•°æ®](../orm/getting-started.md#æ›´æ–°æˆ–åˆ›å»ºä¸€æ¡æ•°æ®) |

2. ä¹‹å‰è¿™æ ·å†™æŠ¥é”™ï¼Œç°åœ¨æ”¯æŒï¼š

```go
query := facades.Orm.Query()
query = query.Where()
```

### è¿ç§»æ–‡ä»¶ä¸­æ”¯æŒæ‰§è¡Œå¤šæ¡ SQL è¯­å¥

Version: v1.10.0

ä¹‹å‰è¿ç§»æ–‡ä»¶ä¸­ä»…æ”¯æŒæ‰§è¡Œä¸€æ¡ SQL è¯­å¥ï¼Œç°åœ¨æ”¯æŒå¤šæ¡ã€‚

### æ–‡ä»¶ç³»ç»Ÿæ–°å¢ minio é©±åŠ¨

Version: v1.10.0

æ–°å¢ minio é…ç½®ï¼Œ[è¯¦è§æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/filesystems.go)ã€‚

### contracts/http å¢åŠ  net/http çš„ Status æ˜ å°„

Version: v1.10.0

å¯ä»¥åœ¨ controller ä¸­ç›´æ¥ä½¿ç”¨ `http.StatusOK` ç­‰çŠ¶æ€ç ï¼Œè€Œä¸éœ€è¦å†å¯¼å…¥ `net/http`ã€‚

[è¯¦è§æ–‡ä»¶](https://github.com/goravel/framework/blob/v1.10.0/contracts/http/status.go)

### APP_KEY å¿…å¡«

Version: v1.10.0

`.env` æ–‡ä»¶ä¸­ `APP_KEY` ä¿®æ”¹ä¸ºå¿…å¡«é¡¹ï¼Œå¯ä»¥é€šè¿‡ `go run . artisan key:generate` ç”Ÿæˆã€‚

### è¡¨å•éªŒè¯ä¸­æ–¹æ³•æ–°å¢ ctx å‚æ•°

Version: v1.10.0

è¡¨å•éªŒè¯çš„ `Rules`, `Messages`, `Attributes`, `PrepareForValidation` æ–¹æ³•ï¼Œæ–°å¢ `ctx http.Context` ä¼ å‚ï¼Œä½¿æ‚¨å¯ä»¥è¿›è¡Œæ›´åŠ è‡ªå®šä¹‰çš„é…ç½®ã€‚

[è¯¦è§æ–‡æ¡£](../the-basics/validation.md#åˆ›å»ºè¡¨å•è¯·æ±‚éªŒè¯)

### facades.Auth.Parse æ–°å¢ payload è¿”å›

Version: v1.10.0

`err := facades.Auth.Parse(ctx, token)` ä¿®æ”¹ä¸º `payload, err := facades.Auth.Parse(ctx, token)`ï¼Œé€šè¿‡ `payload` æ‚¨å¯ä»¥è·å–åˆ°ï¼š

1. `Guard`: å½“å‰ Guardï¼›
2. `Key`: ç”¨æˆ·æ ‡è¯†ï¼›
3. `ExpireAt`: è¿‡æœŸæ—¶é—´ï¼›
4. `IssuedAt`: å‘è¡Œæ—¶é—´ï¼›

[è¯¦è§æ–‡æ¡£](../security/authentication.md#è§£æ-token)

### Orm çš„éƒ¨åˆ†æ–¹æ³•æ–°å¢è¿”å›å€¼

Version: v1.10.0

ä»¥ä¸‹æ–¹æ³•æ–°å¢ `*Result` è¿”å›å€¼ï¼Œä»¥è·å–å½±å“è¡Œæ•°ï¼š

```go
res, err := query.Delete(&user)
res, err := query.Exec(fmt.Sprintf("DELETE FROM users where id = %d", user.ID))
res, err := query.ForceDelete(&User{})
res, err := query.Updates(User{Avatar: "avatar"})

// è·å–å—å½±å“è¡Œæ•°
num := res.RowsAffected
```
