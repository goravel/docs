# ä» v1.11 å‡çº§åˆ° v1.12

## v1.12.6

### Bug ä¿®å¤ ğŸ›

- [ä¿®å¤ JWT çš„é—®é¢˜](#ä¿®å¤-jwt-çš„é—®é¢˜)

## v1.12.5

### Bug ä¿®å¤ ğŸ›

- [ä¿®å¤ facades.Orm().Query().Load() çš„é—®é¢˜](#ä¿®å¤-facades-orm-query-load-çš„é—®é¢˜)

## v1.12.4

### Bug ä¿®å¤ ğŸ›

- [throttle ä¸­é—´ä»¶ panic çš„é—®é¢˜](#throttle-ä¸­é—´ä»¶-panic-çš„é—®é¢˜)

## v1.12.3

### Bug ä¿®å¤ ğŸ›

- [Windows ä¸‹ make:package å‘½ä»¤çš„é—®é¢˜](#windows-ä¸‹-make-package-å‘½ä»¤çš„é—®é¢˜)

## v1.12.2

### Bug ä¿®å¤ ğŸ›

- [facades.Gate() è¿”å› nil çš„é—®é¢˜](#facades-gate-è¿”å›-nil-çš„é—®é¢˜)

## v1.12.1

### Bug ä¿®å¤ ğŸ›

- [Windows ä¸‹å› æ–‡ä»¶è·¯å¾„å¼•å‘ panic çš„é—®é¢˜](#windows-ä¸‹å› æ–‡ä»¶è·¯å¾„å¼•å‘-panic-çš„é—®é¢˜)

## v1.12.0

### ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ ğŸ‰

- [æœåŠ¡å®¹å™¨](#æœåŠ¡å®¹å™¨)
- [æ‰©å±•åŒ…å¼€å‘](#æ‰©å±•åŒ…å¼€å‘)
- [æ–°å¢ Carbon æ¨¡å—](#æ–°å¢-helpers-æ–¹æ³•)

## åŠŸèƒ½å¢å¼º ğŸš€

- [Artisan Flag æ–°å¢æ–¹æ³•](#artisan-flag-æ–°å¢æ–¹æ³•)
- [æ–°å¢ Helpers æ–¹æ³•](#æ–°å¢-helpers-æ–¹æ³•)
- [å‡çº§ä¾èµ–](#å‡çº§ä¾èµ–)
- [Migration æ–°å¢å‘½ä»¤](#migration-æ–°å¢å‘½ä»¤)
- [éƒ¨åˆ† `make` å‘½ä»¤æ”¯æŒå­æ–‡ä»¶å¤¹](#éƒ¨åˆ†-make-å‘½ä»¤æ”¯æŒå­æ–‡ä»¶å¤¹)

## ç ´åæ€§å˜åŒ– ğŸ› 

- [ä¿®æ”¹ facades è°ƒç”¨æ–¹å¼](#_3-ä¿®æ”¹-facades)
- [ä¼˜åŒ– Artisan Flag å‚æ•°æ ¼å¼](#_6-ä¿®æ”¹-artisan-å‘½ä»¤ä¸­çš„-flag-å¦‚æœç”¨åˆ°)
- [Filesystem æ¨¡å—å–æ¶ˆå¯¹ S3, OSS, COS, Minio é©±åŠ¨çš„é»˜è®¤æ”¯æŒ](#_7-filesystem-æ¨¡å—å–æ¶ˆå¯¹-s3-oss-cos-minio-é©±åŠ¨çš„é»˜è®¤æ”¯æŒ)
- [Cache æ¨¡å—å–æ¶ˆå¯¹ Redis é©±åŠ¨çš„é»˜è®¤æ”¯æŒ](#_8-cache-æ¨¡å—å–æ¶ˆå¯¹-redis-é©±åŠ¨çš„é»˜è®¤æ”¯æŒ)
- [ä¿®æ”¹ Model ä¸­ CreatedAt, UpdatedAt çš„ç±»å‹](#_9-ä¿®æ”¹-model-ä¸­-createdat-updatedat-çš„ç±»å‹)
- [ä¼˜åŒ– Validation æ¨¡å—çš„æ ¡éªŒè§„åˆ™](#_10-ä¼˜åŒ–-validation-æ¨¡å—çš„æ ¡éªŒè§„åˆ™)

## å‡çº§æŒ‡å—

è¯·æ ¹æ®æœ¬èŠ‚å†…å®¹ï¼Œä¸€æ­¥æ­¥è¿›è¡Œæ¡†æ¶å‡çº§ã€‚

**é¢„è®¡å‡çº§æ—¶é—´ï¼š30 åˆ†é’Ÿ**

### 1. æ›´æ–°ä¾èµ–

`go.mod` ä¸­æ›´æ–°ä¾èµ–ï¼š

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

`go mod tidy` å°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œæ‰§è¡Œå®Œä¸‹é¢å‡çº§æ­¥éª¤å³å¯è§£å†³ã€‚

### 2. ä¿®æ”¹ `bootstrap/app.go`

```go
// ä¿®æ”¹å‰
app := foundation.Application{}

// ä¿®æ”¹å
app := foundation.NewApplication()
```

### 3. ä¿®æ”¹ facades.\*

| ä¿®æ”¹å‰                   | ä¿®æ”¹å                     |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Event`       | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.Queue`       | `facades.Queue()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. ä¿®æ”¹ `app/providers/*`

æ‰€æœ‰æ–‡ä»¶å¢åŠ å¯¼å…¥ï¼š

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

æ‰€æœ‰ `Register`, `Boot` æ–¹æ³•å¢åŠ  `app foundation.Application` å…¥å‚ï¼š

```go
func (receiver *AppServiceProvider) Register(app foundation.Application) {}

func (receiver *AppServiceProvider) Boot(app foundation.Application) {}
```

### 5. ä¿®æ”¹ `app/config/app.go`

ä¿®æ”¹å¯¼å…¥ï¼š

```go
// ä¿®æ”¹å‰
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// ä¿®æ”¹å
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{
```

### 6. ä¿®æ”¹ Artisan å‘½ä»¤ä¸­çš„ Flagï¼ˆå¦‚æœç”¨åˆ°ï¼‰

ä¸º `[]command.Flag` ä¸­çš„é¡¹å¢åŠ  `&command.StringFlag` ç±»å‹ï¼š

```go
// ä¿®æ”¹å‰
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      {
        Name: "test",
      },
    },
  }
}

// ä¿®æ”¹å
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      &command.StringFlag{
        Name: "test",
      },
    },
  }
}
```

### 7. Filesystem æ¨¡å—å–æ¶ˆå¯¹ S3, OSS, COS, Minio é©±åŠ¨çš„é»˜è®¤æ”¯æŒ

ä¸ºå‡å°‘åŠ è½½ä¸å¿…è¦çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯ï¼Œæé«˜ç¼–è¯‘æ•ˆç‡ï¼ŒGoravel å°†é€æ­¥å‰¥ç¦»å„æ¨¡å—é©±åŠ¨åˆ°ç‹¬ç«‹æ‰©å±•åŒ…ã€‚ æœ¬æ¬¡å‡çº§ Filesystem æ¨¡å—å–æ¶ˆå¯¹ `S3`, `OSS`, `COS`, `Minio` é©±åŠ¨çš„é»˜è®¤æ”¯æŒï¼Œè½¬ç”±ç‹¬ç«‹æ‰©å±•åŒ…æä¾›æ”¯æŒã€‚

åˆ é™¤ `config/filesystems.go::disks` ä¸­é™¤ `local` å’Œæ­£åœ¨ä½¿ç”¨çš„é©±åŠ¨ä»¥å¤–çš„é”®ï¼š

```go
// ä¿®æ”¹å
"disks": map[string]any{
  "local": map[string]any{
    "driver": "local",
    "root":   "storage/app",
    "url":    config.Env("APP_URL", "").(string) + "/storage",
  },
},
```

å¦‚æœä½ ç”¨åˆ°äº† `local` ä»¥å¤–çš„é©±åŠ¨ï¼Œè¯·å‚è€ƒå¯¹åº”é©±åŠ¨æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼š

| é©±åŠ¨    | é“¾æ¥                                                                                                   |
| ----- | ---------------------------------------------------------------------------------------------------- |
| S3    | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS   | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| COS   | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| Minio | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. Cache æ¨¡å—å–æ¶ˆå¯¹ Redis é©±åŠ¨çš„é»˜è®¤æ”¯æŒ

å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ `redis` é©±åŠ¨ï¼Œåˆ é™¤ `config/cache.go::stores` ä¸­çš„ `redis` é”®ï¼š

```go
// ä¿®æ”¹å
"stores": map[string]any{
  "memory": map[string]any{
    "driver": "memory",
  },
},
```

å¦‚æœä½ ç”¨åˆ°äº† `redis` é©±åŠ¨ï¼Œè¯·å‚è€ƒæ–‡æ¡£è¿›è¡Œå®‰è£…ï¼š

| é©±åŠ¨    | é“¾æ¥                                                                                                   |
| ----- | ---------------------------------------------------------------------------------------------------- |
| Redis | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. ä¿®æ”¹ Model ä¸­ CreatedAt, UpdatedAt çš„ç±»å‹

ä¸ºäº†ä½¿æ—¶é—´ç±»å‹åœ¨æ¥å£è¾“å‡ºæ—¶æ›´åŠ æ ‡å‡†ï¼Œ`CreatedAt`, `UpdatedAt` ç±»å‹ç”± `time.Time` ä¿®æ”¹ä¸º `carbon.DateTime`ã€‚ å¦‚æœä½ å¯¹è¿™ä¸¤ä¸ªå­—æ®µè¿›è¡Œäº†é¢å¤–å¤„ç†ï¼Œå¯ä»¥é€šè¿‡ `CreatedAt.ToStdTime()` æ–¹æ³•è·å–åŸæœ‰çš„ `time.Time` ç±»å‹ã€‚

### 10. ä¼˜åŒ– Validation æ¨¡å—çš„æ ¡éªŒè§„åˆ™

åŸæœ‰æ ¡éªŒè§„åˆ™ä¸­å¯¹é›¶å€¼è¿›è¡Œæ ¡éªŒï¼Œä¾‹å¦‚è®¾ç½®è§„åˆ™ä¸º `date` ä¸”æ²¡æœ‰è®¾ç½® `required`ï¼Œå¦‚æœè¯¥å­—æ®µä¸ºç©ºæˆ–æœªä¼ å…¥ï¼Œä¼šæç¤ºè¯¥å­—æ®µå¿…å¡«ã€‚ ä¼˜åŒ–åï¼Œå°†è·³è¿‡æ ¡éªŒï¼Œæ›´ç¬¦åˆä½¿ç”¨ç›´è§‰ã€‚ å¦‚æœä½ ç”¨åˆ°äº†ç›¸å…³æ ¡éªŒï¼Œè¯·ç¡®ä¿å‡çº§åä¸é¢„æœŸä¸€è‡´ã€‚

### 11. å†æ¬¡å®‰è£…ä¾èµ–

è¿è¡Œ `go mod tidy` å‘½ä»¤ã€‚

## åŠŸèƒ½ä»‹ç»

### æœåŠ¡å®¹å™¨

Version: v1.12.0

Goravel ä¸­æ‰€æœ‰æœåŠ¡éƒ½æ³¨å†Œåˆ°æœåŠ¡å®¹å™¨å½“ä¸­ï¼Œä¸ºç¬¬ä¸‰æ–¹åŒ…çš„å¼€å‘æä¾›æœ‰åŠ›çš„æ”¯æŒï¼Œ[è¯¦è§æ–‡æ¡£](../architecture-concepts/service-container.md)ã€‚

### æ‰©å±•åŒ…å¼€å‘

Version: v1.12.0

åŒ…æ˜¯å‘ Goravel æ·»åŠ åŠŸèƒ½çš„ä¸»è¦æ–¹å¼ï¼Œå¯ä»¥ä½¿ Goravel çš„ç”Ÿæ€æ›´åŠ ä¸°å¯Œï¼Œ[è¯¦è§æ–‡æ¡£](../digging-deeper/package-development.md)ã€‚

### Artisan Flag æ–°å¢æ–¹æ³•

Version: v1.12.0

ä¸º Artisan æ¨¡å—æ–°å¢è·å–ä¸åŒç±»å‹ `Flag` çš„æ–¹æ³•ï¼Œ[è¯¦è§æ–‡æ¡£](../digging-deeper/artisan-console.md#é€‰é¡¹)ã€‚

### æ–°å¢ Helpers æ–¹æ³•

Version: v1.12.0

æ–°å¢ `path`, `carbon` Helpers æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è·å–é¡¹ç›®ä¸­çš„è·¯å¾„ä¿¡æ¯ä¸è¿›è¡Œæ—¶é—´å¤„ç†ï¼Œ[è¯¦è§æ–‡æ¡£](../digging-deeper/helpers.md)ã€‚

### å‡çº§ä¾èµ–

Version: v1.12.0

ä¸ºæä¾›æ›´å¥½çš„åŠŸèƒ½æ”¯æŒï¼Œå‡çº§äº† Goravel ä¾èµ–çš„æ‰€æœ‰åŒ…çš„ç‰ˆæœ¬ã€‚

### Migration æ–°å¢å‘½ä»¤

Version: v1.12.0

| å‘½ä»¤                              | ä½œç”¨              |
| ------------------------------- | --------------- |
| migrate:fresh   | åˆ é™¤æ‰€æœ‰è¡¨å¹¶é‡æ–°è¿è¡Œæ‰€æœ‰è¿ç§»  |
| migrate:refresh | å›æ»šæ‰€æœ‰è¿ç§»å¹¶é‡æ–°è¿è¡Œæ‰€æœ‰è¿ç§» |
| migrate:reset   | å›æ»šæ‰€æœ‰è¿ç§»          |
| migrate:status  | æŸ¥è¯¢è¿ç§»çŠ¶æ€          |

### éƒ¨åˆ† `make` å‘½ä»¤æ”¯æŒå­æ–‡ä»¶å¤¹

Version: v1.12.0

| å‘½ä»¤                                                  | ç”Ÿæˆæ–‡ä»¶                                                                              |
| --------------------------------------------------- | --------------------------------------------------------------------------------- |
| make:policy User/AuthPolicy         | app/policies/User/auth_policy.go             |
| make:command Goravel/CleanCache     | app/console/commands/Goravel/clean_cache.go  |
| make:model User/Phone               | app/models/User/phone.go                                          |
| make:observer User/PhoneObserver    | app/observers/User/phone_observer.go         |
| make:event User/GoravelEvent        | app/events/User/goravel_event.go             |
| make:listener User/GoravelListen    | app/listeners/User/goravel_listen.go         |
| make:controller User/AuthController | app/http/controllers/User/auth_controller.go |
| make:middleware User/Auth           | app/http/middleware/User/auth.go                                  |
| make:request User/Auth              | app/http/requests/User/auth.go                                    |
| make:job Goravel/Job                | app/jobs/Goravel/job.go                                           |
| make:rule User/Phone                | app/rules/User/phone.go                                           |

### Windows ä¸‹å› æ–‡ä»¶è·¯å¾„å¼•å‘ panic çš„é—®é¢˜

Version: v1.12.1

ä¿®å¤ windows ä¸‹ï¼Œ`make` å‘½ä»¤è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å¤¹æ—¶ï¼Œç”±äºåæ–œæ å¼•å‘ panic çš„é—®é¢˜ã€‚

### facades.Gate() è¿”å› nil çš„é—®é¢˜

Version: v1.12.2

ä¿®å¤ facades.Gate() è¿”å› nil çš„é—®é¢˜ã€‚

### Windows ä¸‹ make:package å‘½ä»¤çš„é—®é¢˜

Version: v1.12.3

ä¿®å¤ Windows ä¸‹ make:package å‘½ä»¤åˆ›å»ºçš„æ–‡ä»¶ä¸­çš„è·¯å¾„é”™è¯¯çš„é—®é¢˜ã€‚

### throttle ä¸­é—´ä»¶ panic çš„é—®é¢˜

Version: v1.12.4

ä¿®å¤ throttle ä¸­é—´ä»¶ panic çš„é—®é¢˜ã€‚

### ä¿®å¤ facades.Orm().Query().Load() çš„é—®é¢˜

Version: v1.12.5

ä¿®å¤ `facades.Orm().Query().Load()` æŸç§æƒ…å†µä¸‹æ— æ³•æ­£ç¡®åŠ è½½æ¨¡å‹çš„é—®é¢˜ã€‚

### ä¿®å¤ JWT çš„é—®é¢˜

Version: v1.12.6

ä¿®å¤ JWT Token è¿‡æœŸä¸”æ— æ•ˆæ—¶ï¼Œè¿”å›è¿‡æœŸé”™è¯¯çš„é—®é¢˜ï¼Œé¢„æœŸä¼˜å…ˆè¿”å›æ— æ•ˆé”™è¯¯ã€‚
