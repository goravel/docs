# ä» v1.7 å‡çº§åˆ° v1.8

[[toc]]

## ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ ğŸ‰

- [ä¸º Orm æ·»åŠ æ¨¡å‹å…³è”(1.8.0)](#add-model-association-for-orm)

## å¢å¼ºåŠŸèƒ½ ğŸš€

- [ä¸º Request æ·»åŠ æ–¹æ³•(1.8.0)](#add-methods-for-request)
- [ä¸º Response æ·»åŠ æ–¹æ³•(1.8.0)](#add-methods-for-response)
- [ä¼˜åŒ–æ•°æ®åº“è¿ç§»(1.8.0)](#optimize-database-migrate)
- [è·¯ç”±æ”¯æŒ HTTPS(1.8.3)](#route-supports-https)

## ç ´åæ€§å˜æ›´ ğŸ› 

- [ä¼˜åŒ–å¯¼å…¥é¡ºåº(1.8.0)](#optimize-import-order)
- [mock.Validator æ›´æ”¹åç§°(1.8.0)](#mock-validator-change-Name)
- [support.Mysql æ›´æ”¹åç§°(1.8.0)](#support-mysql-change-name)
- [database.NewGormInstance å³å°†è¢«å¼ƒç”¨(1.8.0)](#database-newgorminstance-is-about-to-be-deprecated)

## é”™è¯¯ä¿®å¤ ğŸ›

- [ä¿®å¤ Orm å¹¶å‘å®‰å…¨é—®é¢˜(1.8.1)](#fix-orm-concurrency-safety-issue)
- [ä¿®å¤é‚®ä»¶æ¨¡å—æ— æ³•é€šè¿‡ 25 å’Œ 465 ç«¯å£å‘é€é‚®ä»¶(1.8.2)](#fix-mail-module-can-t-send-mail-by-25-and-465-ports)

## å‡çº§æŒ‡å—

**é¢„è®¡å‡çº§æ—¶é—´ï¼š1 åˆ†é’Ÿ**

### æ›´æ–°ä¾èµ–

æ›´æ–° `go.mod` æ–‡ä»¶ä¸­çš„ä¾èµ–ï¼š

```
go get -u github.com/goravel/framework@v1.8.3
```

### ä¸º Orm æ·»åŠ æ¨¡å‹å…³è”

ç‰ˆæœ¬ï¼šv1.8.0

ä¸º Orm æ·»åŠ æ–¹æ³•ï¼Œä»¥å¤„ç†æ¨¡å‹å…³è”ï¼š

| æ–¹æ³•          | æ“ä½œ                                                                                        |
| ----------- | ----------------------------------------------------------------------------------------- |
| Association | [å…³è”](../orm/relationships#querying-associations)                                          |
| DB          | [é€šç”¨æ•°æ®åº“æ¥å£ sql.DB](../orm/getting-started#generic-database-interface-sqldb) |
| Load        | [å»¶è¿Ÿé¢„åŠ è½½](../orm/relationships#lazy-eager-loading)                                          |
| LoadMissing | [å»¶è¿Ÿé¢„åŠ è½½ï¼ˆä¸å­˜åœ¨ï¼‰](../orm/relationships#lazy-eager-loading)                                     |
| Omit        | [å¿½ç•¥å…³è”](../orm/relationships#create-or-update-associations)                                |
| With        | [é¢„åŠ è½½](../orm/relationships#Eager-Loading)                                                 |

### ä¸ºè¯·æ±‚æ·»åŠ æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.8.0

ä¸º `ctx.Request()` æ·»åŠ æ–¹æ³•ï¼Œä»¥ä¸°å¯Œ `Query` å‚æ•°çš„æ ¼å¼ï¼š

| æ–¹æ³•           | æ“ä½œ                                                                 |
| ------------ | ------------------------------------------------------------------ |
| `QueryArray` | [è·å–æ•°ç»„å‚æ•°](../basic/requests#Retrieving-Input-From-The-Query-String) |
| `QueryMap`   | [è·å–æ˜ å°„å‚æ•°](../basic/requests#Retrieving-Input-From-The-Query-String) |

### ä¸ºResponseæ·»åŠ æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.8.0

ä¸º`ctx.Response()`æ·»åŠ `Origin`æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åœ¨HTTPä¸­é—´ä»¶ä¸­è·å–`Response`çš„æ‰€æœ‰ä¿¡æ¯ã€‚

[è¯¦æƒ…](../basic/responses#Get-Response)

### ä¼˜åŒ–å¯¼å…¥é¡ºåº

ç‰ˆæœ¬ï¼šv1.8.0

åœ¨ `bootstrap/app.go` æ–‡ä»¶ä¸­ï¼Œå¯¼å…¥é¡ºåºæ›´æ”¹ä¸ºï¼š

```go
package bootstrap

import (
  "github.com/goravel/framework/foundation"

  "goravel/config"
)
```

[æ–‡ä»¶é“¾æ¥](https://github.com/goravel/goravel/blob/v1.8.0/bootstrap/app.go)

### ä¼˜åŒ–æ•°æ®åº“è¿ç§»

ç‰ˆæœ¬ï¼šv1.8.0

è¿è¡Œç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶å‘½ä»¤ `go run . è¿è¡Œç”Ÿæˆè¿ç§»æ–‡ä»¶çš„å‘½ä»¤ï¼š`go run .` artisan make:migration create_users_table`ï¼Œå°†æ ¹æ®å½“å‰ä½¿ç”¨çš„é»˜è®¤æ•°æ®åº“é©±åŠ¨ï¼ˆ
`facades.Config.GetString("database.default")\`ï¼‰ç”Ÿæˆç›¸åº”çš„è¿ç§»æ–‡ä»¶ã€‚

### mock.Validator æ›´å

ç‰ˆæœ¬ï¼šv1.8.0

å¦‚æœæ‚¨ä½¿ç”¨ `mock.Validator` ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š

```
import "github.com/goravel/framework/testing/mock"

mock.Validation

// ä¿®æ”¹ä¸º

import "github.com/goravel/framework/testing/mock"

mock.Validation
```

[è¯¦æƒ…](../testing/mocks)

### support.Mysql æ›´æ”¹åç§°

ç‰ˆæœ¬ï¼šv1.8.0

å¦‚æœæ‚¨ä½¿ç”¨æ¡†æ¶å¸¸é‡å¦‚ `support.Mysql` æ¥åˆ¤æ–­æ•°æ®åº“é©±åŠ¨ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š

```go
import "github.com/goravel/framework/database/support"

support.Mysql
support.Postgresql
support.Sqlite
support.Sqlserver

// ä¿®æ”¹ä¸º

import "github.com/goravel/framework/contracts/database/orm"

orm.Mysql
orm.Postgresql
orm.Sqlite
orm.Sqlserver
```

æ–°çš„å¸¸é‡å¦‚ `orm.Mysql` æ˜¯ `orm.Driver` ç±»å‹ï¼Œå¯ä»¥é€šè¿‡ `orm.Mysql.String()` æ–¹æ³•è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚

### database.NewGormInstance å³å°†è¢«å¼ƒç”¨

ç‰ˆæœ¬ï¼šv1.8.0

åœ¨ v1.9.0 ç‰ˆæœ¬ä¸­ï¼Œ`database.NewGormInstance` æ–¹æ³•å°†è¢«å¼ƒç”¨ï¼Œä½†åœ¨å½“å‰ç‰ˆæœ¬ä¸­ä»å¯ä½¿ç”¨ã€‚å¦‚æœæ‚¨ä½¿ç”¨æ­¤æ–¹æ³•è·å– `gorm` å®ä¾‹ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š

```go
import "github.com/goravel/framework/database"

gorm, err := database.NewGormInstance(connection)

// ä¿®æ”¹ä¸º

import "github.com/goravel/framework/database/gorm"

gorm, err := gorm.New(connection)
```

### ä¿®å¤ Orm å¹¶å‘å®‰å…¨é—®é¢˜

ç‰ˆæœ¬ï¼šv1.8.1

åœ¨é«˜å¹¶å‘è®¿é—®æ—¶ï¼Œé¦–æ¬¡è¯»å– `facades.Orm` å¯èƒ½è¿”å› nilã€‚

### ä¿®å¤ Mail æ¨¡å—æ— æ³•é€šè¿‡ 25 å’Œ 465 ç«¯å£å‘é€é‚®ä»¶çš„é—®é¢˜

ç‰ˆæœ¬ï¼šv1.8.2

ç°åœ¨æ‚¨å¯ä»¥é€šè¿‡ 25ã€465ã€587 ç«¯å£å‘é€é‚®ä»¶ã€‚

### è·¯ç”±æ”¯æŒ HTTPS

ç‰ˆæœ¬ï¼šv1.8.3

`facades.Route` æ·»åŠ  `RunTLS` æ–¹æ³•ï¼Œæ”¯æŒå¯åŠ¨ HTTPS
æœåŠ¡å™¨ï¼Œ[è¯¦æƒ…](../basic/routing#start-https-server)ã€‚
