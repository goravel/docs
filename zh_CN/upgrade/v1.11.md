# ä» v1.10 å‡çº§åˆ° v1.11

[[toc]]

## v1.11.3

### é”™è¯¯ä¿®å¤ ğŸ›

- [Schedule ä¸­ç”± panic å¼•èµ·çš„è¿›ç¨‹ä¸­æ–­é—®é¢˜](#the-problem-of-process-interruption-caused-by-panic-in-schedule)
- [Schedule ä¸­ DailyAt æ¯åˆ†é’Ÿæ‰§è¡Œçš„é—®é¢˜](#the-problem-that-dailyat-in-schedule-will-be-executed-every-minute)

## v1.11.2

### é”™è¯¯ä¿®å¤ ğŸ›

- [ä¿®å¤åŒæ—¶ä½¿ç”¨ Request.Input() å’Œ Request.Bind() æ—¶çš„æ•°æ®é”™è¯¯](#fix-the-data-error-of-using-request-input\\(\\)-and-request-bind\\(\\)-at-the-same-time)

## v1.11.1

### ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ ğŸ‰

- [è·¯ç”±æ·»åŠ èµ„æºè·¯ç”±](#route-add-resource-routing)
- [è¯·æ±‚æ·»åŠ æ–°æ–¹æ³•](#request-add-new-methods)
- [å­˜å‚¨æ·»åŠ æ–°æ–¹æ³•](#storage-add-new-methods)
- [æ–‡ä»¶æ·»åŠ æ–°æ–¹æ³•](#file-add-new-methods)

### é”™è¯¯ä¿®å¤ ğŸ›

- [ä¿®å¤ Filesystem ä¸­ Windows è·¯å¾„ä¸æ­£ç¡®çš„é”™è¯¯](#fix-the-error-of-incorrect-windows-path-for-filesystem)
- [ä¿®å¤ Request çš„ Header æ–¹æ³•çš„ panic](#fix-the-panic-of-the-header-method-for-request)

## v1.11.0

## ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ ğŸ‰

- [Orm æ·»åŠ æ¨¡å‹äº‹ä»¶(1.11.0)](#orm-add-model-events)

## å¢å¼ºåŠŸèƒ½ ğŸš€

- [ç¼“å­˜æ·»åŠ å’Œä¼˜åŒ–æ–¹æ³•(1.11.0)](#cache-add-and-optimize-methods)
- [è·¯ç”±æ”¯æŒå›é€€è·¯ç”±(1.11.0)](#route-supports-fallback-route)
- [Orm æ·»åŠ æ–°æ–¹æ³•(1.11.0)](#orm-adds-new-methods)
- [ä¼˜åŒ– facades.Config.Add()(1.11.0)](#optimize-facades-config-add)
- [æ›´æ”¹ SQLite é©±åŠ¨(1.11.0)](#change-sqlite-driver)
- [contracts/http æ·»åŠ  net/http çš„æ–¹æ³•æ˜ å°„(1.11.0)](#contracts-http-add-method-mapping-of-net-http)

### é‡å¤§å˜æ›´ ğŸ› 

- [Orm ç§»é™¤æ–¹æ³•(1.11.0)](#_2-remove-deprecated-methods)

### Bug ä¿®å¤ ğŸ›

- å“ˆå¸Œé…ç½®åœ¨æŸäº›æƒ…å†µä¸‹ä¸ç”Ÿæ•ˆçš„é—®é¢˜(1.11.0)
- RateLimiterä¸­çš„éçº¿ç¨‹å®‰å…¨é—®é¢˜(1.11.0)

## å‡çº§æŒ‡å—

è¯·æŒ‰ç…§æœ¬èŠ‚å†…å®¹é€æ­¥å‡çº§æ¡†æ¶ã€‚

**é¢„è®¡å‡çº§æ—¶é—´ï¼š1åˆ†é’Ÿ**

### æ›´æ–°ä¾èµ–

åœ¨`go.mod`æ–‡ä»¶ä¸­æ›´æ–°ä¾èµ–ï¼š

```
go get -u github.com/goravel/framework@v1.11.0 && go mod tidy
```

```
go get -u github.com/goravel/framework@v1.11.0 && go mod tidy
```

### 2. 2ã€‚ ç§»é™¤å·²å¼ƒç”¨çš„æ–¹æ³•

```
import (
  "github.com/goravel/framework/database"
  "github.com/goravel/framework/database/gorm"
)

// å·²å¼ƒç”¨
database.NewGormInstance()
// æ›¿æ¢ä¸ºï¼ˆæ³¨æ„ï¼šä¸æ¨èä½¿ç”¨æ­¤æ–¹æ³•ï¼Œè¯·å°½é‡é¿å…ä½¿ç”¨ï¼‰
gorm.New()

// å·²å¼ƒç”¨
facades.Orm.Query().Updates()
// æ›¿æ¢ä¸ºï¼ˆåªéœ€ä¿®æ”¹æ–¹æ³•åå³å¯ï¼Œæ— éœ€ä¿®æ”¹å‚æ•°ï¼‰
facades.Orm.Query().Update()

// Update æ–¹æ³•çš„è¿”å›å€¼å‘ç”Ÿå˜åŒ–
// ä¹‹å‰
err := facades.Orm.Query().Update()
// ä¹‹å
res, err := facades.Orm.Query().Update()
```

## æ–°å†…å®¹

æœ¬èŠ‚ä¸æ¶‰åŠä»£ç æ›´æ”¹ï¼Œä»…ä¸ºåŠŸèƒ½å¢å¼ºã€‚

### Orm æ·»åŠ æ¨¡å‹äº‹ä»¶

ç‰ˆæœ¬ï¼šv1.10.1

Orm æ¨¡å‹è§¦å‘å¤šä¸ªäº‹ä»¶ï¼Œå…è®¸æ‚¨åœ¨æ¨¡å‹ç”Ÿå‘½å‘¨æœŸçš„ä»¥ä¸‹æ—¶åˆ»è¿›è¡Œé’©å­ï¼š`Retrieved`ã€`Creating`ã€`Created`ã€`Updating`ã€`Updated`ã€`Saving`ã€`Saved`ã€`Deleting`ã€`Deleted`ã€`ForceDeleting`ã€`ForceDeleted`ã€‚

[è¯¦ç»†ä¿¡æ¯](../orm/getting-started#events)

### Cache æ·»åŠ å’Œä¼˜åŒ–æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.10.1

#### æ–°æ–¹æ³•

| æ–¹æ³•        | æ“ä½œ                                                            |
| --------- | ------------------------------------------------------------- |
| Decrement | [é€’å‡](../advanced/cache#incrementing--decrementing-values)     |
| Increment | [é€’å¢](../advanced/cache#incrementing--decrementing-values)     |
| Lock      | [åŸå­é”](../advanced/cache#atomic-locks)                         |
| Store     | [è®¿é—®å¤šä¸ªç¼“å­˜å­˜å‚¨](../advanced/cache#accessing-multiple-cache-stores) |

#### ä¼˜åŒ–æ–¹æ³•

`Get`ã€`GetBool`ã€`GetInt`ã€`GetInt64`ã€`GetString`ã€`Pull` ä¸å†éœ€è¦ä¼ é€’é»˜è®¤å€¼ï¼ˆå‘åå…¼å®¹ï¼‰ã€‚

### è·¯ç”±æ”¯æŒå›é€€è·¯ç”±

ç‰ˆæœ¬ï¼šv1.10.1

æ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªè·¯ç”±ï¼Œå½“æ²¡æœ‰å…¶ä»–è·¯ç”±åŒ¹é…ä¼ å…¥è¯·æ±‚æ—¶å°†æ‰§è¡Œè¯¥è·¯ç”±ã€‚

```go
facades.Route.Fallback(func(ctx http.Context) http.Response {
  return ctx.Response().String(404, "æœªæ‰¾åˆ°")
})
```

### Orm æ·»åŠ æ–°æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.10.1

| æ–¹æ³•                     | æ“ä½œ                                                 |
| ---------------------- | -------------------------------------------------- |
| db.Raw | [åŸå§‹è¡¨è¾¾å¼](../orm/getting-started#raw-expressions)    |
| LockForUpdate          | [æ‚²è§‚é”å®š](../orm/getting-started#pessimistic-locking) |
| SharedLock             | [æ‚²è§‚é”å®š](../orm/getting-started#pessimistic-locking) |

### ä¼˜åŒ– facades.Config.Add()

ç‰ˆæœ¬ï¼šv1.11.0

`facades.Config.Add()` çš„ `configuration` å‚æ•°ä» `map[string]any` æ›´æ”¹ä¸º `any`ï¼Œä½¿é…ç½®æ›´åŠ çµæ´»ã€‚

[è¯¦ç»†ä¿¡æ¯](../quickstart/configuration#set-configuration)

### æ›´æ”¹ SQLite é©±åŠ¨

å› ä¸º `github.com/mattn/go-sqlite3` éœ€è¦å¯åŠ¨ `CGO`ï¼Œæ‰€ä»¥æ›¿æ¢ä¸ºä¸éœ€è¦ `CGO` çš„ç¬¬ä¸‰æ–¹åŒ…ï¼š`github.com/glebarez/go-sqlite`ã€‚

### contracts/http æ·»åŠ  net/http çš„æ–¹æ³•æ˜ å°„

ç‰ˆæœ¬ï¼šv1.11.0

ä½ å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­ç›´æ¥ä½¿ç”¨ `http.MethodGet`ï¼Œè€Œä¸éœ€è¦å¯¼å…¥ `net/http`ã€‚

[è¯¦ç»†ä¿¡æ¯](https://github.com/goravel/framework/blob/v1.11.0/contracts/http/method.go)

### è·¯ç”±æ·»åŠ èµ„æºè·¯ç”±

ç‰ˆæœ¬ï¼šv1.11.1

```go
facades.Route.Resource("/resource", resourceController)
```

[è¯¦ç»†ä¿¡æ¯](../basic/routing#resource-routing)

### Request æ·»åŠ æ–°æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.11.1

| æ–¹æ³•      | æ“ä½œ                                                                      |
| ------- | ----------------------------------------------------------------------- |
| All     | [æ£€ç´¢æ‰€æœ‰è¾“å…¥æ•°æ®](../basic/requests#retrieving-all-input-data)                 |
| Host    | [æ£€ç´¢è¯·æ±‚ä¸»æœº](../basic/requests#retrieving-the-request-host)                 |
| Queries | [ä»æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­æ£€ç´¢è¾“å…¥](../basic/requests#retrieving-input-from-the-query-string) |

å³å°†å¼ƒç”¨çš„ `Form`ã€`Json` æ–¹æ³•ï¼Œè¯·æ”¹ç”¨ `Input`ã€‚

### å­˜å‚¨æ·»åŠ æ–°æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.11.1

| æ–¹æ³•           | æ“ä½œ                                          |
| ------------ | ------------------------------------------- |
| LastModified | [è·å–æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´](../advanced/fs#file-metadata) |
| MimeType     | [è·å–æ–‡ä»¶çš„MIMEç±»å‹](../advanced/fs#file-metadata) |

### æ–‡ä»¶æ–°å¢æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.11.1

| æ–¹æ³•           | æ“ä½œ                                            |
| ------------ | --------------------------------------------- |
| LastModified | [è·å–æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´](../advanced/fs#file-metadata)   |
| MimeType     | [è·å–æ–‡ä»¶çš„ mime ç±»å‹](../advanced/fs#file-metadata) |
| Size         | [è·å–æ–‡ä»¶çš„å¤§å°](../advanced/fs#file-metadata)       |

### ä¿®å¤ Windows ç³»ç»Ÿä¸­æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ä¸æ­£ç¡®çš„é”™è¯¯

ç‰ˆæœ¬ï¼šv1.11.1

Windows ç³»ç»Ÿä¸­å­˜åœ¨é”™è¯¯çš„æ–œæ ã€‚

### ä¿®å¤è¯·æ±‚çš„ Header æ–¹æ³•å¼•èµ·çš„å´©æºƒ

ç‰ˆæœ¬ï¼šv1.11.1

`ctx.Request().Header( key: "token")` ä¼šå¯¼è‡´å´©æºƒã€‚

### ä¿®å¤åŒæ—¶ä½¿ç”¨ Request.Input() å’Œ Request.Bind() æ—¶çš„æ•°æ®é”™è¯¯

ç‰ˆæœ¬ï¼šv1.11.2

`Request.Input()` å°†æ¸…é™¤ `Request.Body`ï¼Œå¦‚æœä¹‹åä½¿ç”¨ `Request.Bind()`ï¼Œä½ å°†æ— æ³•æ­£ç¡®è·å–æ•°æ®ã€‚

### Schedule ä¸­ç”± panic å¼•èµ·çš„è¿›ç¨‹ä¸­æ–­é—®é¢˜

ç‰ˆæœ¬ï¼šv1.11.3

å½“å‘ç”Ÿ panic æ—¶ï¼ŒSchedule è¿›ç¨‹å°†ä¸­æ–­ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½å°†å—åˆ°å½±å“ã€‚

### Schedule ä¸­ DailyAt æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡çš„é—®é¢˜

ç‰ˆæœ¬ï¼šv1.11.3

ä¿®å¤ `DailyAt` æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡çš„é—®é¢˜ï¼š

```go
func (kernel *Kernel) Schedule() []schedule.Event {
  return []schedule.Event{
    facades.Schedule.Call(func() {
      fmt.Print("1")
    }).DailyAt("18:00"),
  }
}
```
