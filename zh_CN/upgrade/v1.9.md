# ä» v1.8 å‡çº§åˆ° v1.9

[[toc]]

## å¢å¼ºåŠŸèƒ½ ğŸš€

- [æ·»åŠ æ•°æ®åº“è¯»å†™åˆ†ç¦»](#add-database-read-write-separation)
- [æ·»åŠ æ•°æ®åº“è¿æ¥æ± é…ç½®](#add-database-pool-configuration)
- [è‡ªå®šä¹‰.envè·¯å¾„](#custom-env-path)
- [ç¼“å­˜æ·»åŠ å†…å­˜é©±åŠ¨](#cache-add-memory-driver)
- [Ormæ·»åŠ Paginateæ–¹æ³•](#orm-add-paginate-method)
- [æ·»åŠ makeå‘½ä»¤](#add-make-command)
- [ä¸ºResponseæ·»åŠ æ–°æ–¹æ³•](#add-new-methods-for-response)

## ç ´åæ€§å˜æ›´ ğŸ› 

- [ä¸º Request PrepareForValidation æ–¹æ³•æ·»åŠ è¿”å›å€¼(1.9.0)](#add-return-for-request-prepareforvalidation-method)

## Bug ä¿®å¤ ğŸ›

- [æ–‡ä»¶è·å–åˆ°é”™è¯¯çš„æ–‡ä»¶ç±»å‹(1.9.0)](#file-gets-the-wrong-file-type)
- [ä¿®å¤ make:event å’Œ make:listener å‘½ä»¤çš„æ¨¡æ¿é”™è¯¯(1.9.0)](#fix-template-error-on-make-event-and-make-listener-command)
- [ä¿®å¤æŸäº›ç±»å‹åœ¨ä¿å­˜æ–‡ä»¶æ—¶æ— æ³•è·å–åç¼€çš„é—®é¢˜(1.9.1)](#fix-some-types-cannot-obtain-suffixes-when-save-file)

## ä¾èµ–æ›´æ–° â¬†ï¸

- build(deps): å°† github.com/gin-gonic/gin ä» v1.7.3 å‡çº§åˆ° v1.8.2

## å‡çº§æŒ‡å—

**é¢„è®¡å‡çº§æ—¶é—´ï¼š10åˆ†é’Ÿ**

### æ›´æ–°ä¾èµ–

åœ¨ `go.mod` æ–‡ä»¶ä¸­æ›´æ–°ä¾èµ–ï¼š

```
go get -u github.com/goravel/framework@v1.9.0
```

### æ·»åŠ æ•°æ®åº“è¯»å†™åˆ†ç¦»

ç‰ˆæœ¬ï¼šv1.9.0

æ•°æ®åº“æ”¯æŒè¯»å†™åˆ†ç¦»ï¼Œ[è¯¦æƒ…](../orm/getting-started#read--write-connections)ã€‚

### æ·»åŠ æ•°æ®åº“è¿æ¥æ± é…ç½®

ç‰ˆæœ¬ï¼šv1.9.0

ä¸ºæ•°æ®åº“é…ç½®æ–‡ä»¶æ·»åŠ è¿æ¥æ± é…ç½®ï¼š
`config/database.go`ï¼Œ[è¯¦æƒ…](https://github.com/goravel/goravel/blob/v1.9.x/config/database.go)ã€‚

### è‡ªå®šä¹‰ .env è·¯å¾„

ç‰ˆæœ¬ï¼šv1.9.0

```
// å¼€å‘ç¯å¢ƒ
go run . --env=../.env

// ç¼–è¯‘å
./main --env=../.env
```

### ç¼“å­˜æ·»åŠ å†…å­˜é©±åŠ¨

ç‰ˆæœ¬ï¼šv1.9.0

`config/cache.go` æ·»åŠ  `memory` é…ç½®ï¼š

```
"stores": map[string]any{
  // æ–°å¢
  "memory": map[string]any{
    "driver": "memory",
  },
},
```

[è¯¦æƒ…](https://github.com/goravel/goravel/blob/v1.9.x/config/cache.go)

### Orm æ·»åŠ  Paginate æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.9.0

`facades.Orm` æ·»åŠ  `Paginate` æ–¹æ³•ï¼Œ[è¯¦æƒ…](../orm/getting-started#Paginate)ã€‚

### æ·»åŠ  make å‘½ä»¤

ç‰ˆæœ¬ï¼šv1.9.0

```
// åˆ›å»ºæ§åˆ¶å™¨
go run . artisan make:controller UserController

// åˆ›å»ºä¸­é—´ä»¶
go run . artisan make:middleware Cors

// åˆ›å»ºæ¨¡å‹
go run . artisan make:model User
```

### ä¸º Response æ·»åŠ æ–°æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.9.0

| æ–¹æ³•       | æ“ä½œ                                        |
| -------- | ----------------------------------------- |
| Data     | [è‡ªå®šä¹‰è¿”å›](../basic/responses#custom-return) |
| Redirect | [é‡å®šå‘](../basic/responses#redirect)        |

### ä¸ºè¯·æ±‚çš„PrepareForValidationæ–¹æ³•æ·»åŠ è¿”å›å€¼

ç‰ˆæœ¬ï¼šv1.9.0

å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨[éªŒè¯ä¸­çš„PrepareForValidationæ–¹æ³•](../basic/validation#format-data-before-validation)ï¼Œ
è¯·æ·»åŠ ä¸€ä¸ªè¿”å›å€¼ï¼š`PrepareForValidation(data validation.Data) error`ã€‚

### æ–‡ä»¶è·å–åˆ°é”™è¯¯çš„æ–‡ä»¶ç±»å‹

ç‰ˆæœ¬ï¼šv1.9.0

ä¿®å¤`.docx`ã€`.xlsx`ç­‰è¢«é”™è¯¯è¯†åˆ«ä¸º`.zip`çš„é—®é¢˜ã€‚

### ä¿®å¤make:eventå’Œmake:listenerå‘½ä»¤çš„æ¨¡æ¿é”™è¯¯

ç‰ˆæœ¬ï¼šv1.9.0

`import "github.com/goravel/framework/contracts/events"` æ”¹ä¸º `import "github.com/goravel/framework/contracts/event"`

### ä¿®å¤æŸäº›ç±»å‹åœ¨ä¿å­˜æ–‡ä»¶æ—¶æ— æ³•è·å–åç¼€çš„é—®é¢˜

ç‰ˆæœ¬ï¼šv1.9.1

æŸäº›ç±»å‹æ— æ³•é€šè¿‡ä»¥ä¸‹ä»£ç è·å–åç¼€ï¼š

```go
file, err := ctx.Request().File()   
file.Store("upload")
```
