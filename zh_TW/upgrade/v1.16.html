<!DOCTYPE html>
<html lang="zh-TW" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>從 v1.15 升級到 v1.16 | Goravel</title>
    <meta name="description" content="Goravel 是一個功能完整且可擴展性極強的 Web 應用程序框架。作為一個起始腳手架，幫助 Gopher 快速構建自己的應用程序。">
    <meta name="generator" content="VitePress v2.0.0-alpha.4">
    <link rel="preload stylesheet" href="/assets/style.SY_qOvSh.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.f2e7c382.js"></script>
    <script type="module" src="/assets/app.Dz5T6ddl.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.QUpL7I0k.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CFMQV-X7.js">
    <link rel="modulepreload" href="/assets/zh_TW_upgrade_v1.16.md.Dw-fbyc5.lean.js">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HJQNEG5H69"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HJQNEG5H69");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6d6bd506><!--[--><!--]--><!--[--><span tabindex="-1" data-v-333ac9e3></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-333ac9e3>跳轉到內容</a><!--]--><!----><header class="VPNav" data-v-6d6bd506 data-v-f962ce96><div class="VPNavBar" data-v-f962ce96 data-v-d51ec76f><div class="wrapper" data-v-d51ec76f><div class="container" data-v-d51ec76f><div class="title" data-v-d51ec76f><div class="VPNavBarTitle has-sidebar" data-v-d51ec76f data-v-785ec13f><a class="title" href="/zh_TW/" data-v-785ec13f><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-cb6a40a9><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-d51ec76f><div class="content-body" data-v-d51ec76f><!--[--><!--]--><div class="VPNavBarSearch search" data-v-d51ec76f><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜尋檔案</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d51ec76f data-v-d968f6b6><span id="main-nav-aria-label" class="visually-hidden" data-v-d968f6b6> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zh_TW/getting-started/installation.html" tabindex="0" data-v-d968f6b6 data-v-1833877b><!--[--><span data-v-1833877b>快速開始</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://space.bilibili.com/1886603340/channel/seriesdetail?sid=4302621&amp;ctype=0" target="_blank" rel="noreferrer" tabindex="0" data-v-d968f6b6 data-v-1833877b><!--[--><span data-v-1833877b>視頻教程</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zh_TW/getting-started/contributions.html#%E6%96%B0%E5%A2%9E%E8%AA%9E%E8%A8%80" tabindex="0" data-v-d968f6b6 data-v-1833877b><!--[--><span data-v-1833877b>翻譯</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-d51ec76f data-v-db588f7f data-v-32fb9f2f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="切換語言" data-v-32fb9f2f><span class="text" data-v-32fb9f2f><span class="vpi-languages option-icon" data-v-32fb9f2f></span><!----><span class="vpi-chevron-down text-icon" data-v-32fb9f2f></span></span></button><div class="menu" data-v-32fb9f2f><div class="VPMenu" data-v-32fb9f2f data-v-de6964af><!----><!--[--><!--[--><div class="items" data-v-db588f7f><p class="title" data-v-db588f7f>繁體中文</p><!--[--><div class="VPMenuLink" data-v-db588f7f data-v-00af6738><a class="VPLink link" href="/upgrade/v1.16.html" data-v-00af6738><!--[--><span data-v-00af6738>English</span><!--]--></a></div><div class="VPMenuLink" data-v-db588f7f data-v-00af6738><a class="VPLink link" href="/zh_CN/upgrade/v1.16.html" data-v-00af6738><!--[--><span data-v-00af6738>简体中文</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-d51ec76f data-v-b02e1af6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-b02e1af6 data-v-f6092fbf data-v-bc410495><span class="check" data-v-bc410495><span class="icon" data-v-bc410495><!--[--><span class="vpi-sun sun" data-v-f6092fbf></span><span class="vpi-moon moon" data-v-f6092fbf></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d51ec76f data-v-0d1c8122 data-v-f5bbba7e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/goravel/goravel" aria-label="github" target="_blank" rel="noopener" data-v-f5bbba7e data-v-46233840><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://discord.gg/cFc5csczzS" aria-label="discord" target="_blank" rel="noopener" data-v-f5bbba7e data-v-46233840><span class="vpi-social-discord"></span></a><a class="VPSocialLink no-icon" href="https://x.com/goravelgolang" aria-label="x" target="_blank" rel="noopener" data-v-f5bbba7e data-v-46233840><span class="vpi-social-x"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d51ec76f data-v-b5430ab9 data-v-32fb9f2f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-32fb9f2f><span class="vpi-more-horizontal icon" data-v-32fb9f2f></span></button><div class="menu" data-v-32fb9f2f><div class="VPMenu" data-v-32fb9f2f data-v-de6964af><!----><!--[--><!--[--><div class="group translations" data-v-b5430ab9><p class="trans-title" data-v-b5430ab9>繁體中文</p><!--[--><div class="VPMenuLink" data-v-b5430ab9 data-v-00af6738><a class="VPLink link" href="/upgrade/v1.16.html" data-v-00af6738><!--[--><span data-v-00af6738>English</span><!--]--></a></div><div class="VPMenuLink" data-v-b5430ab9 data-v-00af6738><a class="VPLink link" href="/zh_CN/upgrade/v1.16.html" data-v-00af6738><!--[--><span data-v-00af6738>简体中文</span><!--]--></a></div><!--]--></div><div class="group" data-v-b5430ab9><div class="item appearance" data-v-b5430ab9><p class="label" data-v-b5430ab9>主題</p><div class="appearance-action" data-v-b5430ab9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-b5430ab9 data-v-f6092fbf data-v-bc410495><span class="check" data-v-bc410495><span class="icon" data-v-bc410495><!--[--><span class="vpi-sun sun" data-v-f6092fbf></span><span class="vpi-moon moon" data-v-f6092fbf></span><!--]--></span></span></button></div></div></div><div class="group" data-v-b5430ab9><div class="item social-links" data-v-b5430ab9><div class="VPSocialLinks social-links-list" data-v-b5430ab9 data-v-f5bbba7e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/goravel/goravel" aria-label="github" target="_blank" rel="noopener" data-v-f5bbba7e data-v-46233840><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://discord.gg/cFc5csczzS" aria-label="discord" target="_blank" rel="noopener" data-v-f5bbba7e data-v-46233840><span class="vpi-social-discord"></span></a><a class="VPSocialLink no-icon" href="https://x.com/goravelgolang" aria-label="x" target="_blank" rel="noopener" data-v-f5bbba7e data-v-46233840><span class="vpi-social-x"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d51ec76f data-v-3b6fb606><span class="container" data-v-3b6fb606><span class="top" data-v-3b6fb606></span><span class="middle" data-v-3b6fb606></span><span class="bottom" data-v-3b6fb606></span></span></button></div></div></div></div><div class="divider" data-v-d51ec76f><div class="divider-line" data-v-d51ec76f></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-6d6bd506 data-v-8868f59d><div class="container" data-v-8868f59d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8868f59d><span class="vpi-align-left menu-icon" data-v-8868f59d></span><span class="menu-text" data-v-8868f59d>菜單</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-8868f59d data-v-b36c5d28><button data-v-b36c5d28>回到頂部</button><!----></div></div></div><aside class="VPSidebar" data-v-6d6bd506 data-v-be6c243f><div class="curtain" data-v-be6c243f></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-be6c243f><span class="visually-hidden" id="sidebar-aria-label" data-v-be6c243f> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>快速開始</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/installation.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>安裝</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/configuration.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/directory-structure.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>目錄結構</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/compile.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>編譯</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/releases.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>發行說明</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/contributions.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>貢獻指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/packages.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>優秀擴展包</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/getting-started/privacy.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>隱私政策</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0 has-active" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>升級</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/upgrade/v1.16.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>從 v1.15 升級到 v1.16</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/upgrade/v1.15.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>從 v1.14 升級到 v1.15</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/upgrade/history.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>歷史</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>架構概念</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/architecture-concepts/request-lifecycle.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>生命週期</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/architecture-concepts/service-container.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>服務容器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/architecture-concepts/service-providers.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>服務提供者</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/architecture-concepts/facades.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>門面</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>基本功能</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/routing.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>路由</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/middleware.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>中間件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/controllers.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>控制器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/request.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>請求</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/response.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>響應</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/views.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>視圖</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/grpc.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>Grpc</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/session.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>會話</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/validation.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>驗證</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/the-basics/logging.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>日誌</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>深入挖掘</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/artisan-console.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>Artisan 主控台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/cache.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>快取</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/event.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/filesystem.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>文件存儲</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/mail.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>郵件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/queues.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>隊列</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/task-scheduling.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>任務調度</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/localization.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>本地化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/package-development.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>包開發</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/color.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>彩色輸出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/strings.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>字符串</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/helpers.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>輔助函數</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/digging-deeper/http-client.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>HTTP 客戶端</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>安全</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/security/authentication.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>身份驗證</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/security/authorization.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>授權</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/security/encryption.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>加密</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/security/hashing.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>哈希</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>數據庫</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/database/getting-started.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>快速入門</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/database/queries.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>查詢構建器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/database/migrations.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>遷移</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/database/seeding.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>填充</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>ORM</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/orm/getting-started.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>快速入門</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/orm/relationships.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>關係</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/orm/factories.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>工廠</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-785c71f3><section class="VPSidebarItem level-0" data-v-785c71f3 data-v-687e6ffa><div class="item" role="button" tabindex="0" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><h2 class="text" data-v-687e6ffa>測試</h2><!----></div><div class="items" data-v-687e6ffa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/testing/getting-started.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>快速入門</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/testing/http-tests.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>HTTP 測試</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-687e6ffa data-v-687e6ffa><div class="item" data-v-687e6ffa><div class="indicator" data-v-687e6ffa></div><a class="VPLink link link" href="/zh_TW/testing/mock.html" data-v-687e6ffa><!--[--><p class="text" data-v-687e6ffa>模擬</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6d6bd506 data-v-95f78ad9><div class="VPDoc has-sidebar has-aside" data-v-95f78ad9 data-v-d3be2d93><!--[--><!--]--><div class="container" data-v-d3be2d93><div class="aside" data-v-d3be2d93><div class="aside-curtain" data-v-d3be2d93></div><div class="aside-container" data-v-d3be2d93><div class="aside-content" data-v-d3be2d93><div class="VPDocAside" data-v-d3be2d93 data-v-6e9cb4e7><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6e9cb4e7 data-v-3473656f><div class="content" data-v-3473656f><div class="outline-marker" data-v-3473656f></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-3473656f>頁面導航</div><ul class="VPDocOutlineItem root" data-v-3473656f data-v-5ead4e78><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6e9cb4e7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d3be2d93><div class="content-container" data-v-d3be2d93><!--[--><!--]--><main class="main" data-v-d3be2d93><div style="position:relative;" class="vp-doc _zh_TW_upgrade_v1_16" data-v-d3be2d93><div><h1 id="從-v1-15-升級到-v1-16" tabindex="-1">從 v1.15 升級到 v1.16 <a class="header-anchor" href="#從-v1-15-升級到-v1-16" aria-label="Permalink to “從 v1.15 升級到 v1.16”">​</a></h1><h2 id="令人興奮的新功能-🎉" tabindex="-1">令人興奮的新功能 🎉 <a class="header-anchor" href="#令人興奮的新功能-🎉" aria-label="Permalink to “令人興奮的新功能 🎉”">​</a></h2><ul><li><a href="#新增-facades-db">新增 facades.DB()</a></li><li><a href="#新增-facades-http">新增 facades.Http()</a></li><li><a href="#重構-facades-queue">重構 facades.Queue()</a></li><li><a href="#facades-auth-支援自定義驅動">facades.Auth() 支援自定義驅動</a></li><li><a href="#make-命令支援自動註冊">make:* 命令支援自動註冊</a></li><li><a href="#goravel-installer-支援選擇驅動">Goravel Installer 支援選擇驅動</a></li></ul><h2 id="功能增強-🚀" tabindex="-1">功能增強 🚀 <a class="header-anchor" href="#功能增強-🚀" aria-label="Permalink to “功能增強 🚀”">​</a></h2><ul><li><a href="#拆分資料庫驅動">拆分資料庫驅動</a></li><li><a href="#orm-新增特性">Orm 新增特性</a></li><li><a href="#支援根據資料表創建-model">支援根據資料表創建 Model</a></li><li><a href="#支援運行時動態-sql-語句">支援運行時動態 SQL 語句</a></li><li><a href="#migration-新增特性">Migration 新增特性</a></li><li><a href="#grpc-新增-shutdown-方法">Grpc 新增 Shutdown 方法</a></li><li><a href="#artisan-新增禁用列印顏色選項">Artisan 新增禁用列印顏色選項</a></li><li><a href="#加解密-env-檔案">加解密 env 檔案</a></li><li><a href="#發送郵件支援設置-header">發送郵件支援設置 Header</a></li><li><a href="#installer-支援自我升級">Installer 支援自我升級</a></li><li><a href="#多語言支援-embed-加載">多語言支援嵌入加載</a></li><li><a href="#schedule-新增特性">排程新增特性</a></li><li><a href="#request-新增特性">請求新增特性</a></li><li><a href="#route-新增特性">路由新增特性</a></li><li><a href="#testing-支援建立-cache-影像">測試支援建立快取影像</a></li><li><a href="#不同-jwt-guard-支援不同配置">不同 JWT Guard 支援不同配置</a></li><li><a href="#註冊-serviceprovider-不再依賴順序">ServiceProvider 不再依賴順序</a></li></ul><h2 id="破壞性變化-🛠" tabindex="-1">破壞性變化 🛠 <a class="header-anchor" href="#破壞性變化-🛠" aria-label="Permalink to “破壞性變化 🛠”">​</a></h2><ul><li><a href="#移除-sql-迁移">移除 SQL 迁移</a></li><li><a href="#優化-config-模組方法預設值類型">優化 Config 模組方法預設值類型</a></li><li><a href="#優化-orm-方法">優化 Orm 方法</a></li><li><a href="#優化-path-方法">優化 Path 方法</a></li><li><a href="#優化-request-方法">優化 Request 方法</a></li><li><a href="#優化-console-confirm-方法">優化 console Confirm 方法</a></li><li><a href="#優化-session-自定義驅動方式">優化 Session 自定義驅動方式</a></li><li><a href="#優化-testing-request-方法">優化 Testing.Request 方法</a></li><li><a href="#優化-carbon-方法">優化 Carbon 方法</a></li><li><a href="#優化-str-snake-方法">優化 str.Snake 方法</a></li><li><a href="#goravelcloudinary-停止維護">goravel/cloudinary 停止維護</a></li></ul><h2 id="v1-16-1" tabindex="-1">v1.16.1 <a class="header-anchor" href="#v1-16-1" aria-label="Permalink to “v1.16.1”">​</a></h2><ul><li><a href="#fix-bcc-and-cc-cannot-be-set-expectly-when-sending-mail">修正寄送郵件時無法設定密件副本和副本的問題</a></li><li><a href="#fix-sending-mail-via-queue-returns-incorrect-error">修正透過佇列傳送郵件傳回不正確的錯誤</a></li><li><a href="#fix-the-orm-create-events-can-be-triggered-when-creating-multiple-records">修正建立多個記錄時觸發 orm create 事件的問題</a></li><li><a href="#fix-the-make-package-command-generates-incorrect-code">修正 make:package 指令產生錯誤代碼的問題</a></li><li><a href="#fix-the-path-is-incorrect-when-publishing-package-files">修正發布套件檔案時路徑不正確的問題</a></li></ul><h2 id="v1-16-3" tabindex="-1">v1.16.3 <a class="header-anchor" href="#v1-16-3" aria-label="Permalink to “v1.16.3”">​</a></h2><ul><li><a href="#fix-transaction-does-not-rollback-when-panic-in-closure">修復交易在閉包發生 panic 時不回滾的問題</a></li><li><a href="#fix-errors-if-adding-or-removing-a-column-with-a-separate-migration-script">修正使用單獨的遷移腳本新增或刪除列時的錯誤</a></li><li><a href="#fix-the-breaking-change-of-orm-select-method">修正 Orm Select 方法的破壞性變更</a></li></ul><h2 id="v1-16-4" tabindex="-1">v1.16.4 <a class="header-anchor" href="#v1-16-4" aria-label="Permalink to “v1.16.4”">​</a></h2><ul><li><a href="#fix-commands-cannot-be-run-concurrently">Fix commands cannot be run concurrently</a></li></ul><h2 id="升級指南" tabindex="-1">升級指南 <a class="header-anchor" href="#升級指南" aria-label="Permalink to “升級指南”">​</a></h2><p>隨著 <a href="https://endoflife.date/go" target="_blank" rel="noreferrer">Golang v1.22 不再被維護</a>，Goravel v1.16 預設支援的 Golang 版本已從 1.22 升級為 1.23.</p><p>goravel/example 項目由 v1.15 升級到 v1.16 PR 可作為升級參考：<a href="https://github.com/goravel/example/pull/68" target="_blank" rel="noreferrer">goravel/example#68</a>.</p><h3 id="_1-更新依賴" tabindex="-1">1. 更新依賴 <a class="header-anchor" href="#_1-更新依賴" aria-label="Permalink to “1. 更新依賴”">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/framework@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/gin@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fiber</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/fiber@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/redis@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> S3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/s3@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oss</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/oss@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cos</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/cos@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/minio@latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tidy</span></span></code></pre></div><h3 id="_2-修改資料庫配置" tabindex="-1">2. 修改資料庫配置 <a class="header-anchor" href="#_2-修改資料庫配置" aria-label="Permalink to “2. 修改資料庫配置”">​</a></h3><p>刪除資料庫配置檔中的 <code>connections</code>，並安裝需要的資料庫驅動。</p><p>例如，Postgres:</p><ol><li>安裝驅動包</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/goravel/postgres</span></span></code></pre></div><ol start="2"><li>將 <code>postgres.ServiceProvider</code> 添加到 <code>config/app.go</code> 文件中</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// config/app.go</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/postgres</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;providers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postgres</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><ol start="3"><li>修改 <code>config/database.go</code> 檔案中的設定</li></ol><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/database.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	&quot;github.com/goravel/framework/contracts/database/driver&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	postgresfacades &quot;github.com/goravel/postgres/facades&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;connections&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;postgres&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;via&quot;: func() (driver.Driver, error) {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++      return postgresfacades.Postgres(&quot;postgres&quot;)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h3 id="_3-修改-auth-go-配置檔案" tabindex="-1">3. 修改 auth.go 配置檔案 <a class="header-anchor" href="#_3-修改-auth-go-配置檔案" aria-label="Permalink to “3. 修改 auth.go 配置檔案”">​</a></h3><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/auth.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// 支援: &quot;jwt&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;guards&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;user&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;driver&quot;:   &quot;jwt&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;provider&quot;: &quot;user&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ // 支援: &quot;orm&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ &quot;providers&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;user&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++     &quot;driver&quot;: &quot;orm&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   },</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ },</span></span></code></pre></div><h3 id="_4-修改-session-go-配置檔案" tabindex="-1">4. 修改 session.go 配置檔案 <a class="header-anchor" href="#_4-修改-session-go-配置檔案" aria-label="Permalink to “4. 修改 session.go 配置檔案”">​</a></h3><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/session.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- &quot;driver&quot;: config.Env(&quot;SESSION_DRIVER&quot;, &quot;file&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ &quot;default&quot;: config.Env(&quot;SESSION_DRIVER&quot;, &quot;file&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ &quot;drivers&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;file&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++     &quot;driver&quot;: &quot;file&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   },</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ },</span></span></code></pre></div><h3 id="_5-修改-queue-go-配置檔案" tabindex="-1">5. 修改 queue.go 配置檔案 <a class="header-anchor" href="#_5-修改-queue-go-配置檔案" aria-label="Permalink to “5. 修改 queue.go 配置檔案”">​</a></h3><ul><li><p>如果正在使用 Queue 模組的 Redis 驅動，需相應修改：<a href="#優化-queue-配置">優化 Queue 配置</a>。</p></li><li><p>如果沒有使用或想要以後使用 database 驅動，需修改 <code>config/queue.go</code> 檔案中的配置：</p></li></ul><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/queue.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;"> // 驅動: &quot;sync&quot;, &quot;redis&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ // 驅動: &quot;sync&quot;, &quot;database&quot;, &quot;custom&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;connections&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;sync&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;driver&quot;: &quot;sync&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--  &quot;redis&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--    &quot;driver&quot;:     &quot;redis&quot;,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--    &quot;connection&quot;: &quot;default&quot;,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--    &quot;queue&quot;:      config.Env(&quot;REDIS_QUEUE&quot;, &quot;default&quot;),</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--  },</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  &quot;database&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;driver&quot;:     &quot;database&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;connection&quot;: &quot;postgres&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;queue&quot;:      &quot;default&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;concurrent&quot;: 1,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ &quot;failed&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  &quot;database&quot;: config.Env(&quot;DB_CONNECTION&quot;, &quot;postgres&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  &quot;table&quot;:    &quot;failed_jobs&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ },</span></span></code></pre></div><p>添加資料庫驅動所需的遷移檔案：<a href="https://github.com/goravel/goravel/blob/master/database/migrations/20210101000002_create_jobs_table.go" target="_blank" rel="noreferrer">database/migrations/20210101000002_create_jobs_table.go</a>，並在 <code>database/kernel.go</code> 文件中註冊該遷移檔案。</p><h3 id="_6-如果需要使用-http-客戶端" tabindex="-1">6. 如果需要使用 HTTP 客戶端 <a class="header-anchor" href="#_6-如果需要使用-http-客戶端" aria-label="Permalink to “6. 如果需要使用 HTTP 客戶端”">​</a></h3><p>在 <code>config/http.go</code> 檔案中添加 HTTP 客戶端配置項:</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/http.go</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ &quot;client&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;base_url&quot;:                config.GetString(&quot;HTTP_CLIENT_BASE_URL&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;timeout&quot;:                 config.GetDuration(&quot;HTTP_CLIENT_TIMEOUT&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;max_idle_conns&quot;:          config.GetInt(&quot;HTTP_CLIENT_MAX_IDLE_CONNS&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;max_idle_conns_per_host&quot;: config.GetInt(&quot;HTTP_CLIENT_MAX_IDLE_CONNS_PER_HOST&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;max_conns_per_host&quot;:      config.GetInt(&quot;HTTP_CLIENT_MAX_CONN_PER_HOST&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++   &quot;idle_conn_timeout&quot;:       config.GetDuration(&quot;HTTP_CLIENT_IDLE_CONN_TIMEOUT&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ },</span></span></code></pre></div><h3 id="_7-如果使用-goravel-redis-驅動" tabindex="-1">7. 如果使用 goravel/redis 驅動 <a class="header-anchor" href="#_7-如果使用-goravel-redis-驅動" aria-label="Permalink to “7. 如果使用 goravel/redis 驅動”">​</a></h3><p>需修改 <code>config/cache.go</code> 檔案中的配置：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/cache.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;redis&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;driver&quot;:     &quot;custom&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;connection&quot;: &quot;default&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;via&quot;: func() (cache.Driver, error) {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--  return redisfacades.Redis(&quot;redis&quot;), nil</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  return redisfacades.Cache(&quot;redis&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h3 id="_8-如果使用-carbon-datetime-等方法" tabindex="-1">8. 如果使用 carbon.DateTime 等方法 <a class="header-anchor" href="#_8-如果使用-carbon-datetime-等方法" aria-label="Permalink to “8. 如果使用 carbon.DateTime 等方法”">​</a></h3><p>需相應修改：<a href="#優化-carbon-方法">優化 Carbon 方法</a></p><h3 id="_9-如果正在使用-session-自定義驅動" tabindex="-1">9. 如果正在使用 session 自定義驅動 <a class="header-anchor" href="#_9-如果正在使用-session-自定義驅動" aria-label="Permalink to “9. 如果正在使用 session 自定義驅動”">​</a></h3><p>需相應修改：<a href="#優化-session-自定義驅動">優化 Session 自定義驅動</a></p><h3 id="_10-如果正在使用-facades-config-中的方法" tabindex="-1">10. 如果正在使用 facades.Config() 中的方法 <a class="header-anchor" href="#_10-如果正在使用-facades-config-中的方法" aria-label="Permalink to “10. 如果正在使用 facades.Config() 中的方法”">​</a></h3><p>需相应修改：<a href="#modify-config-module-methods-default-value-type">修改 Config 模块方法默认值类型</a></p><h3 id="_11-如果正在使用-sql-資料遷移" tabindex="-1">11. 如果正在使用 SQL 資料遷移 <a class="header-anchor" href="#_11-如果正在使用-sql-資料遷移" aria-label="Permalink to “11. 如果正在使用 SQL 資料遷移”">​</a></h3><p>需相應修改：<a href="#remove-sql-migration">移除 SQL 迁移</a></p><h3 id="_12-如果正在使用-orm" tabindex="-1">12. 如果正在使用 Orm <a class="header-anchor" href="#_12-如果正在使用-orm" aria-label="Permalink to “12. 如果正在使用 Orm”">​</a></h3><p>需相應修改：<a href="#optimize-orm-methods">優化 Orm 方法</a></p><h3 id="_13-如果正在使用-path-方法" tabindex="-1">13. 如果正在使用 Path 方法 <a class="header-anchor" href="#_13-如果正在使用-path-方法" aria-label="Permalink to “13. 如果正在使用 Path 方法”">​</a></h3><p><code>path</code> 方法返回絕對路徑，如果正在使用，需檢查是否需要修改：<a href="#optimize-path-method">優化 Path 方法</a></p><h3 id="_14-如果正在使用-ctx-request-inputmap-方法" tabindex="-1">14. 如果正在使用 <code>ctx.Request().InputMap</code> 方法 <a class="header-anchor" href="#_14-如果正在使用-ctx-request-inputmap-方法" aria-label="Permalink to “14. 如果正在使用 ctx.Request().InputMap 方法”">​</a></h3><p>需相應修改：<a href="#optimize-request-method">優化 Request 方法</a></p><h3 id="_15-如果正在使用-console-confirm-方法" tabindex="-1">15. 如果正在使用 <code>console.Confirm</code> 方法 <a class="header-anchor" href="#_15-如果正在使用-console-confirm-方法" aria-label="Permalink to “15. 如果正在使用 console.Confirm 方法”">​</a></h3><p>需相應修改：<a href="#optimize-console-confirm-method">優化 console Confirm 方法</a></p><h3 id="_16-如果正在使用-testing-request-方法" tabindex="-1">16. 如果正在使用 Testing.Request 方法 <a class="header-anchor" href="#_16-如果正在使用-testing-request-方法" aria-label="Permalink to “16. 如果正在使用 Testing.Request 方法”">​</a></h3><p>需相應修改：<a href="#optimize-testing-request-method">優化 Testing.Request 方法</a></p><h2 id="功能介紹" tabindex="-1">功能介紹 <a class="header-anchor" href="#功能介紹" aria-label="Permalink to “功能介紹”">​</a></h2><h3 id="新增-facades-db" tabindex="-1">新增 facades.DB() <a class="header-anchor" href="#新增-facades-db" aria-label="Permalink to “新增 facades.DB()”">​</a></h3><p>新增 <code>facades.DB()</code> 模組，方便進行資料庫的原生操作，比 ORM 速度更快。</p><p><a href="./../database/getting-started.html">查看文檔</a></p><h3 id="新增-facades-http" tabindex="-1">新增 facades.Http() <a class="header-anchor" href="#新增-facades-http" aria-label="Permalink to “新增 facades.Http()”">​</a></h3><p>新增 <code>facades.Http()</code> 模組，方便進行 HTTP 操作。</p><p><a href="./../digging-deeper/http-client.html">查看文檔</a></p><h3 id="重構-facades-queue" tabindex="-1">重構 facades.Queue() <a class="header-anchor" href="#重構-facades-queue" aria-label="Permalink to “重構 facades.Queue()”">​</a></h3><ul><li><p>在 v1.15 之前，Queue 僅支持同步與 Redis 驅動，從 v1.16 開始，支持資料庫與自定義驅動。</p></li><li><p>新增 <code>jobs</code> 和 <code>failed_jobs</code> 表，用於存儲任務及失敗任務。</p></li><li><p>新增 <code>queue:retry</code> 命令，用於重試失敗的任務。</p></li><li><p>新增 <code>queue:failed</code> 命令，用於查看失敗任務。</p></li><li><p>支持在啟動隊列任務時設置重試次數。</p></li></ul><p>詳情請 <a href="./../digging-deeper/queues.html">查看文檔</a></p><h3 id="facades-auth-支持自訂驅動" tabindex="-1">facades.Auth() 支持自訂驅動 <a class="header-anchor" href="#facades-auth-支持自訂驅動" aria-label="Permalink to “facades.Auth() 支持自訂驅動”">​</a></h3><p>在 v1.15 之前，Auth 只支持 JWT 驅動，從 v1.16 開始支持 Session 和自定義驅動，請 <a href="./../security/authentication.html#custom-driver">查看文檔</a>。</p><h3 id="make-命令支持自動註冊" tabindex="-1">make:* 命令支持自動註冊 <a class="header-anchor" href="#make-命令支持自動註冊" aria-label="Permalink to “make:* 命令支持自動註冊”">​</a></h3><p><code>make:migration</code> 和 <code>make:seeder</code> 等命令生成的檔案將在生成後自動註冊到框架中，不再需要像以前那樣手動註冊。</p><h3 id="goravel-installer-支持選擇驅動" tabindex="-1">Goravel Installer 支持選擇驅動 <a class="header-anchor" href="#goravel-installer-支持選擇驅動" aria-label="Permalink to “Goravel Installer 支持選擇驅動”">​</a></h3><p>使用 Goravel Installer 安裝新專案時，可以選擇不同的驅動，例如：可以選擇安裝 goravel/gin 或 goravel/fiber 等。</p><h3 id="拆分資料庫驅動" tabindex="-1">拆分資料庫驅動 <a class="header-anchor" href="#拆分資料庫驅動" aria-label="Permalink to “拆分資料庫驅動”">​</a></h3><p>之前多個資料庫驅動集成在框架中，增加了軟體包的大小。 從 v1.16 開始，資料庫驅動將作為獨立包存在，所以只需安裝所需的資料庫驅動。</p><table tabindex="0"><thead><tr><th>資料庫類型</th><th>驅動包</th></tr></thead><tbody><tr><td>Postgres</td><td><a href="https://github.com/goravel/postgres" target="_blank" rel="noreferrer">github.com/goravel/postgres</a></td></tr><tr><td>facades.Orm().Connection(&quot;mysql&quot;)</td><td><a href="https://github.com/goravel/mysql" target="_blank" rel="noreferrer">github.com/goravel/mysql</a></td></tr><tr><td>Sqlserver</td><td><a href="https://github.com/goravel/sqlserver" target="_blank" rel="noreferrer">github.com/goravel/sqlserver</a></td></tr><tr><td>ToRawSql</td><td><a href="https://github.com/goravel/sqlite" target="_blank" rel="noreferrer">github.com/goravel/sqlite</a></td></tr></tbody></table><h3 id="orm-新增特性" tabindex="-1">Orm 新增特性 <a class="header-anchor" href="#orm-新增特性" aria-label="Permalink to “Orm 新增特性”">​</a></h3><ul><li><p>支持查詢 JSON 字段，<a href="./../orm/getting-started.html#where">查看文檔</a>。</p></li><li><p>支持更新 JSON 字段，<a href="./../orm/getting-started.html#update-json-fields">查看文檔</a>。</p></li><li><p>模型支持設置 <code>GlobalScope</code> 方法，該方法限制查詢、更新和刪除操作的範圍：</p></li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/goravel/framework/contracts/orm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GlobalScopes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">query</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;goravel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="支持根據資料表創建-model" tabindex="-1">支持根據資料表創建 Model <a class="header-anchor" href="#支持根據資料表創建-model" aria-label="Permalink to “支持根據資料表創建 Model”">​</a></h3><p><code>make:model</code> 命令增加 <code>--table</code> 選項，用於根據資料表創建 Model：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make:model</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=users</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> User</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 如果模型已存在，您可以使用</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 選項強制覆蓋</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make:model</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=users</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> User</span></span></code></pre></div><h3 id="支持運行時動態-sql-語句" tabindex="-1">支持運行時動態 SQL 語句 <a class="header-anchor" href="#支持運行時動態-sql-語句" aria-label="Permalink to “支持運行時動態 SQL 語句”">​</a></h3><p>新增 <code>EnableQueryLog</code> 方法，用於啟用查詢日誌：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EnableQueryLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">queryLogs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetQueryLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DisableQueryLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span></code></pre></div><h3 id="migration-新增特性" tabindex="-1">Migration 新增特性 <a class="header-anchor" href="#migration-新增特性" aria-label="Permalink to “Migration 新增特性”">​</a></h3><ul><li>新增 <code>Change</code> 方法以修改表結構(適用於 Postgres, MySQL, Sqlserver)：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><ul><li>新增 <code>RenameColumn</code> 方法，用於重命名表的列：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RenameColumn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;old_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li>新增 <code>Comment</code> 方法，用於向表添加註釋（適用於 Postgres, MySQL）：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li>新增 <code>First</code> 方法，用於將欄位設置為表的第一個欄位（適用於 MySQL）：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">First</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><ul><li>新增 <code>After</code> 方法，用於將欄位設置為表的最後一個欄位（適用於 MySQL）：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">After</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li>新增 <code>Morphs</code>, <code>NullableMorphs</code>, <code>NumericMorphs</code>, <code>UuidMorphs</code>, <code>UlidMorphs</code> 方法，用於創建多態關聯欄位：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Morphs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;morphable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// morphable_type, morphable_id</span></span></code></pre></div><ul><li>新增 <code>Uuid</code>, <code>Ulid</code> 方法，用於創建 UUID 和 ULID 欄位：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Uuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ulid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ulid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li>新增 <code>GeneratedAs</code> 和 <code>Always</code> 方法，用於創建生成列（僅限 PostgreSQL）：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">table.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GeneratedAs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Always</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="grpc-新增-shutdown-方法" tabindex="-1">Grpc 新增 Shutdown 方法 <a class="header-anchor" href="#grpc-新增-shutdown-方法" aria-label="Permalink to “Grpc 新增 Shutdown 方法”">​</a></h3><p>新增 <code>Shutdown</code> 方法用於優雅地關閉 Grpc，<a href="./../the-basics/grpc.html#shutdown-grpc">查看文檔</a>。</p><h3 id="artisan-新增禁用輸出顏色選項" tabindex="-1">Artisan 新增禁用輸出顏色選項 <a class="header-anchor" href="#artisan-新增禁用輸出顏色選項" aria-label="Permalink to “Artisan 新增禁用輸出顏色選項”">​</a></h3><p>一些命令默認會列印顏色，例如 <code>list</code> 命令。 然而，在某些終端或日誌中，顏色值可能會亂碼。 一些命令默認會列印顏色，例如 <code>list</code> 命令。 然而，在某些終端或日誌中，顏色值可能會亂碼。 你可以使用 <code>--no-ansi</code> 選項禁用列印顏色：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-ansi</span></span></code></pre></div><h3 id="加解密-env-文件" tabindex="-1">加解密 env 文件 <a class="header-anchor" href="#加解密-env-文件" aria-label="Permalink to “加解密 env 文件”">​</a></h3><p>您可能想將生產環境的 env 文件添加到版本控制中，但您不想暴露敏感信息，您可以加解密 env 文件：</p><p><a href="./../getting-started/installation.html#encrypt-and-decrypt-env-file">查看文檔</a></p><h3 id="發送郵件支持設置-header" tabindex="-1">發送郵件支持設置 Header <a class="header-anchor" href="#發送郵件支持設置-header" aria-label="Permalink to “發送郵件支持設置 Header”">​</a></h3><p>新增 <code>Headers</code> 方法，用於設置郵件的 Header。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X-Mailer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Goravel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="installer-支持自升級" tabindex="-1">Installer 支持自升級 <a class="header-anchor" href="#installer-支持自升級" aria-label="Permalink to “Installer 支持自升級”">​</a></h3><p>goravel/installer 新增 <code>upgrade</code> 命令，用於升級 installer 自身：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">goravel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">goravel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1.1</span></span></code></pre></div><h3 id="多語言文件支持-embed-加載" tabindex="-1">多語言文件支持 embed 加載 <a class="header-anchor" href="#多語言文件支持-embed-加載" aria-label="Permalink to “多語言文件支持 embed 加載”">​</a></h3><p>使用嵌入加載時，語言文件將被編譯到二進制文件中，不再需要部署。</p><p><a href="./../digging-deeper/localization.html#embed-loading">查看文檔</a></p><h3 id="schedule-新增特性" tabindex="-1">Schedule 新增特性 <a class="header-anchor" href="#schedule-新增特性" aria-label="Permalink to “Schedule 新增特性”">​</a></h3><ul><li><p>新增 <code>EverySecond</code> 方法等，請 <a href="./../digging-deeper/task-scheduling.html#schedule-frequency-options">查看文檔</a>。</p></li><li><p>新增 <code>schedule:run</code> 命令，用於手動運行任務。</p></li><li><p>新增 <code>schedule:list</code> 方法，用於查看所有任務。</p></li></ul><h3 id="request-新增特性" tabindex="-1">Request 新增特性 <a class="header-anchor" href="#request-新增特性" aria-label="Permalink to “Request 新增特性”">​</a></h3><ul><li>在 v1.15 之前，以下 <code>Request</code> 綁定將報錯，從 v1.16 開始支持綁定多個文件：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StoreMediaRequest</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	Files []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FileHeader</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `form:&quot;files&quot; json:&quot;files&quot;`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>新增 <code>OriginPath</code> 方法，用於獲取原始路由路徑：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OriginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><ul><li>新增 <code>Info</code> 方法，用於獲取路由信息：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><ul><li>新增 <code>Name</code> 方法，用於獲取路由名稱：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><ul><li>當 <code>http.request_timeout</code> 配置項設置為 <code>0</code> 時，請求將不會超時。</li></ul><h3 id="route-新增特性" tabindex="-1">Route 新增特性 <a class="header-anchor" href="#route-新增特性" aria-label="Permalink to “Route 新增特性”">​</a></h3><ul><li>新增 <code>GetRoutes</code> 方法，用於獲取所有路由：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">routes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><ul><li>新增 <code>Name</code> 方法，用於設置路由名稱：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, usersController.Index).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users.index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>然後可以使用 <code>Info</code> 方法獲取路由信息：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">route </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users.index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li>新增 <code>route:list</code> 命令，用於查看所有路由：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route:list</span></span></code></pre></div><h3 id="testing-支持創建-cache-鏡像" tabindex="-1">Testing 支持創建 Cache 鏡像 <a class="header-anchor" href="#testing-支持創建-cache-鏡像" aria-label="Permalink to “Testing 支持創建 Cache 鏡像”">​</a></h3><p>新增 <code>Cache</code> 方法，用於創建 Cache 鏡像：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cache, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Testing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Docker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="不同-jwt-guard-支持不同配置" tabindex="-1">不同 JWT Guard 支持不同配置 <a class="header-anchor" href="#不同-jwt-guard-支持不同配置" aria-label="Permalink to “不同 JWT Guard 支持不同配置”">​</a></h3><p>在 v1.15 之前，JWT Guard 的 <code>ttl</code> 和 <code>secret</code> 配置項是全局配置，從 v1.16 開始，您可以為不同的 JWT Guard 設置不同的 <code>ttl</code> 和 <code>secret</code>，<a href="./../security/authentication.html#different-jwt-guard-supports-different-configurations">查看文檔</a>。</p><h3 id="serviceprovider-不再依賴順序" tabindex="-1">ServiceProvider 不再依賴順序 <a class="header-anchor" href="#serviceprovider-不再依賴順序" aria-label="Permalink to “ServiceProvider 不再依賴順序”">​</a></h3><p>ServiceProvider 新增可選方法 <code>Relationship() binding.Relationship</code>，用於聲明當前 ServicerProvider 的依賴關係，設置了該方法的 ServiceProvider 將不依賴註冊順序，未設置的 ServiceProvider 將被最後註冊，例如：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Relationship</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">binding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Relationship</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> binding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Relationship</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		Bindings: []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			BindingSession,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		Dependencies: []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			binding.Config,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		ProvideFor: []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			binding.Cache,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foundation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span></code></pre></div><h3 id="移除-sql-迁移" tabindex="-1">移除 SQL 迁移 <a class="header-anchor" href="#移除-sql-迁移" aria-label="Permalink to “移除 SQL 迁移”">​</a></h3><p>SQL 遷移已完全移除，請使用 Go 語言遷移。遷移步驟： 遷移步驟：</p><ol><li>移除 <code>config/database.go</code> 中的 <code>migrations.driver</code> 鍵；</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// config/database.go</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sql&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;table&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;migrations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><ol start="2"><li>將 <code>database/migrations</code> 目錄下的 SQL 遷移文件轉換為 Go 語言遷移文件：</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Up 運行遷移。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Up</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({Original SQL})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Down 反轉遷移。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">M20241207095921CreateUsersTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Down</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Schema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({Original SQL})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol start="3"><li>在 <code>database/kernel.go</code> 文件中註冊遷移文件；</li></ol><h3 id="優化-config-模組方法默認值類型" tabindex="-1">優化 Config 模組方法默認值類型 <a class="header-anchor" href="#優化-config-模組方法默認值類型" aria-label="Permalink to “優化 Config 模組方法默認值類型”">​</a></h3><p>之前 <code>GetString</code>、<code>GetInt</code>、<code>GetBool</code> 方法的默認值類型為 <code>any</code>，從 v1.16 開始，默認值類型為 <code>string</code>、<code>int</code>、<code>bool</code>，以保證類型安全。</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- GetString(path string, defaultValue ...any) string</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ GetString(path string, defaultValue ...string) string</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- GetInt(path string, defaultValue ...any) int</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ GetInt(path string, defaultValue ...int) int</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- GetBool(path string, defaultValue ...any) bool</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ GetBool(path string, defaultValue ...bool) bool</span></span></code></pre></div><h3 id="優化-orm-方法" tabindex="-1">優化 Orm 方法 <a class="header-anchor" href="#優化-orm-方法" aria-label="Permalink to “優化 Orm 方法”">​</a></h3><ul><li>優化 <code>Count</code>、<code>Exists</code> 方法的返回值：</li></ul><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- Count(count *int64) error</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ Count() (int64, error)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- Distinct(args ...any) Query</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ Distinct(columns ...string) Query</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- Exists(exists *bool) error</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ Exists() (bool, error)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- Select(query any, args ...any) Query</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ Select(columns ...string) Query</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- Sum(column string, dest any) error</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ Sum(column string) (int64, error)</span></span></code></pre></div><ul><li><code>Where</code> 方法支持閉包：</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">facades.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">query</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">180</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FindOrFail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// SELECT * FROM users WHERE id = 100 AND (height = 180 AND age = 18);</span></span></code></pre></div><h3 id="優化-path-方法" tabindex="-1">優化 Path 方法 <a class="header-anchor" href="#優化-path-方法" aria-label="Permalink to “優化 Path 方法”">​</a></h3><ul><li>新增 <code>Resource</code> 方法</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;views/welcome.tmpl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li>path 方法返回絕對路徑</li></ul><p>之前 path 方法返回的是相對於根目錄的路徑，例如 <code>path.Config(&quot;app.go&quot;) == config/app.go</code>。 從 v1.16 開始，path 方法返回的是絕對路徑，例如 <code>path.Config(&quot;app.go&quot;) == /Users/goravel/workspace/goravel/config/app.go</code>。</p><h3 id="優化-request-方法" tabindex="-1">優化 Request 方法 <a class="header-anchor" href="#優化-request-方法" aria-label="Permalink to “優化 Request 方法”">​</a></h3><ol><li>修改 <code>InputMap</code> 方法的默認值類型：</li></ol><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- ctx.Request().InputMap(key string, defaultValue ...map[string]string) map[string]string</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ ctx.Request().InputMap(key string, defaultValue ...map[string]any) map[string]any</span></span></code></pre></div><ol start="2"><li>新增 <code>InputMapArray</code> 方法，用於獲取數組類型的 Map：</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InputMapArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, defaultValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span></span></code></pre></div><ol start="3"><li>新增 <code>Files</code> 方法，用於獲取多個文件：</li></ol><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Files</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ([]filesystem.File, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="優化-console-confirm-方法" tabindex="-1">優化 console Confirm 方法 <a class="header-anchor" href="#優化-console-confirm-方法" aria-label="Permalink to “優化 console Confirm 方法”">​</a></h3><p>修改 <code>Confirm</code> 方法的返回值，簡化判斷邏輯：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- Confirm(question string, option ...ConfirmOption) (bool, error)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ Confirm(question string, option ...ConfirmOption) bool</span></span></code></pre></div><h3 id="優化-session-自定義驅動方式" tabindex="-1">優化 Session 自定義驅動方式 <a class="header-anchor" href="#優化-session-自定義驅動方式" aria-label="Permalink to “優化 Session 自定義驅動方式”">​</a></h3><p>之前，你需要通過 <code>facades.Session().Extend</code> 方法註冊驅動。 從 v1.16 開始，你只需要將其添加到 <code>config/session.go</code> 配置文件中即可：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// app/providers/app_service_provider.go</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- facades.Session().Extend(&quot;custom&quot;, func() session.Driver {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--   return &amp;CustomDriver{}</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/session.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;drivers&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;custom&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;driver&quot;: &quot;custom&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;via&quot;: func() (session.Driver, error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      return &amp;CustomDriver{}, nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p><a href="./../the-basics/session.html#添加自定義會話驅動">查看文檔</a></p><h3 id="優化-testing-request-方法" tabindex="-1">優化 Testing.Request 方法 <a class="header-anchor" href="#優化-testing-request-方法" aria-label="Permalink to “優化 Testing.Request 方法”">​</a></h3><p>優化 <code>WithCookies</code> 和 <code>WithCookie</code> 方法的入參：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- WithCookies(cookies map[string]string) Request</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ WithCookies(cookies []*http.Cookie) Request</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-- WithCookie(key, value string) Request</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++ WithCookie(cookie *http.Cookie) Request</span></span></code></pre></div><h3 id="優化-carbon-方法" tabindex="-1">優化 Carbon 方法 <a class="header-anchor" href="#優化-carbon-方法" aria-label="Permalink to “優化 Carbon 方法”">​</a></h3><p>之前，<code>carbon.NewDateTime</code> 等方法返回一個 struct 實例，從 v1.16 開始返回指針，如果你定義了 <code>carbon.DateTime</code> 等類型，需要修改為 <code>*carbon.DateTime</code> 等指針類型。</p><h3 id="優化-str-snake-方法" tabindex="-1">優化 str.Snake 方法 <a class="header-anchor" href="#優化-str-snake-方法" aria-label="Permalink to “優化 str.Snake 方法”">​</a></h3><p><code>str.Snake</code> 方法之前會將 <code>userID</code> 轉換為 <code>user_i_d</code>，從 v1.16 開始，會轉換為 <code>user_id</code>。</p><h3 id="goravel-cloudinary-停止維護" tabindex="-1">goravel/cloudinary 停止維護 <a class="header-anchor" href="#goravel-cloudinary-停止維護" aria-label="Permalink to “goravel/cloudinary 停止維護”">​</a></h3><p><a href="https://github.com/goravel/cloudinary" target="_blank" rel="noreferrer">goravel/cloudinary</a> 停止維護，請使用 <a href="https://github.com/goravel/s3" target="_blank" rel="noreferrer">goravel/s3</a> 或其他驅動替代。</p><h3 id="優化-queue-配置" tabindex="-1">優化 Queue 配置 <a class="header-anchor" href="#優化-queue-配置" aria-label="Permalink to “優化 Queue 配置”">​</a></h3><p>在 v1.15 之前，Queue 模組的 Redis 驅動使用 <a href="https://github.com/RichardKnop/machinery" target="_blank" rel="noreferrer">RichardKnop/machinery</a> 實現。 從 v1.16 開始，Redis 驅動在 <a href="https://github.com/goravel/redis" target="_blank" rel="noreferrer">goravel/redis</a> 中提供官方支持。</p><p>你依然可以在 v1.16 中使用 Machinery 驅動，但其將在 v1.17 中被移除，建議使用 Redis 驅動。下面提供兩種升級方式： 以下提供兩種升級方法：</p><h4 id="繼續使用-machinery-驅動" tabindex="-1">繼續使用 Machinery 驅動 <a class="header-anchor" href="#繼續使用-machinery-驅動" aria-label="Permalink to “繼續使用 Machinery 驅動”">​</a></h4><p>修改 <code>config/queue.go</code> 文件中的配置：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/queue.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;connections&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;redis&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--    &quot;driver&quot;:     &quot;redis&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    &quot;driver&quot;:     &quot;machinery&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;connection&quot;: &quot;default&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;queue&quot;:      config.Env(&quot;REDIS_QUEUE&quot;, &quot;default&quot;),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><h4 id="使用-redis-隊列驅動" tabindex="-1">使用 Redis 隊列驅動 <a class="header-anchor" href="#使用-redis-隊列驅動" aria-label="Permalink to “使用 Redis 隊列驅動”">​</a></h4><p>修改 <code>config/queue.go</code> 文件中的配置：</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">// config/queue.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;github.com/goravel/framework/contracts/queue&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  redisfacades &quot;github.com/goravel/redis/facades&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;connections&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;redis&quot;: map[string]any{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">--  &quot;driver&quot;:     &quot;redis&quot;,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  &quot;driver&quot;:     &quot;custom&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;connection&quot;: &quot;default&quot;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;queue&quot;:      config.Env(&quot;REDIS_QUEUE&quot;, &quot;default&quot;),</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  &quot;via&quot;: func() (queue.Driver, error) {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++    return redisfacades.Queue(&quot;redis&quot;) // ` + &quot;`redis`&quot; + ` 值是 ` + &quot;`connections`&quot; + ` 的鍵</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">++  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>新的 Redis 隊列驅動與原 machinery 隊列驅動的任務都保存在同一個 Redis 中，但使用不同的隊列名稱。即使你切換為新的 Redis 隊列驅動，框架會繼續讀取原 Machinery 隊列驅動的任務，直到 Machinery 中所有任務執行完畢。同時，新的隊列任務不再寫入 Machinery 隊列中，而是寫入新的 Redis 隊列，並被新的 Redis 隊列驅動消費。以實現兩個驅動間的無縫切換。 即使你切換到新的 Redis 隊列驅動，框架將繼續讀取原始 Machinery 隊列驅動任務直到完成所有任務。 同時，新的隊列任務不再寫入 Machinery 隊列，而是寫入新的 Redis 隊列，並由新的 Redis 隊列驅動消費。 實現兩個驅動之間的無縫切換。</p><p>你可以檢查 Redis 中兩個驅動的數據，以查看它們是否正確寫入和消費：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 獲取 Redis 中所有的鍵</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 Machinery 隊列驅動數據（替換 {} 中的值）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LRANGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {app_name}_queues:{queue_name}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 Redis 隊列驅動數據（替換 {} 中的值）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LRANGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {app_name}_queues:{connection}_{queue}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span></span></code></pre></div><h3 id="修復發送郵件時無法設定密件副本和副本的問題" tabindex="-1">修復發送郵件時無法設定密件副本和副本的問題 <a class="header-anchor" href="#修復發送郵件時無法設定密件副本和副本的問題" aria-label="Permalink to “修復發送郵件時無法設定密件副本和副本的問題”">​</a></h3><p>goravel/framework: v1.16.1</p><p>問題：<a href="https://github.com/goravel/goravel/issues/737" target="_blank" rel="noreferrer">＃737</a></p><h3 id="修復透過佇列發送郵件返回不正確的錯誤" tabindex="-1">修復透過佇列發送郵件返回不正確的錯誤 <a class="header-anchor" href="#修復透過佇列發送郵件返回不正確的錯誤" aria-label="Permalink to “修復透過佇列發送郵件返回不正確的錯誤”">​</a></h3><p>goravel/framework: v1.16.1</p><p>PR: <a href="https://github.com/goravel/framework/pull/1148" target="_blank" rel="noreferrer">#1148</a></p><h3 id="修復-orm-建立多筆記錄時會觸發-create-事件的問題" tabindex="-1">修復 Orm 建立多筆記錄時會觸發 create 事件的問題 <a class="header-anchor" href="#修復-orm-建立多筆記錄時會觸發-create-事件的問題" aria-label="Permalink to “修復 Orm 建立多筆記錄時會觸發 create 事件的問題”">​</a></h3><p>goravel/framework: v1.16.1</p><p>問題：<a href="https://github.com/goravel/goravel/issues/738" target="_blank" rel="noreferrer">＃738</a></p><h3 id="修復-make-package-指令產生不正確的程式碼" tabindex="-1">修復 make:package 指令產生不正確的程式碼 <a class="header-anchor" href="#修復-make-package-指令產生不正確的程式碼" aria-label="Permalink to “修復 make:package 指令產生不正確的程式碼”">​</a></h3><p>goravel/framework: v1.16.1</p><p>問題：<a href="https://github.com/goravel/goravel/issues/743" target="_blank" rel="noreferrer">＃743</a></p><h3 id="修復發布包檔案時路徑不正確的問題" tabindex="-1">修復發布包檔案時路徑不正確的問題 <a class="header-anchor" href="#修復發布包檔案時路徑不正確的問題" aria-label="Permalink to “修復發布包檔案時路徑不正確的問題”">​</a></h3><p>goravel/framework: v1.16.1</p><p>問題：<a href="https://github.com/goravel/goravel/issues/749" target="_blank" rel="noreferrer">＃749</a></p><h3 id="修復關閉時恐慌時交易不會回滾的問題" tabindex="-1">修復關閉時恐慌時交易不會回滾的問題 <a class="header-anchor" href="#修復關閉時恐慌時交易不會回滾的問題" aria-label="Permalink to “修復關閉時恐慌時交易不會回滾的問題”">​</a></h3><p>goravel/framework: v1.16.3</p><p>問題：<a href="https://github.com/goravel/goravel/issues/762" target="_blank" rel="noreferrer">＃762</a></p><h3 id="使用單獨的遷移腳本新增或刪除列時修復錯誤" tabindex="-1">使用單獨的遷移腳本新增或刪除列時修復錯誤 <a class="header-anchor" href="#使用單獨的遷移腳本新增或刪除列時修復錯誤" aria-label="Permalink to “使用單獨的遷移腳本新增或刪除列時修復錯誤”">​</a></h3><p>goravel/framework: v1.16.3</p><p>goravel/postgres: v1.4.1</p><p>如果使用單獨的遷移腳本新增或刪除列且應用程式沒有重新啟動，則會出現以下兩個錯誤：</p><ol><li>DB facade 將會崩潰。</li><li>Postgres 驅動程式將報告錯誤：<code>cached plan must not change result type</code>。</li></ol><p>問題：<a href="https://github.com/goravel/goravel/issues/768" target="_blank" rel="noreferrer">＃768</a></p><h3 id="修復-orm-select-方法的重大更改" tabindex="-1">修復 Orm Select 方法的重大更改 <a class="header-anchor" href="#修復-orm-select-方法的重大更改" aria-label="Permalink to “修復 Orm Select 方法的重大更改”">​</a></h3><p>goravel/framework: v1.16.3</p><p>將 Orm Select 方法從 v1.15 升級到 v1.16 時發生了重大變化。 <code>Select</code> 不再支援 <code>db.Raw()</code>，因此新增新的 <code>SelectRaw</code> 方法以避免重大變更。</p><p>問題：<a href="https://github.com/goravel/goravel/issues/770" target="_blank" rel="noreferrer">＃770</a></p><h3 id="fix-commands-cannot-be-run-concurrently" tabindex="-1">Fix commands cannot be run concurrently <a class="header-anchor" href="#fix-commands-cannot-be-run-concurrently" aria-label="Permalink to “Fix commands cannot be run concurrently”">​</a></h3><p>goravel/framework: v1.16.4</p><p>When running commands concurrently in the Schedule module, it may cause chaos or a panic due to concurrent writes.</p></div></div></main><footer class="VPDocFooter" data-v-d3be2d93 data-v-7ab990f9><!--[--><!--]--><div class="edit-info" data-v-7ab990f9><div class="edit-link" data-v-7ab990f9><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/goravel/docs/edit/master/zh_TW/upgrade/v1.16.md" target="_blank" rel="noreferrer" data-v-7ab990f9><!--[--><span class="vpi-square-pen edit-link-icon" data-v-7ab990f9></span> 在 GitHub 上編輯此頁面<!--]--></a></div><div class="last-updated" data-v-7ab990f9><p class="VPLastUpdated" data-v-7ab990f9 data-v-809efa9f>最後更新於: <time datetime="2025-10-29T07:55:33.000Z" data-v-809efa9f></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-7ab990f9><span class="visually-hidden" id="doc-footer-aria-label" data-v-7ab990f9>Pager</span><div class="pager" data-v-7ab990f9><a class="VPLink link pager-link prev" href="/zh_TW/getting-started/privacy.html" data-v-7ab990f9><!--[--><span class="desc" data-v-7ab990f9>上一頁</span><span class="title" data-v-7ab990f9>隱私政策</span><!--]--></a></div><div class="pager" data-v-7ab990f9><a class="VPLink link pager-link next" href="/zh_TW/upgrade/v1.15.html" data-v-7ab990f9><!--[--><span class="desc" data-v-7ab990f9>下一頁</span><span class="title" data-v-7ab990f9>從 v1.14 升級到 v1.15</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-6d6bd506 data-v-11c72509><div class="container" data-v-11c72509><p class="message" data-v-11c72509>基於 MIT 许可發佈</p><p class="copyright" data-v-11c72509>版權 © 2021-2025 Goravel</p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>