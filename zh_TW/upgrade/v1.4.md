# 從 v1.3 升級到 v1.4

[[toc]]

## 高影響變更

- [優化 Grpc 模組](#優化-grpc-模組)
- [優化路由註冊](#優化路由註冊)

## 低影響變化

- [新增 http.Context 方法](#新增-http-context-方法)
- [新增 Request 方法](#新增-request-方法)

## 升級指南

**預估升級時間：1 分鐘**

### 更新依賴

**影響可能性：高**

在 `go.mod` 文件中更新依賴：

```go
github.com/goravel/framework v1.4.0
```

### 優化 Grpc 模組

**影響可能性：高**

1. 新增 [app/grpc/kernel.go](https://github.com/goravel/goravel/blob/v1.4.0/app/grpc/kernel.go) 檔案；
2. 新增 [app/grpc/interceptors](https://github.com/goravel/goravel/tree/v1.4.0/app/grpc/interceptors) 目錄；
3. 新增 [config/grpc.go](https://github.com/goravel/goravel/blob/v1.4.0/config/grpc.go) 檔案；
4. 新增 [routes/grpc.go](https://github.com/goravel/goravel/blob/v1.4.0/routes/grpc.go) 檔案；
5. 在 [app/providers/grpc_service_provider.go](https://github.com/goravel/goravel/blob/v1.4.0/app/providers/grpc_service_provider.go) 中新增註冊攔截器邏輯；
6. 在 [config/app.go](https://github.com/goravel/goravel/blob/v1.4.0/config/app.go) 檔案中刪除 `grpc_host` 鍵值；

[查看文檔](../the-basics/grpc.md)

### 優化路由註冊

**影響可能性：高**

在 [app/providers/route_service_provider.go](https://github.com/goravel/goravel/blob/v1.4.0/app/providers/route_service_provider.go) 檔案中，將 `routes.Web()` 從 `Register()` 移動至 `Boot()`；

### http.Context 新增方法

**影響可能性：低**

新增 `ctx.Context()` 方法。

[查看文檔](../the-basics/request.md#get-context)

### Request 新增方法

**影響可能性：低**

新增 `ctx.Request().AbortWithStatusJson` 方法。

[查看文檔](../the-basics/request.md#中斷請求)
