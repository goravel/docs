# å¾ v1.15 å‡ç´šåˆ° v1.16

## ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½ ğŸ‰

- [æ–°å¢ facades.DB()](#æ–°å¢-facades-db)
- [æ–°å¢ facades.Http()](#æ–°å¢-facades-http)
- [é‡æ§‹ facades.Queue()](#é‡æ§‹-facades-queue)
- [facades.Auth() æ”¯æ´è‡ªå®šç¾©é©…å‹•](#facades-auth-æ”¯æ´è‡ªå®šç¾©é©…å‹•)
- [make:\* å‘½ä»¤æ”¯æ´è‡ªå‹•è¨»å†Š](#make-å‘½ä»¤æ”¯æ´è‡ªå‹•è¨»å†Š)
- [Goravel Installer æ”¯æ´é¸æ“‡é©…å‹•](#goravel-installer-æ”¯æ´é¸æ“‡é©…å‹•)

## åŠŸèƒ½å¢å¼· ğŸš€

- [æ‹†åˆ†è³‡æ–™åº«é©…å‹•](#æ‹†åˆ†è³‡æ–™åº«é©…å‹•)
- [Orm æ–°å¢ç‰¹æ€§](#orm-æ–°å¢ç‰¹æ€§)
- [æ”¯æ´æ ¹æ“šè³‡æ–™è¡¨å‰µå»º Model](#æ”¯æ´æ ¹æ“šè³‡æ–™è¡¨å‰µå»º-model)
- [æ”¯æ´é‹è¡Œæ™‚å‹•æ…‹ SQL èªå¥](#æ”¯æ´é‹è¡Œæ™‚å‹•æ…‹-sql-èªå¥)
- [Migration æ–°å¢ç‰¹æ€§](#migration-æ–°å¢ç‰¹æ€§)
- [Grpc æ–°å¢ Shutdown æ–¹æ³•](#grpc-æ–°å¢-shutdown-æ–¹æ³•)
- [Artisan æ–°å¢ç¦ç”¨åˆ—å°é¡è‰²é¸é …](#artisan-æ–°å¢ç¦ç”¨åˆ—å°é¡è‰²é¸é …)
- [åŠ è§£å¯† env æª”æ¡ˆ](#åŠ è§£å¯†-env-æª”æ¡ˆ)
- [ç™¼é€éƒµä»¶æ”¯æ´è¨­ç½® Header](#ç™¼é€éƒµä»¶æ”¯æ´è¨­ç½®-header)
- [Installer æ”¯æ´è‡ªæˆ‘å‡ç´š](#installer-æ”¯æ´è‡ªæˆ‘å‡ç´š)
- [å¤šèªè¨€æ”¯æ´åµŒå…¥åŠ è¼‰](#å¤šèªè¨€æ”¯æ´-embed-åŠ è¼‰)
- [æ’ç¨‹æ–°å¢ç‰¹æ€§](#schedule-æ–°å¢ç‰¹æ€§)
- [è«‹æ±‚æ–°å¢ç‰¹æ€§](#request-æ–°å¢ç‰¹æ€§)
- [è·¯ç”±æ–°å¢ç‰¹æ€§](#route-æ–°å¢ç‰¹æ€§)
- [æ¸¬è©¦æ”¯æ´å»ºç«‹å¿«å–å½±åƒ](#testing-æ”¯æ´å»ºç«‹-cache-å½±åƒ)
- [ä¸åŒ JWT Guard æ”¯æ´ä¸åŒé…ç½®](#ä¸åŒ-jwt-guard-æ”¯æ´ä¸åŒé…ç½®)
- [ServiceProvider ä¸å†ä¾è³´é †åº](#è¨»å†Š-serviceprovider-ä¸å†ä¾è³´é †åº)

## ç ´å£æ€§è®ŠåŒ– ğŸ› 

- [ç§»é™¤ SQL è¿ç§»](#ç§»é™¤-sql-è¿ç§»)
- [å„ªåŒ– Config æ¨¡çµ„æ–¹æ³•é è¨­å€¼é¡å‹](#å„ªåŒ–-config-æ¨¡çµ„æ–¹æ³•é è¨­å€¼é¡å‹)
- [å„ªåŒ– Orm æ–¹æ³•](#å„ªåŒ–-orm-æ–¹æ³•)
- [å„ªåŒ– Path æ–¹æ³•](#å„ªåŒ–-path-æ–¹æ³•)
- [å„ªåŒ– Request æ–¹æ³•](#å„ªåŒ–-request-æ–¹æ³•)
- [å„ªåŒ– console Confirm æ–¹æ³•](#å„ªåŒ–-console-confirm-æ–¹æ³•)
- [å„ªåŒ– Session è‡ªå®šç¾©é©…å‹•æ–¹å¼](#å„ªåŒ–-session-è‡ªå®šç¾©é©…å‹•æ–¹å¼)
- [å„ªåŒ– Testing.Request æ–¹æ³•](#å„ªåŒ–-testing-request-æ–¹æ³•)
- [å„ªåŒ– Carbon æ–¹æ³•](#å„ªåŒ–-carbon-æ–¹æ³•)
- [å„ªåŒ– str.Snake æ–¹æ³•](#å„ªåŒ–-str-snake-æ–¹æ³•)
- [goravel/cloudinary åœæ­¢ç¶­è­·](#goravelcloudinary-åœæ­¢ç¶­è­·)

## v1.16.1

- [ä¿®æ­£å¯„é€éƒµä»¶æ™‚ç„¡æ³•è¨­å®šå¯†ä»¶å‰¯æœ¬å’Œå‰¯æœ¬çš„å•é¡Œ](#fix-bcc-and-cc-cannot-be-set-expectly-when-sending-mail)
- [ä¿®æ­£é€éä½‡åˆ—å‚³é€éƒµä»¶å‚³å›ä¸æ­£ç¢ºçš„éŒ¯èª¤](#fix-sending-mail-via-queue-returns-incorrect-error)
- [ä¿®æ­£å»ºç«‹å¤šå€‹è¨˜éŒ„æ™‚è§¸ç™¼ orm create äº‹ä»¶çš„å•é¡Œ](#fix-the-orm-create-events-can-be-triggered-when-creating-multiple-records)
- [ä¿®æ­£ make:package æŒ‡ä»¤ç”¢ç”ŸéŒ¯èª¤ä»£ç¢¼çš„å•é¡Œ](#fix-the-make-package-command-generates-incorrect-code)
- [ä¿®æ­£ç™¼å¸ƒå¥—ä»¶æª”æ¡ˆæ™‚è·¯å¾‘ä¸æ­£ç¢ºçš„å•é¡Œ](#fix-the-path-is-incorrect-when-publishing-package-files)

## v1.16.3

- [ä¿®å¾©äº¤æ˜“åœ¨é–‰åŒ…ç™¼ç”Ÿ panic æ™‚ä¸å›æ»¾çš„å•é¡Œ](#fix-transaction-does-not-rollback-when-panic-in-closure)
- [ä¿®æ­£ä½¿ç”¨å–®ç¨çš„é·ç§»è…³æœ¬æ–°å¢æˆ–åˆªé™¤åˆ—æ™‚çš„éŒ¯èª¤](#fix-errors-if-adding-or-removing-a-column-with-a-separate-migration-script)
- [ä¿®æ­£ Orm Select æ–¹æ³•çš„ç ´å£æ€§è®Šæ›´](#fix-the-breaking-change-of-orm-select-method)

## v1.16.4

- [ä¿®æ­£æŒ‡ä»¤ç„¡æ³•ä¸¦ç™¼é‹è¡Œçš„å•é¡Œ](#fix-commands-cannot-be-run-concurrently)

## v1.16.5

- [ä¿®æ­£ä½‡åˆ—ç„¡æ³•å¦‚é æœŸé—œé–‰](#fix-queue-cannot-be-shut-down-as-expected)

## å‡ç´šæŒ‡å—

éš¨è‘— [Golang v1.22 ä¸å†è¢«ç¶­è­·](https://endoflife.date/go)ï¼ŒGoravel v1.16 é è¨­æ”¯æ´çš„ Golang ç‰ˆæœ¬å·²å¾ 1.22 å‡ç´šç‚º 1.23.

goravel/example é …ç›®ç”± v1.15 å‡ç´šåˆ° v1.16 PR å¯ä½œç‚ºå‡ç´šåƒè€ƒï¼š[goravel/example#68](https://github.com/goravel/example/pull/68).

### 1. æ›´æ–°ä¾è³´

```shell
go get github.com/goravel/framework@latest

// å¦‚æœä½¿ç”¨ gin
go get github.com/goravel/gin@latest

// å¦‚æœä½¿ç”¨ fiber
go get github.com/goravel/fiber@latest

// å¦‚æœä½¿ç”¨ redis
go get github.com/goravel/redis@latest

// å¦‚æœä½¿ç”¨ S3
go get github.com/goravel/s3@latest

// å¦‚æœä½¿ç”¨ Oss
go get github.com/goravel/oss@latest

// å¦‚æœä½¿ç”¨ Cos
go get github.com/goravel/cos@latest

// å¦‚æœä½¿ç”¨ Minio
go get github.com/goravel/minio@latest

go mod tidy
```

### 2. ä¿®æ”¹è³‡æ–™åº«é…ç½®

åˆªé™¤è³‡æ–™åº«é…ç½®æª”ä¸­çš„ `connections`ï¼Œä¸¦å®‰è£éœ€è¦çš„è³‡æ–™åº«é©…å‹•ã€‚

ä¾‹å¦‚ï¼ŒPostgres:

1. å®‰è£é©…å‹•åŒ…

```shell
go get github.com/goravel/postgres
```

2. å°‡ `postgres.ServiceProvider` æ·»åŠ åˆ° `config/app.go` æ–‡ä»¶ä¸­

```go
// config/app.go
import "github.com/goravel/postgres"

"providers": []foundation.ServiceProvider{
  ...
  &postgres.ServiceProvider{},
},
```

3. ä¿®æ”¹ `config/database.go` æª”æ¡ˆä¸­çš„è¨­å®š

```diff
// config/database.go
import (
	"github.com/goravel/framework/contracts/database/driver"
	postgresfacades "github.com/goravel/postgres/facades"
)

"connections": map[string]any{
  "postgres": map[string]any{
    ...
++    "via": func() (driver.Driver, error) {
++      return postgresfacades.Postgres("postgres")
++    },
  },
},
```

### 3. ä¿®æ”¹ auth.go é…ç½®æª”æ¡ˆ

```diff
// config/auth.go

// æ”¯æ´: "jwt"
"guards": map[string]any{
  "user": map[string]any{
    "driver":   "jwt",
++    "provider": "user",
  },
},

++ // æ”¯æ´: "orm"
++ "providers": map[string]any{
++   "user": map[string]any{
++     "driver": "orm",
++   },
++ },
```

### 4. ä¿®æ”¹ session.go é…ç½®æª”æ¡ˆ

```diff
// config/session.go

-- "driver": config.Env("SESSION_DRIVER", "file"),
++ "default": config.Env("SESSION_DRIVER", "file"),
++ "drivers": map[string]any{
++   "file": map[string]any{
++     "driver": "file",
++   },
++ },
```

### 5. ä¿®æ”¹ queue.go é…ç½®æª”æ¡ˆ

- å¦‚æœæ­£åœ¨ä½¿ç”¨ Queue æ¨¡çµ„çš„ Redis é©…å‹•ï¼Œéœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– Queue é…ç½®](#å„ªåŒ–-queue-é…ç½®)ã€‚

- å¦‚æœæ²’æœ‰ä½¿ç”¨æˆ–æƒ³è¦ä»¥å¾Œä½¿ç”¨ database é©…å‹•ï¼Œéœ€ä¿®æ”¹ `config/queue.go` æª”æ¡ˆä¸­çš„é…ç½®ï¼š

```diff
// config/queue.go

-- // é©…å‹•: "sync", "redis"
++ // é©…å‹•: "sync", "database", "custom"
"connections": map[string]any{
  "sync": map[string]any{
    "driver": "sync",
  },
--  "redis": map[string]any{
--    "driver":     "redis",
--    "connection": "default",
--    "queue":      config.Env("REDIS_QUEUE", "default"),
--  },
++  "database": map[string]any{
++    "driver":     "database",
++    "connection": "postgres",
++    "queue":      "default",
++    "concurrent": 1,
++  },
},

++ "failed": map[string]any{
++  "database": config.Env("DB_CONNECTION", "postgres"),
++  "table":    "failed_jobs",
++ },
```

æ·»åŠ è³‡æ–™åº«é©…å‹•æ‰€éœ€çš„é·ç§»æª”æ¡ˆï¼š[database/migrations/20210101000002_create_jobs_table.go](https://github.com/goravel/goravel/blob/master/database/migrations/20210101000002_create_jobs_table.go)ï¼Œä¸¦åœ¨ `database/kernel.go` æ–‡ä»¶ä¸­è¨»å†Šè©²é·ç§»æª”æ¡ˆã€‚

### 6. å¦‚æœéœ€è¦ä½¿ç”¨ HTTP å®¢æˆ¶ç«¯

åœ¨ `config/http.go` æª”æ¡ˆä¸­æ·»åŠ  HTTP å®¢æˆ¶ç«¯é…ç½®é …:

```diff
// config/http.go
++ "client": map[string]any{
++   "base_url":                config.GetString("HTTP_CLIENT_BASE_URL"),
++   "timeout":                 config.GetDuration("HTTP_CLIENT_TIMEOUT"),
++   "max_idle_conns":          config.GetInt("HTTP_CLIENT_MAX_IDLE_CONNS"),
++   "max_idle_conns_per_host": config.GetInt("HTTP_CLIENT_MAX_IDLE_CONNS_PER_HOST"),
++   "max_conns_per_host":      config.GetInt("HTTP_CLIENT_MAX_CONN_PER_HOST"),
++   "idle_conn_timeout":       config.GetDuration("HTTP_CLIENT_IDLE_CONN_TIMEOUT"),
++ },
```

### 7. å¦‚æœä½¿ç”¨ goravel/redis é©…å‹•

éœ€ä¿®æ”¹ `config/cache.go` æª”æ¡ˆä¸­çš„é…ç½®ï¼š

```diff
// config/cache.go
"redis": map[string]any{
  "driver":     "custom",
  "connection": "default",
  "via": func() (cache.Driver, error) {
--  return redisfacades.Redis("redis"), nil
++  return redisfacades.Cache("redis")
  },
},
```

### 8. å¦‚æœä½¿ç”¨ carbon.DateTime ç­‰æ–¹æ³•

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– Carbon æ–¹æ³•](#å„ªåŒ–-carbon-æ–¹æ³•)

### 9. å¦‚æœæ­£åœ¨ä½¿ç”¨ session è‡ªå®šç¾©é©…å‹•

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– Session è‡ªå®šç¾©é©…å‹•](#å„ªåŒ–-session-è‡ªå®šç¾©é©…å‹•)

### 10. å¦‚æœæ­£åœ¨ä½¿ç”¨ facades.Config() ä¸­çš„æ–¹æ³•

éœ€ç›¸åº”ä¿®æ”¹ï¼š[ä¿®æ”¹ Config æ¨¡å—æ–¹æ³•é»˜è®¤å€¼ç±»å‹](#modify-config-module-methods-default-value-type)

### 11. å¦‚æœæ­£åœ¨ä½¿ç”¨ SQL è³‡æ–™é·ç§»

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[ç§»é™¤ SQL è¿ç§»](#remove-sql-migration)

### 12. å¦‚æœæ­£åœ¨ä½¿ç”¨ Orm

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– Orm æ–¹æ³•](#optimize-orm-methods)

### 13. å¦‚æœæ­£åœ¨ä½¿ç”¨ Path æ–¹æ³•

`path` æ–¹æ³•è¿”å›çµ•å°è·¯å¾‘ï¼Œå¦‚æœæ­£åœ¨ä½¿ç”¨ï¼Œéœ€æª¢æŸ¥æ˜¯å¦éœ€è¦ä¿®æ”¹ï¼š[å„ªåŒ– Path æ–¹æ³•](#optimize-path-method)

### 14. å¦‚æœæ­£åœ¨ä½¿ç”¨ `ctx.Request().InputMap` æ–¹æ³•

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– Request æ–¹æ³•](#optimize-request-method)

### 15. å¦‚æœæ­£åœ¨ä½¿ç”¨ `console.Confirm` æ–¹æ³•

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– console Confirm æ–¹æ³•](#optimize-console-confirm-method)

### 16. å¦‚æœæ­£åœ¨ä½¿ç”¨ Testing.Request æ–¹æ³•

éœ€ç›¸æ‡‰ä¿®æ”¹ï¼š[å„ªåŒ– Testing.Request æ–¹æ³•](#optimize-testing-request-method)

## åŠŸèƒ½ä»‹ç´¹

### æ–°å¢ facades.DB()

æ–°å¢ `facades.DB()` æ¨¡çµ„ï¼Œæ–¹ä¾¿é€²è¡Œè³‡æ–™åº«çš„åŸç”Ÿæ“ä½œï¼Œæ¯” ORM é€Ÿåº¦æ›´å¿«ã€‚

[æŸ¥çœ‹æ–‡æª”](../database/getting-started.md)

### æ–°å¢ facades.Http()

æ–°å¢ `facades.Http()` æ¨¡çµ„ï¼Œæ–¹ä¾¿é€²è¡Œ HTTP æ“ä½œã€‚

[æŸ¥çœ‹æ–‡æª”](../digging-deeper/http-client.md)

### é‡æ§‹ facades.Queue()

- åœ¨ v1.15 ä¹‹å‰ï¼ŒQueue åƒ…æ”¯æŒåŒæ­¥èˆ‡ Redis é©…å‹•ï¼Œå¾ v1.16 é–‹å§‹ï¼Œæ”¯æŒè³‡æ–™åº«èˆ‡è‡ªå®šç¾©é©…å‹•ã€‚

- æ–°å¢ `jobs` å’Œ `failed_jobs` è¡¨ï¼Œç”¨æ–¼å­˜å„²ä»»å‹™åŠå¤±æ•—ä»»å‹™ã€‚

- æ–°å¢ `queue:retry` å‘½ä»¤ï¼Œç”¨æ–¼é‡è©¦å¤±æ•—çš„ä»»å‹™ã€‚

- æ–°å¢ `queue:failed` å‘½ä»¤ï¼Œç”¨æ–¼æŸ¥çœ‹å¤±æ•—ä»»å‹™ã€‚

- æ”¯æŒåœ¨å•Ÿå‹•éšŠåˆ—ä»»å‹™æ™‚è¨­ç½®é‡è©¦æ¬¡æ•¸ã€‚

è©³æƒ…è«‹ [æŸ¥çœ‹æ–‡æª”](../digging-deeper/queues.md)

### facades.Auth() æ”¯æŒè‡ªè¨‚é©…å‹•

åœ¨ v1.15 ä¹‹å‰ï¼ŒAuth åªæ”¯æŒ JWT é©…å‹•ï¼Œå¾ v1.16 é–‹å§‹æ”¯æŒ Session å’Œè‡ªå®šç¾©é©…å‹•ï¼Œè«‹ [æŸ¥çœ‹æ–‡æª”](../security/authentication.md#custom-driver)ã€‚

### make:\* å‘½ä»¤æ”¯æŒè‡ªå‹•è¨»å†Š

`make:migration` å’Œ `make:seeder` ç­‰å‘½ä»¤ç”Ÿæˆçš„æª”æ¡ˆå°‡åœ¨ç”Ÿæˆå¾Œè‡ªå‹•è¨»å†Šåˆ°æ¡†æ¶ä¸­ï¼Œä¸å†éœ€è¦åƒä»¥å‰é‚£æ¨£æ‰‹å‹•è¨»å†Šã€‚

### Goravel Installer æ”¯æŒé¸æ“‡é©…å‹•

ä½¿ç”¨ Goravel Installer å®‰è£æ–°å°ˆæ¡ˆæ™‚ï¼Œå¯ä»¥é¸æ“‡ä¸åŒçš„é©…å‹•ï¼Œä¾‹å¦‚ï¼šå¯ä»¥é¸æ“‡å®‰è£ goravel/gin æˆ– goravel/fiber ç­‰ã€‚

### æ‹†åˆ†è³‡æ–™åº«é©…å‹•

ä¹‹å‰å¤šå€‹è³‡æ–™åº«é©…å‹•é›†æˆåœ¨æ¡†æ¶ä¸­ï¼Œå¢åŠ äº†è»Ÿé«”åŒ…çš„å¤§å°ã€‚ å¾ v1.16 é–‹å§‹ï¼Œè³‡æ–™åº«é©…å‹•å°‡ä½œç‚ºç¨ç«‹åŒ…å­˜åœ¨ï¼Œæ‰€ä»¥åªéœ€å®‰è£æ‰€éœ€çš„è³‡æ–™åº«é©…å‹•ã€‚

| è³‡æ–™åº«é¡å‹                                                                                                   | é©…å‹•åŒ…                                                                                  |
| ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| Postgres                                                                                                | [github.com/goravel/postgres](https://github.com/goravel/postgres)   |
| facades.Orm().Connection("mysql") | [github.com/goravel/mysql](https://github.com/goravel/mysql)         |
| Sqlserver                                                                                               | [github.com/goravel/sqlserver](https://github.com/goravel/sqlserver) |
| ToRawSql                                                                                                | [github.com/goravel/sqlite](https://github.com/goravel/sqlite)       |

### Orm æ–°å¢ç‰¹æ€§

- æ”¯æŒæŸ¥è©¢ JSON å­—æ®µï¼Œ[æŸ¥çœ‹æ–‡æª”](../orm/getting-started.md#where)ã€‚

- æ”¯æŒæ›´æ–° JSON å­—æ®µï¼Œ[æŸ¥çœ‹æ–‡æª”](../orm/getting-started.md#update-json-fields)ã€‚

- æ¨¡å‹æ”¯æŒè¨­ç½® `GlobalScope` æ–¹æ³•ï¼Œè©²æ–¹æ³•é™åˆ¶æŸ¥è©¢ã€æ›´æ–°å’Œåˆªé™¤æ“ä½œçš„ç¯„åœï¼š

```go
import "github.com/goravel/framework/contracts/orm"

type User struct {
  orm.Model
  Name string
}

func (r *User) GlobalScopes() []func(orm.Query) orm.Query {
  return []func(orm.Query) orm.Query{
    func(query orm.Query) orm.Query {
      return query.Where("name", "goravel")
    },
  }
}
```

### æ”¯æŒæ ¹æ“šè³‡æ–™è¡¨å‰µå»º Model

`make:model` å‘½ä»¤å¢åŠ  `--table` é¸é …ï¼Œç”¨æ–¼æ ¹æ“šè³‡æ–™è¡¨å‰µå»º Modelï¼š

```shell
./artisan make:model --table=users User

// å¦‚æœæ¨¡å‹å·²å­˜åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ -f é¸é …å¼·åˆ¶è¦†è“‹
./artisan make:model --table=users -f User
```

### æ”¯æŒé‹è¡Œæ™‚å‹•æ…‹ SQL èªå¥

æ–°å¢ `EnableQueryLog` æ–¹æ³•ï¼Œç”¨æ–¼å•Ÿç”¨æŸ¥è©¢æ—¥èªŒï¼š

```go
ctx := db.EnableQueryLog(ctx)

facades.Orm().WithContext(ctx).Query()
facades.DB().WithContext(ctx).Table()

queryLogs := db.GetQueryLog(ctx)
ctx := db.DisableQueryLog(ctx)
```

### Migration æ–°å¢ç‰¹æ€§

- æ–°å¢ `Change` æ–¹æ³•ä»¥ä¿®æ”¹è¡¨çµæ§‹(é©ç”¨æ–¼ Postgres, MySQL, Sqlserver)ï¼š

```go
table.String("name").Change()
```

- æ–°å¢ `RenameColumn` æ–¹æ³•ï¼Œç”¨æ–¼é‡å‘½åè¡¨çš„åˆ—ï¼š

```go
table.RenameColumn("old_name", "new_name")
```

- æ–°å¢ `Comment` æ–¹æ³•ï¼Œç”¨æ–¼å‘è¡¨æ·»åŠ è¨»é‡‹ï¼ˆé©ç”¨æ–¼ Postgres, MySQLï¼‰ï¼š

```go
table.Comment("user table")
```

- æ–°å¢ `First` æ–¹æ³•ï¼Œç”¨æ–¼å°‡æ¬„ä½è¨­ç½®ç‚ºè¡¨çš„ç¬¬ä¸€å€‹æ¬„ä½ï¼ˆé©ç”¨æ–¼ MySQLï¼‰ï¼š

```go
table.String("name").First()
```

- æ–°å¢ `After` æ–¹æ³•ï¼Œç”¨æ–¼å°‡æ¬„ä½è¨­ç½®ç‚ºè¡¨çš„æœ€å¾Œä¸€å€‹æ¬„ä½ï¼ˆé©ç”¨æ–¼ MySQLï¼‰ï¼š

```go
table.String("name").After("id")
```

- æ–°å¢ `Morphs`, `NullableMorphs`, `NumericMorphs`, `UuidMorphs`, `UlidMorphs` æ–¹æ³•ï¼Œç”¨æ–¼å‰µå»ºå¤šæ…‹é—œè¯æ¬„ä½ï¼š

```go
table.Morphs("morphable")
// morphable_type, morphable_id
```

- æ–°å¢ `Uuid`, `Ulid` æ–¹æ³•ï¼Œç”¨æ–¼å‰µå»º UUID å’Œ ULID æ¬„ä½ï¼š

```go
table.Uuid("uuid")
table.Ulid("ulid")
```

- æ–°å¢ `GeneratedAs` å’Œ `Always` æ–¹æ³•ï¼Œç”¨æ–¼å‰µå»ºç”Ÿæˆåˆ—ï¼ˆåƒ…é™ PostgreSQLï¼‰ï¼š

```go
table.String("name").GeneratedAs().Always()
```

### Grpc æ–°å¢ Shutdown æ–¹æ³•

æ–°å¢ `Shutdown` æ–¹æ³•ç”¨æ–¼å„ªé›…åœ°é—œé–‰ Grpcï¼Œ[æŸ¥çœ‹æ–‡æª”](../the-basics/grpc.md#shutdown-grpc)ã€‚

### Artisan æ–°å¢ç¦ç”¨è¼¸å‡ºé¡è‰²é¸é …

ä¸€äº›å‘½ä»¤é»˜èªæœƒåˆ—å°é¡è‰²ï¼Œä¾‹å¦‚ `list` å‘½ä»¤ã€‚ ç„¶è€Œï¼Œåœ¨æŸäº›çµ‚ç«¯æˆ–æ—¥èªŒä¸­ï¼Œé¡è‰²å€¼å¯èƒ½æœƒäº‚ç¢¼ã€‚ ä¸€äº›å‘½ä»¤é»˜èªæœƒåˆ—å°é¡è‰²ï¼Œä¾‹å¦‚ `list` å‘½ä»¤ã€‚ ç„¶è€Œï¼Œåœ¨æŸäº›çµ‚ç«¯æˆ–æ—¥èªŒä¸­ï¼Œé¡è‰²å€¼å¯èƒ½æœƒäº‚ç¢¼ã€‚ ä½ å¯ä»¥ä½¿ç”¨ `--no-ansi` é¸é …ç¦ç”¨åˆ—å°é¡è‰²ï¼š

```shell
go run . artisan list --no-ansi
```

### åŠ è§£å¯† env æ–‡ä»¶

æ‚¨å¯èƒ½æƒ³å°‡ç”Ÿç”¢ç’°å¢ƒçš„ env æ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œä½†æ‚¨ä¸æƒ³æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åŠ è§£å¯† env æ–‡ä»¶ï¼š

[æŸ¥çœ‹æ–‡æª”](../getting-started/installation.md#encrypt-and-decrypt-env-file)

### ç™¼é€éƒµä»¶æ”¯æŒè¨­ç½® Header

æ–°å¢ `Headers` æ–¹æ³•ï¼Œç”¨æ–¼è¨­ç½®éƒµä»¶çš„ Headerã€‚

```go
facades.Mail().Headers(map[string]string{"X-Mailer": "Goravel"})
```

### Installer æ”¯æŒè‡ªå‡ç´š

goravel/installer æ–°å¢ `upgrade` å‘½ä»¤ï¼Œç”¨æ–¼å‡ç´š installer è‡ªèº«ï¼š

```shell
goravel upgrade
goravel upgrade v1.1.1
```

### å¤šèªè¨€æ–‡ä»¶æ”¯æŒ embed åŠ è¼‰

ä½¿ç”¨åµŒå…¥åŠ è¼‰æ™‚ï¼Œèªè¨€æ–‡ä»¶å°‡è¢«ç·¨è­¯åˆ°äºŒé€²åˆ¶æ–‡ä»¶ä¸­ï¼Œä¸å†éœ€è¦éƒ¨ç½²ã€‚

[æŸ¥çœ‹æ–‡æª”](../digging-deeper/localization.md#embed-loading)

### Schedule æ–°å¢ç‰¹æ€§

- æ–°å¢ `EverySecond` æ–¹æ³•ç­‰ï¼Œè«‹ [æŸ¥çœ‹æ–‡æª”](../digging-deeper/task-scheduling.md#schedule-frequency-options)ã€‚

- æ–°å¢ `schedule:run` å‘½ä»¤ï¼Œç”¨æ–¼æ‰‹å‹•é‹è¡Œä»»å‹™ã€‚

- æ–°å¢ `schedule:list` æ–¹æ³•ï¼Œç”¨æ–¼æŸ¥çœ‹æ‰€æœ‰ä»»å‹™ã€‚

### Request æ–°å¢ç‰¹æ€§

- åœ¨ v1.15 ä¹‹å‰ï¼Œä»¥ä¸‹ `Request` ç¶å®šå°‡å ±éŒ¯ï¼Œå¾ v1.16 é–‹å§‹æ”¯æŒç¶å®šå¤šå€‹æ–‡ä»¶ï¼š

```go
type StoreMediaRequest struct {
	Files []*multipart.FileHeader `form:"files" json:"files"`
}
```

- æ–°å¢ `OriginPath` æ–¹æ³•ï¼Œç”¨æ–¼ç²å–åŸå§‹è·¯ç”±è·¯å¾‘ï¼š

```go
ctx.Request().OriginPath()
```

- æ–°å¢ `Info` æ–¹æ³•ï¼Œç”¨æ–¼ç²å–è·¯ç”±ä¿¡æ¯ï¼š

```go
info := ctx.Request().Info()
```

- æ–°å¢ `Name` æ–¹æ³•ï¼Œç”¨æ–¼ç²å–è·¯ç”±åç¨±ï¼š

```go
name := ctx.Request().Name()
```

- ç•¶ `http.request_timeout` é…ç½®é …è¨­ç½®ç‚º `0` æ™‚ï¼Œè«‹æ±‚å°‡ä¸æœƒè¶…æ™‚ã€‚

### Route æ–°å¢ç‰¹æ€§

- æ–°å¢ `GetRoutes` æ–¹æ³•ï¼Œç”¨æ–¼ç²å–æ‰€æœ‰è·¯ç”±ï¼š

```go
routes := facades.Route().GetRoutes()
```

- æ–°å¢ `Name` æ–¹æ³•ï¼Œç”¨æ–¼è¨­ç½®è·¯ç”±åç¨±ï¼š

```go
facades.Route().Get("users", usersController.Index).Name("users.index")
```

ç„¶å¾Œå¯ä»¥ä½¿ç”¨ `Info` æ–¹æ³•ç²å–è·¯ç”±ä¿¡æ¯ï¼š

```go
route := facades.Route().Info("users.index")
```

- æ–°å¢ `route:list` å‘½ä»¤ï¼Œç”¨æ–¼æŸ¥çœ‹æ‰€æœ‰è·¯ç”±ï¼š

```shell
./artisan route:list
```

### Testing æ”¯æŒå‰µå»º Cache é¡åƒ

æ–°å¢ `Cache` æ–¹æ³•ï¼Œç”¨æ–¼å‰µå»º Cache é¡åƒï¼š

```go
cache, err := facades.Testing().Docker().Cache()
```

### ä¸åŒ JWT Guard æ”¯æŒä¸åŒé…ç½®

åœ¨ v1.15 ä¹‹å‰ï¼ŒJWT Guard çš„ `ttl` å’Œ `secret` é…ç½®é …æ˜¯å…¨å±€é…ç½®ï¼Œå¾ v1.16 é–‹å§‹ï¼Œæ‚¨å¯ä»¥ç‚ºä¸åŒçš„ JWT Guard è¨­ç½®ä¸åŒçš„ `ttl` å’Œ `secret`ï¼Œ[æŸ¥çœ‹æ–‡æª”](../security/authentication.md#different-jwt-guard-supports-different-configurations)ã€‚

### ServiceProvider ä¸å†ä¾è³´é †åº

ServiceProvider æ–°å¢å¯é¸æ–¹æ³• `Relationship() binding.Relationship`ï¼Œç”¨æ–¼è²æ˜ç•¶å‰ ServicerProvider çš„ä¾è³´é—œä¿‚ï¼Œè¨­ç½®äº†è©²æ–¹æ³•çš„ ServiceProvider å°‡ä¸ä¾è³´è¨»å†Šé †åºï¼Œæœªè¨­ç½®çš„ ServiceProvider å°‡è¢«æœ€å¾Œè¨»å†Šï¼Œä¾‹å¦‚ï¼š

```go
type ServiceProvider struct {
}

func (r *ServiceProvider) Relationship() binding.Relationship {
	return binding.Relationship{
		Bindings: []string{
			BindingSession,
		},
		Dependencies: []string{
			binding.Config,
		},
		ProvideFor: []string{
			binding.Cache,
		},
	}
}

func (r *ServiceProvider) Register(app foundation.Application) {}

func (r *ServiceProvider) Boot(app foundation.Application) {}
```

### ç§»é™¤ SQL è¿ç§»

SQL é·ç§»å·²å®Œå…¨ç§»é™¤ï¼Œè«‹ä½¿ç”¨ Go èªè¨€é·ç§»ã€‚é·ç§»æ­¥é©Ÿï¼š é·ç§»æ­¥é©Ÿï¼š

1. ç§»é™¤ `config/database.go` ä¸­çš„ `migrations.driver` éµï¼›

```go
// config/database.go
"migrations": map[string]any{
--  "driver": "sql",
  "table":  "migrations",
},
```

2. å°‡ `database/migrations` ç›®éŒ„ä¸‹çš„ SQL é·ç§»æ–‡ä»¶è½‰æ›ç‚º Go èªè¨€é·ç§»æ–‡ä»¶ï¼š

```go
// Up é‹è¡Œé·ç§»ã€‚
func (r *M20241207095921CreateUsersTable) Up() error {
    return facades.Schema().Sql({Original SQL})
}

// Down åè½‰é·ç§»ã€‚
func (r *M20241207095921CreateUsersTable) Down() error {
    return facades.Schema().Sql({Original SQL})
}
```

3. åœ¨ `database/kernel.go` æ–‡ä»¶ä¸­è¨»å†Šé·ç§»æ–‡ä»¶ï¼›

### å„ªåŒ– Config æ¨¡çµ„æ–¹æ³•é»˜èªå€¼é¡å‹

ä¹‹å‰ `GetString`ã€`GetInt`ã€`GetBool` æ–¹æ³•çš„é»˜èªå€¼é¡å‹ç‚º `any`ï¼Œå¾ v1.16 é–‹å§‹ï¼Œé»˜èªå€¼é¡å‹ç‚º `string`ã€`int`ã€`bool`ï¼Œä»¥ä¿è­‰é¡å‹å®‰å…¨ã€‚

```diff
-- GetString(path string, defaultValue ...any) string
++ GetString(path string, defaultValue ...string) string

-- GetInt(path string, defaultValue ...any) int
++ GetInt(path string, defaultValue ...int) int

-- GetBool(path string, defaultValue ...any) bool
++ GetBool(path string, defaultValue ...bool) bool
```

### å„ªåŒ– Orm æ–¹æ³•

- å„ªåŒ– `Count`ã€`Exists` æ–¹æ³•çš„è¿”å›å€¼ï¼š

```diff
-- Count(count *int64) error
++ Count() (int64, error)

-- Distinct(args ...any) Query
++ Distinct(columns ...string) Query

-- Exists(exists *bool) error
++ Exists() (bool, error)

-- Select(query any, args ...any) Query
++ Select(columns ...string) Query

-- Sum(column string, dest any) error
++ Sum(column string) (int64, error)
```

- `Where` æ–¹æ³•æ”¯æŒé–‰åŒ…ï¼š

```go
facades.Orm().Query().Where(func(query orm.Query) orm.Query {
  return query.Where("height", 180).Where("age", 18)
}).FindOrFail(&user, 100)
// SELECT * FROM users WHERE id = 100 AND (height = 180 AND age = 18);
```

### å„ªåŒ– Path æ–¹æ³•

- æ–°å¢ `Resource` æ–¹æ³•

```go
path.Resource("views/welcome.tmpl")
```

- path æ–¹æ³•è¿”å›çµ•å°è·¯å¾‘

ä¹‹å‰ path æ–¹æ³•è¿”å›çš„æ˜¯ç›¸å°æ–¼æ ¹ç›®éŒ„çš„è·¯å¾‘ï¼Œä¾‹å¦‚ `path.Config("app.go") == config/app.go`ã€‚ å¾ v1.16 é–‹å§‹ï¼Œpath æ–¹æ³•è¿”å›çš„æ˜¯çµ•å°è·¯å¾‘ï¼Œä¾‹å¦‚ `path.Config("app.go") == /Users/goravel/workspace/goravel/config/app.go`ã€‚

### å„ªåŒ– Request æ–¹æ³•

1. ä¿®æ”¹ `InputMap` æ–¹æ³•çš„é»˜èªå€¼é¡å‹ï¼š

```diff
-- ctx.Request().InputMap(key string, defaultValue ...map[string]string) map[string]string
++ ctx.Request().InputMap(key string, defaultValue ...map[string]any) map[string]any
```

2. æ–°å¢ `InputMapArray` æ–¹æ³•ï¼Œç”¨æ–¼ç²å–æ•¸çµ„é¡å‹çš„ Mapï¼š

```go
ctx.Request().InputMapArray(key string, defaultValue ...[]map[string]any) []map[string]any
```

3. æ–°å¢ `Files` æ–¹æ³•ï¼Œç”¨æ–¼ç²å–å¤šå€‹æ–‡ä»¶ï¼š

```go
ctx.Request().Files(name string) ([]filesystem.File, error)
```

### å„ªåŒ– console Confirm æ–¹æ³•

ä¿®æ”¹ `Confirm` æ–¹æ³•çš„è¿”å›å€¼ï¼Œç°¡åŒ–åˆ¤æ–·é‚è¼¯ï¼š

```diff
-- Confirm(question string, option ...ConfirmOption) (bool, error)
++ Confirm(question string, option ...ConfirmOption) bool
```

### å„ªåŒ– Session è‡ªå®šç¾©é©…å‹•æ–¹å¼

ä¹‹å‰ï¼Œä½ éœ€è¦é€šé `facades.Session().Extend` æ–¹æ³•è¨»å†Šé©…å‹•ã€‚ å¾ v1.16 é–‹å§‹ï¼Œä½ åªéœ€è¦å°‡å…¶æ·»åŠ åˆ° `config/session.go` é…ç½®æ–‡ä»¶ä¸­å³å¯ï¼š

```diff
// app/providers/app_service_provider.go
-- facades.Session().Extend("custom", func() session.Driver {
--   return &CustomDriver{}
-- })

// config/session.go
"drivers": map[string]any{
  "custom": map[string]any{
    "driver": "custom",
    "via": func() (session.Driver, error) {
      return &CustomDriver{}, nil
    },
  }
},
```

[æŸ¥çœ‹æ–‡æª”](../the-basics/session.md#æ·»åŠ è‡ªå®šç¾©æœƒè©±é©…å‹•)

### å„ªåŒ– Testing.Request æ–¹æ³•

å„ªåŒ– `WithCookies` å’Œ `WithCookie` æ–¹æ³•çš„å…¥åƒï¼š

```diff
-- WithCookies(cookies map[string]string) Request
++ WithCookies(cookies []*http.Cookie) Request

-- WithCookie(key, value string) Request
++ WithCookie(cookie *http.Cookie) Request
```

### å„ªåŒ– Carbon æ–¹æ³•

ä¹‹å‰ï¼Œ`carbon.NewDateTime` ç­‰æ–¹æ³•è¿”å›ä¸€å€‹ struct å¯¦ä¾‹ï¼Œå¾ v1.16 é–‹å§‹è¿”å›æŒ‡é‡ï¼Œå¦‚æœä½ å®šç¾©äº† `carbon.DateTime` ç­‰é¡å‹ï¼Œéœ€è¦ä¿®æ”¹ç‚º `*carbon.DateTime` ç­‰æŒ‡é‡é¡å‹ã€‚

### å„ªåŒ– str.Snake æ–¹æ³•

`str.Snake` æ–¹æ³•ä¹‹å‰æœƒå°‡ `userID` è½‰æ›ç‚º `user_i_d`ï¼Œå¾ v1.16 é–‹å§‹ï¼Œæœƒè½‰æ›ç‚º `user_id`ã€‚

### goravel/cloudinary åœæ­¢ç¶­è­·

[goravel/cloudinary](https://github.com/goravel/cloudinary) åœæ­¢ç¶­è­·ï¼Œè«‹ä½¿ç”¨ [goravel/s3](https://github.com/goravel/s3) æˆ–å…¶ä»–é©…å‹•æ›¿ä»£ã€‚

### å„ªåŒ– Queue é…ç½®

åœ¨ v1.15 ä¹‹å‰ï¼ŒQueue æ¨¡çµ„çš„ Redis é©…å‹•ä½¿ç”¨ [RichardKnop/machinery](https://github.com/RichardKnop/machinery) å¯¦ç¾ã€‚ å¾ v1.16 é–‹å§‹ï¼ŒRedis é©…å‹•åœ¨ [goravel/redis](https://github.com/goravel/redis) ä¸­æä¾›å®˜æ–¹æ”¯æŒã€‚

ä½ ä¾ç„¶å¯ä»¥åœ¨ v1.16 ä¸­ä½¿ç”¨ Machinery é©…å‹•ï¼Œä½†å…¶å°‡åœ¨ v1.17 ä¸­è¢«ç§»é™¤ï¼Œå»ºè­°ä½¿ç”¨ Redis é©…å‹•ã€‚ä¸‹é¢æä¾›å…©ç¨®å‡ç´šæ–¹å¼ï¼š ä»¥ä¸‹æä¾›å…©ç¨®å‡ç´šæ–¹æ³•ï¼š

#### ç¹¼çºŒä½¿ç”¨ Machinery é©…å‹•

ä¿®æ”¹ `config/queue.go` æ–‡ä»¶ä¸­çš„é…ç½®ï¼š

```diff
// config/queue.go
"connections": map[string]any{
...
  "redis": map[string]any{
--    "driver":     "redis",
++    "driver":     "machinery",
    "connection": "default",
    "queue":      config.Env("REDIS_QUEUE", "default"),
  },
},
```

#### ä½¿ç”¨ Redis éšŠåˆ—é©…å‹•

ä¿®æ”¹ `config/queue.go` æ–‡ä»¶ä¸­çš„é…ç½®ï¼š

```diff
// config/queue.go
import (
  "github.com/goravel/framework/contracts/queue"
  redisfacades "github.com/goravel/redis/facades"
)

"connections": map[string]any{
...
  "redis": map[string]any{
--  "driver":     "redis",
++  "driver":     "custom",
    "connection": "default",
    "queue":      config.Env("REDIS_QUEUE", "default"),
++  "via": func() (queue.Driver, error) {
++    return redisfacades.Queue("redis") // ` + "`redis`" + ` å€¼æ˜¯ ` + "`connections`" + ` çš„éµ
++  },
  },
},
```

æ–°çš„ Redis éšŠåˆ—é©…å‹•èˆ‡åŸ machinery éšŠåˆ—é©…å‹•çš„ä»»å‹™éƒ½ä¿å­˜åœ¨åŒä¸€å€‹ Redis ä¸­ï¼Œä½†ä½¿ç”¨ä¸åŒçš„éšŠåˆ—åç¨±ã€‚å³ä½¿ä½ åˆ‡æ›ç‚ºæ–°çš„ Redis éšŠåˆ—é©…å‹•ï¼Œæ¡†æ¶æœƒç¹¼çºŒè®€å–åŸ Machinery éšŠåˆ—é©…å‹•çš„ä»»å‹™ï¼Œç›´åˆ° Machinery ä¸­æ‰€æœ‰ä»»å‹™åŸ·è¡Œå®Œç•¢ã€‚åŒæ™‚ï¼Œæ–°çš„éšŠåˆ—ä»»å‹™ä¸å†å¯«å…¥ Machinery éšŠåˆ—ä¸­ï¼Œè€Œæ˜¯å¯«å…¥æ–°çš„ Redis éšŠåˆ—ï¼Œä¸¦è¢«æ–°çš„ Redis éšŠåˆ—é©…å‹•æ¶ˆè²»ã€‚ä»¥å¯¦ç¾å…©å€‹é©…å‹•é–“çš„ç„¡ç¸«åˆ‡æ›ã€‚ å³ä½¿ä½ åˆ‡æ›åˆ°æ–°çš„ Redis éšŠåˆ—é©…å‹•ï¼Œæ¡†æ¶å°‡ç¹¼çºŒè®€å–åŸå§‹ Machinery éšŠåˆ—é©…å‹•ä»»å‹™ç›´åˆ°å®Œæˆæ‰€æœ‰ä»»å‹™ã€‚ åŒæ™‚ï¼Œæ–°çš„éšŠåˆ—ä»»å‹™ä¸å†å¯«å…¥ Machinery éšŠåˆ—ï¼Œè€Œæ˜¯å¯«å…¥æ–°çš„ Redis éšŠåˆ—ï¼Œä¸¦ç”±æ–°çš„ Redis éšŠåˆ—é©…å‹•æ¶ˆè²»ã€‚ å¯¦ç¾å…©å€‹é©…å‹•ä¹‹é–“çš„ç„¡ç¸«åˆ‡æ›ã€‚

ä½ å¯ä»¥æª¢æŸ¥ Redis ä¸­å…©å€‹é©…å‹•çš„æ•¸æ“šï¼Œä»¥æŸ¥çœ‹å®ƒå€‘æ˜¯å¦æ­£ç¢ºå¯«å…¥å’Œæ¶ˆè²»ï¼š

```shell
redis-cli

# ç²å– Redis ä¸­æ‰€æœ‰çš„éµ
keys

# æŸ¥çœ‹ Machinery éšŠåˆ—é©…å‹•æ•¸æ“šï¼ˆæ›¿æ› {} ä¸­çš„å€¼ï¼‰
LRANGE {app_name}_queues:{queue_name} 0 -1

# æŸ¥çœ‹ Redis éšŠåˆ—é©…å‹•æ•¸æ“šï¼ˆæ›¿æ› {} ä¸­çš„å€¼ï¼‰
LRANGE {app_name}_queues:{connection}_{queue} 0 -1
```

### ä¿®å¾©ç™¼é€éƒµä»¶æ™‚ç„¡æ³•è¨­å®šå¯†ä»¶å‰¯æœ¬å’Œå‰¯æœ¬çš„å•é¡Œ

goravel/framework: v1.16.1

å•é¡Œï¼š[ï¼ƒ737](https://github.com/goravel/goravel/issues/737)

### ä¿®å¾©é€éä½‡åˆ—ç™¼é€éƒµä»¶è¿”å›ä¸æ­£ç¢ºçš„éŒ¯èª¤

goravel/framework: v1.16.1

PR: [#1148](https://github.com/goravel/framework/pull/1148)

### ä¿®å¾© Orm å»ºç«‹å¤šç­†è¨˜éŒ„æ™‚æœƒè§¸ç™¼ create äº‹ä»¶çš„å•é¡Œ

goravel/framework: v1.16.1

å•é¡Œï¼š[ï¼ƒ738](https://github.com/goravel/goravel/issues/738)

### ä¿®å¾© make:package æŒ‡ä»¤ç”¢ç”Ÿä¸æ­£ç¢ºçš„ç¨‹å¼ç¢¼

goravel/framework: v1.16.1

å•é¡Œï¼š[ï¼ƒ743](https://github.com/goravel/goravel/issues/743)

### ä¿®å¾©ç™¼å¸ƒåŒ…æª”æ¡ˆæ™‚è·¯å¾‘ä¸æ­£ç¢ºçš„å•é¡Œ

goravel/framework: v1.16.1

å•é¡Œï¼š[ï¼ƒ749](https://github.com/goravel/goravel/issues/749)

### ä¿®å¾©é—œé–‰æ™‚ææ…Œæ™‚äº¤æ˜“ä¸æœƒå›æ»¾çš„å•é¡Œ

goravel/framework: v1.16.3

å•é¡Œï¼š[ï¼ƒ762](https://github.com/goravel/goravel/issues/762)

### ä½¿ç”¨å–®ç¨çš„é·ç§»è…³æœ¬æ–°å¢æˆ–åˆªé™¤åˆ—æ™‚ä¿®å¾©éŒ¯èª¤

goravel/framework: v1.16.3

goravel/postgres: v1.4.1

å¦‚æœä½¿ç”¨å–®ç¨çš„é·ç§»è…³æœ¬æ–°å¢æˆ–åˆªé™¤åˆ—ä¸”æ‡‰ç”¨ç¨‹å¼æ²’æœ‰é‡æ–°å•Ÿå‹•ï¼Œå‰‡æœƒå‡ºç¾ä»¥ä¸‹å…©å€‹éŒ¯èª¤ï¼š

1. DB facade å°‡æœƒå´©æ½°ã€‚
2. Postgres é©…å‹•ç¨‹å¼å°‡å ±å‘ŠéŒ¯èª¤ï¼š`cached plan must not change result type`ã€‚

å•é¡Œï¼š[ï¼ƒ768](https://github.com/goravel/goravel/issues/768)

### ä¿®å¾© Orm Select æ–¹æ³•çš„é‡å¤§æ›´æ”¹

goravel/framework: v1.16.3

å°‡ Orm Select æ–¹æ³•å¾ v1.15 å‡ç´šåˆ° v1.16 æ™‚ç™¼ç”Ÿäº†é‡å¤§è®ŠåŒ–ã€‚ `Select` ä¸å†æ”¯æ´ `db.Raw()`ï¼Œå› æ­¤æ–°å¢æ–°çš„ `SelectRaw` æ–¹æ³•ä»¥é¿å…é‡å¤§è®Šæ›´ã€‚

å•é¡Œï¼š[ï¼ƒ770](https://github.com/goravel/goravel/issues/770)

### Fix commands cannot be run concurrently

goravel/framework: v1.16.4

When running commands concurrently in the Schedule module, it may cause chaos or a panic due to concurrent writes.

### Fix Queue cannot be shut down as expected

goravel/framework: v1.16.5

Previously, when the Queue worker is running, sending a SIGTERM signal will shut down the worker immediately. Fix it to wait for the current job to complete before shutting down.

Issue: [#807](https://github.com/goravel/goravel/issues/807)
