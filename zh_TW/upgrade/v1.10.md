# å¾ v1.9 å‡ç´šåˆ° v1.10

[[toc]]

## ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½ ğŸ‰

- [æ–°å¢ facades.Crypt(1.10.0)](#åŠ å¯†)
- [æ–°å¢ facades.Hash(1.10.0)](#å“ˆå¸Œ)
- [æ–°å¢è·¯ç”±é™æµå™¨(1.10.0)](#æ–°å¢è·¯ç”±é™æµå™¨)

## åŠŸèƒ½å¢å¼· ğŸš€

- [å„ªåŒ– HTTP å•Ÿå‹•æ–¹å¼(1.10.0)](#å„ªåŒ–-http-å•Ÿå‹•æ–¹å¼)
- [å„ªåŒ– GPRC å•Ÿå‹•æ–¹å¼(1.10.0)](#å„ªåŒ–-grpc-å•Ÿå‹•æ–¹å¼)
- [å¢åŠ æ§åˆ¶æ—¥èªŒè¼¸å‡ºåˆ°æ§åˆ¶å°çš„é…ç½®(1.10.0)](#å¢åŠ æ§åˆ¶æ—¥èªŒè¼¸å‡ºåˆ°æ§åˆ¶å°çš„é…ç½®)
- [Request ä¿®æ”¹ã€æ–°å¢æ–¹æ³•(1.10.0)](#request-ä¿®æ”¹ã€æ–°å¢æ–¹æ³•)
- [éšŠåˆ—æ”¯æŒå»¶é²èª¿åº¦(1.10.0)](#éšŠåˆ—æ”¯æŒå»¶é²èª¿åº¦)
- [ORM é€£æ¥æ”¯æŒé…ç½®è¡¨åå‰ç¶´èˆ‡å–®æ•¸(1.10.0)](#orm-é€£æ¥æ”¯æŒé…ç½®è¡¨åå‰ç¶´èˆ‡å–®æ•¸)
- [æ–°å¢ docker-compose.yml æ–‡ä»¶(1.10.0)](#æ–°å¢-docker-compose-yml-æ–‡ä»¶)
- [å„ªåŒ– Orm(1.10.0)](#å„ªåŒ–-orm)
- [é·ç§»æ–‡ä»¶ä¸­æ”¯æŒåŸ·è¡Œå¤šæ¢ SQL èªå¥(1.10.0)](#é·ç§»æ–‡ä»¶ä¸­æ”¯æŒåŸ·è¡Œå¤šæ¢-sql-èªå¥)
- [æ–‡ä»¶ç³»çµ±æ–°å¢ minio é©…å‹•(1.10.0)](#æ–‡ä»¶ç³»çµ±æ–°å¢-minio-é©…å‹•)
- [contracts/http å¢åŠ  net/http çš„ Status æ˜ å°„(1.10.0)](#contracts-http-å¢åŠ -net-http-çš„-status-æ˜ å°„)

## ç ´å£æ€§è®ŠåŒ– ğŸ› 

- [APP_KEY å¿…å¡«(1.10.0)](#app-key-å¿…å¡«)
- [è¡¨å–®é©—è­‰ä¸­æ–¹æ³•æ–°å¢ ctx åƒæ•¸(1.10.0)](#è¡¨å–®é©—è­‰ä¸­æ–¹æ³•æ–°å¢-ctx-åƒæ•¸)
- [facades.Auth.Parse æ–°å¢ payload è¿”å›(1.10.0)](#facades-auth-parse-æ–°å¢-payload-è¿”å›)
- [Orm çš„éƒ¨åˆ†æ–¹æ³•æ–°å¢è¿”å›å€¼(1.10.0)](#orm-çš„éƒ¨åˆ†æ–¹æ³•æ–°å¢è¿”å›å€¼)

## å‡ç´šæŒ‡å—

**é è¨ˆå‡ç´šæ™‚é–“ï¼š20 åˆ†é˜**

### æ›´æ–°ä¾è³´

åœ¨ `go.mod` ä¸­æ›´æ–°ä¾è³´ï¼š

```
go get -u github.com/goravel/framework@v1.10.0 && go mod tidy
```

### åŠ å¯†è§£å¯†

Version: v1.10.0

æ–°å¢ `facades.Crypt`ï¼š

1. å°‡ `&crypt.ServiceProvider{}` æ–°å¢åˆ° [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go) æ–‡ä»¶çš„ `providers` é …ä¸­ï¼›

[æŸ¥çœ‹æ–‡æª”](../security/encryption.md)

### å“ˆå¸Œ

Version: v1.10.0

æ–°å¢ `facades.Hash`ï¼š

1. å°‡ `&hash.ServiceProvider{}` æ–°å¢åˆ° [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go) æ–‡ä»¶çš„ `providers` é …ä¸­ï¼›

2. æ–°å¢ [config/hashing.go](https://github.com/goravel/goravel/blob/v1.10.x/config/hashing.go) æ–‡ä»¶ï¼›

[æŸ¥çœ‹æ–‡æª”](../security/hashing.md)

### æ–°å¢è·¯ç”±é™æµå™¨

Version: v1.10.0

[æŸ¥çœ‹æ–‡æª”](../the-basics/routing.md#Rate-Limiting)

### å„ªåŒ– HTTP å•Ÿå‹•æ–¹å¼

Version: v1.10.0

1. æ–°å¢ `config/http.go` é…ç½®æ–‡ä»¶ï¼Œ[è©³è¦‹æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/http.go)ï¼›
2. `facades.Route.Run` æ–¹æ³•ä¸å†éœ€è¦å‚³åƒï¼Œé»˜èªä½¿ç”¨ `http.host` å’Œ `http.port`ï¼ˆä½ ç„¡éœ€ä¿®æ”¹ä»£ç¢¼ï¼Œå‘ä¸‹å…¼å®¹ï¼‰ï¼›
3. `facades.Route.RunTLS` æ–¹æ³•ä¸å†éœ€è¦å‚³åƒï¼Œé»˜èªä½¿ç”¨ `http.tls.host`ã€`http.tls.port`ã€`http.tls.ssl.cert` å’Œ `http.tls.ssl.key`ï¼Œå¦‚ä½¿ç”¨ï¼Œéœ€ä¿®æ”¹ä»£ç¢¼ï¼›
4. æ–°å¢ `facades.Route.RunTLSWithCert` æ–¹æ³•ï¼Œ[è©³è¦‹æ–‡æª”](../the-basics/routing.md#start-server)ï¼›
5. å°‡é…ç½® `app.url`ã€`app.host` ç§»åˆ° `http.url`ã€`http.host`ï¼›

### å„ªåŒ– GRPC å•Ÿå‹•æ–¹å¼

Version: v1.10.0

`facades.Grpc.Run` æ–¹æ³•ä¸å†éœ€è¦å‚³åƒï¼Œé»˜èªä½¿ç”¨ `grpc.host` å’Œ `grpc.port`ï¼ˆä½ ç„¡éœ€ä¿®æ”¹ä»£ç¢¼ï¼Œå‘ä¸‹å…¼å®¹ï¼‰ï¼›

### å¢åŠ æ§åˆ¶æ—¥èªŒè¼¸å‡ºåˆ°æ§åˆ¶å°çš„é…ç½®

Version: v1.10.0

åœ¨ `config/logging.go` æ–‡ä»¶çš„ `single`ã€`daily` é€šé“ä¸­æ–°å¢ `print` é…ç½®ï¼Œå¯ä»¥æ§åˆ¶æ—¥èªŒæ˜¯å¦è¼¸å‡ºåˆ°æ§åˆ¶å°ï¼Œ[è©³è¦‹æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/logging.go)ï¼›

### Request ä¿®æ”¹ã€æ–°å¢æ–¹æ³•

Version: v1.10.0

1. `Input` æ–¹æ³•ç”±åƒ…ç²å–è·¯ç”±åƒæ•¸ï¼Œä¿®æ”¹ç‚ºæ ¹æ“šä»¥ä¸‹é †åºç²å–æ•¸æ“šï¼š`json`ã€`form`ã€`query`ã€`route`ã€‚æ³¨æ„ï¼š`json` åªèƒ½ç²å–ä¸€ç¶­æ•¸æ“šï¼Œå¦å‰‡å°‡è¿”å›ç©ºï¼›
2. æ–°å¢ `Route` æ–¹æ³•æ›¿ä»£åŸæœ‰ `Input` æ–¹æ³•ï¼›
3. `Query` å’Œ `Form` æ–¹æ³•çš„é»˜èªå€¼ä¿®æ”¹ç‚ºä¸å¿…å¡«ï¼›
4. æ–°å¢ä»¥ä¸‹æ–¹æ³•ï¼š

| æ–¹æ³•         | æ“ä½œ                                                          |
| ---------- | ----------------------------------------------------------- |
| Route      | [ç²å–è·¯ç”±ä¸­çš„åƒæ•¸](../the-basics/request.md#ç²å–è·¯ç”±ä¸­çš„åƒæ•¸)               |
| RouteInt   | [ç²å–è·¯ç”±ä¸­çš„åƒæ•¸](../the-basics/request.md#ç²å–è·¯ç”±ä¸­çš„åƒæ•¸)               |
| RouteInt64 | [ç²å–è·¯ç”±ä¸­çš„åƒæ•¸](../the-basics/request.md#ç²å–è·¯ç”±ä¸­çš„åƒæ•¸)               |
| QueryInt   | [å¾æŸ¥è©¢å­—ç¬¦ä¸²ä¸­ç²å–è¼¸å…¥](../the-basics/request.md#å¾æŸ¥è©¢å­—ç¬¦ä¸²ä¸­ç²å–è¼¸å…¥)         |
| QueryInt64 | [å¾æŸ¥è©¢å­—ç¬¦ä¸²ä¸­ç²å–è¼¸å…¥](../the-basics/request.md#å¾æŸ¥è©¢å­—ç¬¦ä¸²ä¸­ç²å–è¼¸å…¥)         |
| QueryBool  | [å¾æŸ¥è©¢å­—ç¬¦ä¸²ä¸­ç²å–è¼¸å…¥](../the-basics/request.md#å¾æŸ¥è©¢å­—ç¬¦ä¸²ä¸­ç²å–è¼¸å…¥)         |
| InputInt   | [æª¢ç´¢è¼¸å…¥å€¼](../the-basics/request.md#Retrieving-An-Input-Value) |
| InputInt64 | [æª¢ç´¢è¼¸å…¥å€¼](../the-basics/request.md#Retrieving-An-Input-Value) |
| InputBool  | [æª¢ç´¢è¼¸å…¥å€¼](../the-basics/request.md#Retrieving-An-Input-Value) |
| Json       | [æª¢ç´¢ Json](../the-basics/request.md#Retrieving-Json)         |

### éšŠåˆ—æ”¯æŒå»¶é²èª¿åº¦

Version: v1.10.0

æ–°å¢ `Delay` æ–¹æ³•ï¼Œ[è©³è¦‹æ–‡æª”](../digging-deeper/queues.md#å»¶é²èª¿åº¦)

### ORM é€£æ¥æ”¯æŒé…ç½®è¡¨åå‰ç¶´èˆ‡å–®å¾©æ•¸

Version: v1.10.0

1. `Model` æ”¯æŒæŒ‡å®šè¡¨åï¼Œ[è©³è¦‹æ–‡æª”](../orm/getting-started.md#æŒ‡å®šè¡¨å)ï¼›
2. `config/database.go` ä¸­çš„ `connection` æ–°å¢éµå€¼ï¼š

`prefix`ï¼šè¨­ç½®è¡¨åå‰ç¶´ï¼›
`singular`ï¼šè¨­ç½®è¡¨åä½¿ç”¨å–®æ•¸é‚„æ˜¯è¤‡æ•¸ï¼›

[è©³è¦‹æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/database.go)

### æ–°å¢ docker-compose.yml æ–‡ä»¶

Version: v1.10.0

ä½ ç¾åœ¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¿«é€Ÿå•Ÿå‹•æœå‹™ï¼š

```
docker-compose build
docker-compose up
```

### å„ªåŒ– Orm

Version: v1.10.0

1. æ–°å¢ä»¥ä¸‹æ–¹æ³•ï¼š

| å‡½æ•¸             | æ“ä½œ                                        |
| -------------- | ----------------------------------------- |
| ç¬¬ä¸€å€‹æˆ–           | [é€šéå›èª¿æŸ¥è©¢æˆ–è¿”å›æ•¸æ“š](#Query-one-line)            |
| ç¬¬ä¸€å€‹æˆ–æ–°å»º         | [æª¢ç´¢æˆ–å‰µå»ºæ¨¡å‹](#Retrieving-Or-Creating-Models) |
| ç¬¬ä¸€å€‹æˆ–å¤±æ•—         | [æœªæ‰¾åˆ°éŒ¯èª¤](#Not-Found-Error)                 |
| UpdateOrCreate | [æ›´æ–°æˆ–å‰µå»º](#Update-or-create)                |

2. ä¹‹å‰é€™æ¨£å¯«å ±éŒ¯ï¼Œä½†ç¾åœ¨æ”¯æŒï¼š

```go
query := facades.Orm.Query()
query = query.Where()
```

### é·ç§»æ–‡ä»¶ä¸­æ”¯æŒåŸ·è¡Œå¤šæ¢ SQL èªå¥

Version: v1.10.0

ä¹‹å‰é·ç§»æ–‡ä»¶ä¸­åƒ…æ”¯æŒåŸ·è¡Œä¸€æ¢ SQL èªå¥ï¼Œç¾åœ¨æ”¯æŒå¤šæ¢ã€‚

### æ–‡ä»¶ç³»çµ±æ–°å¢ minio é©…å‹•

Version: v1.10.0

æ–°å¢ minio é…ç½®ï¼Œ[è©³è¦‹æ–‡ä»¶](https://github.com/goravel/goravel/blob/v1.10.x/config/filesystems.go).

### contracts/http å¢åŠ  net/http çš„ Status æ˜ å°„

Version: v1.10.0

å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­ç›´æ¥ä½¿ç”¨ `http.StatusOK` ç­‰ç‹€æ…‹ç¢¼ï¼Œè€Œä¸éœ€è¦å†å°å…¥ `net/http`ã€‚

[è©³è¦‹æ–‡ä»¶](https://github.com/goravel/framework/blob/v1.10.0/contracts/http/status.go)

### å¿…é ˆå¡«å¯« APP_KEY

Version: v1.10.0

`.env` æ–‡ä»¶ä¸­çš„ `APP_KEY` ä¿®æ”¹ç‚ºå¿…å¡«é …ï¼Œå¯ä»¥åŸ·è¡Œå‘½ä»¤ä¾†ç”Ÿæˆ APP_KEY: `go run . artisan key:generate`ã€‚

### åœ¨è¡¨å–®è«‹æ±‚çš„å„å€‹æ–¹æ³•ä¸­æ–°å¢ ctx åƒæ•¸

Version: v1.10.0

åœ¨è¡¨å–®è«‹æ±‚çš„ `Rules`, `Messages`, `Attributes`, `PrepareForValidation` æ–¹æ³•ä¸­ï¼Œæ–°å¢ `ctx http.Context` åƒæ•¸ï¼Œå…è¨±ä½ é€²è¡Œæ›´å¤šè‡ªå®šç¾©é…ç½®ã€‚

[è©³è¦‹æ–‡æª”](../the-basics/validation.md#å‰µå»ºè¡¨å–®è«‹æ±‚é©—è­‰)

### facades.Auth.Parse æ–°å¢ payload è¿”å›

Version: v1.10.0

`err := facades.Auth.Parse(ctx, token)` ä¿®æ”¹ç‚º `payload, err := facades.Auth.Parse(ctx, token)`ï¼Œé€šé `payload` ä½ å¯ä»¥ç²å¾—ï¼š

1. `Guard`: ç•¶å‰ Guardï¼›
2. `Key`: ç”¨æˆ¶æ¨™è­˜ï¼›
3. `ExpireAt`: éæœŸæ™‚é–“ï¼›
4. `IssuedAt`: ç™¼è¡Œæ™‚é–“ï¼›

[è©³è¦‹æ–‡æª”](../security/authentication.md#è§£æ-token)

### Orm çš„éƒ¨åˆ†æ–¹æ³•æ–°å¢è¿”å›å€¼

Version: v1.10.0

ä»¥ä¸‹æ–¹æ³•æ–°å¢ `*Result` è¿”å›å€¼ï¼Œä»¥ç²å–å—å½±éŸ¿çš„è¡Œæ•¸ï¼š

```go
res, err := query.Delete(&user)
res, err := query.Exec(fmt.Sprintf("DELETE FROM users where id = %d", user.ID))
res, err := query.ForceDelete(&User{})
res, err := query.Updates(User{Avatar: "avatar"})

// ç²å–å—å½±éŸ¿è¡Œæ•¸
num := res.RowsAffected
```
