# å¾ v1.11 å‡ç´šåˆ° v1.12

## v1.12.6

### éŒ¯èª¤ä¿®å¾© ğŸ›

- [ä¿®å¾© JWT çš„å•é¡Œ](#fix-the-problem-of-jwt)

## v1.12.5

### éŒ¯èª¤ä¿®å¾© ğŸ›

- [ä¿®å¾© facades.Orm().Query().Load() çš„å•é¡Œ](#fix-the-problem-of-facades-orm-query-load)

## v1.12.4

### éŒ¯èª¤ä¿®å¾© ğŸ›

- [throttle ä¸­é–“ä»¶ panic çš„å•é¡Œ](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### éŒ¯èª¤ä¿®å¾© ğŸ›

- [Windows ä¸‹ make:package å‘½ä»¤çš„å•é¡Œ](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### éŒ¯èª¤ä¿®å¾© ğŸ›

- [facades.Gate() è¿”å› nil çš„å•é¡Œ](#the-problem-of-facades-gate-return-nil)

## v1.12.1

### éŒ¯èª¤ä¿®å¾© ğŸ›

- [Windows ä¸‹å› æ–‡ä»¶è·¯å¾‘å¼•ç™¼ panic çš„å•é¡Œ](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½ ğŸ‰

- [æœå‹™å®¹å™¨](#service-container)
- [æ“´å±•åŒ…é–‹ç™¼](#package-development)
- [æ–°å¢ Carbon æ¨¡å¡Š](#add-helpers-methods)

## åŠŸèƒ½å¢å¼· ğŸš€

- [Artisan Flag æ–°å¢æ–¹æ³•](#artisan-flag-adds-new-methods)
- [æ–°å¢ Helpers æ–¹æ³•](#add-helpers-methods)
- [å‡ç´šä¾è³´](#upgrade-dependencies)
- [Migration æ–°å¢å‘½ä»¤](#migration-adds-new-methods)
- [éƒ¨åˆ† `make` å‘½ä»¤æ”¯æŒå­æ–‡ä»¶å¤¾](#some-make-commands-support-subdirectories)

## ç ´å£æ€§è®ŠåŒ– ğŸ› 

- [ä¿®æ”¹ facades èª¿ç”¨æ–¹å¼](#_3-modify-facades)
- [å„ªåŒ– Artisan Flag åƒæ•¸æ ¼å¼](#_6-modify-flag-in-the-artisan-command-if-using)
- [Filesystem æ¨¡å¡Šå–æ¶ˆå° S3, OSS, COS, Minio é©…å‹•çš„é»˜èªæ”¯æŒ](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [Cache æ¨¡å¡Šå–æ¶ˆå° Redis é©…å‹•çš„é»˜èªæ”¯æŒ](#_8-cache-module-cancels-default-support-for-redis)
- [ä¿®æ”¹ Model ä¸­ CreatedAt, UpdatedAt çš„é¡å‹](#_9-change-the-type-of-createdat-updatedat-in-model)
- [å„ªåŒ– Validation æ¨¡å¡Šçš„æ ¡é©—è¦å‰‡](#_10-optimize-the-rule-of-validation-module)

## å‡ç´šæŒ‡å—

è«‹æ ¹æ“šæœ¬ç¯€å…§å®¹ï¼Œä¸€æ­¥æ­¥é€²è¡Œæ¡†æ¶å‡ç´šã€‚

**é è¨ˆå‡ç´šæ™‚é–“ï¼š30 åˆ†é˜**

### 1. æ›´æ–°ä¾è³´

åœ¨ `go.mod` æ–‡ä»¶ä¸­æ›´æ–°ä¾è³´ï¼š

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

`go mod tidy` å°‡æœƒæ‹‹å‡ºä¸€å€‹éŒ¯èª¤ï¼ŒåŸ·è¡Œå®Œä¸‹é¢å‡ç´šæ­¥é©Ÿå³å¯è§£æ±ºã€‚

### 2. ä¿®æ”¹ `bootstrap/app.go`

```go
// ä¿®æ”¹å‰
app := foundation.Application{}

// ä¿®æ”¹å¾Œ
app := foundation.NewApplication()
```

### 3. ä¿®æ”¹ facades.\*

| ä¿®æ”¹å‰                   | ä¿®æ”¹å¾Œ                     |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Event`       | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.Queue`       | `facades.Queue()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. ä¿®æ”¹ `app/providers/*`

æ‰€æœ‰æª”æ¡ˆå¢åŠ å°å…¥ï¼š

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

æ‰€æœ‰ `Register`, `Boot` æ–¹æ³•å¢åŠ  `app foundation.Application` å…¥åƒï¼š

```go
func (receiver *AppServiceProvider) Register(app foundation.Application) {}

func (receiver *AppServiceProvider) Boot(app foundation.Application) {}
```

### 5. ä¿®æ”¹ `app/config/app.go`

ä¿®æ”¹å°å…¥ï¼š

```go
// ä¿®æ”¹å‰
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// ä¿®æ”¹å¾Œ
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{
```

### 6. ä¿®æ”¹ Artisan å‘½ä»¤ä¸­çš„ Flagï¼ˆå¦‚æœç”¨åˆ°ï¼‰

ç‚º `[]command.Flag` ä¸­çš„é …å¢åŠ  `&command.StringFlag` é¡å‹ï¼š

```go
// ä¿®æ”¹å‰
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      {
        Name: "test",
      },
    },
  }
}

// ä¿®æ”¹å¾Œ
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      &command.StringFlag{
        Name: "test",
      },
    },
  }
}
```

### 7. Filesystem æ¨¡å¡Šå–æ¶ˆå° S3, OSS, COS, Minio é©…å‹•çš„é»˜èªæ”¯æŒ

ç‚ºæ¸›å°‘åŠ è¼‰ä¸å¿…è¦çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ¸›å°æ‰“åŒ…é«”ç©ï¼Œæé«˜ç·¨è­¯æ•ˆç‡ï¼ŒGoravel å°‡é€æ­¥å‰é›¢å„æ¨¡çµ„é©…å‹•åˆ°ç¨ç«‹æ“´å±•åŒ…ã€‚ æœ¬æ¬¡å‡ç´š Filesystem æ¨¡çµ„å–æ¶ˆå° `S3`, `OSS`, `COS`, `Minio` é©…å‹•çš„é»˜èªæ”¯æŒï¼Œè½‰ç”±ç¨ç«‹æ“´å±•åŒ…æä¾›æ”¯æŒã€‚ åœ¨æ­¤æ¬¡å‡ç´šä¸­ï¼Œ`Filesystem` æ¨¡çµ„å–æ¶ˆå° `S3`, `OSS`, `COS`, `Minio` é©…å‹•çš„é»˜èªæ”¯æŒï¼Œä¸¦è½‰ç§»æ”¯æŒè‡³ç¨ç«‹æ“´å±•åŒ…ã€‚

åˆªé™¤ `config/filesystems.go::disks` ä¸­é™¤ `local` å’Œæ­£åœ¨ä½¿ç”¨çš„é©…å‹•ä»¥å¤–çš„éµï¼š

```go
// ä¿®æ”¹å¾Œ
"disks": map[string]any{
  "local": map[string]any{
    "driver": "local",
    "root":   "storage/app",
    "url":    config.Env("APP_URL", "").(string) + "/storage",
  },
},
```

å¦‚æœä½ ç”¨åˆ°äº† `local` ä»¥å¤–çš„é©…å‹•ï¼Œè«‹åƒè€ƒå°æ‡‰é©…å‹•æ–‡æª”é€²è¡Œå®‰è£ï¼š

| é©…å‹•    | éˆæ¥                                                                                                   |
| ----- | ---------------------------------------------------------------------------------------------------- |
| S3    | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS   | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| COS   | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| Minio | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. Cache æ¨¡å¡Šå–æ¶ˆå° Redis é©…å‹•çš„é»˜èªæ”¯æŒ

å¦‚æœä½ æ²’æœ‰ä½¿ç”¨ `redis` é©…å‹•ï¼Œåˆªé™¤ `config/cache.go::stores` ä¸­çš„ `redis` éµï¼š

```go
// ä¿®æ”¹å¾Œ
"stores": map[string]any{
  "memory": map[string]any{
    "driver": "memory",
  },
},
```

å¦‚æœä½ ç”¨åˆ°äº† `redis` é©…å‹•ï¼Œè«‹åƒè€ƒæ–‡æª”é€²è¡Œå®‰è£ï¼š

| é©…å‹•    | é€£çµ                                                                                                   |
| ----- | ---------------------------------------------------------------------------------------------------- |
| Redis | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. ä¿®æ”¹ Model ä¸­ CreatedAt, UpdatedAt çš„é¡å‹

ç‚ºäº†ä½¿æ™‚é–“é¡å‹åœ¨ API è¼¸å‡ºæ™‚æ›´åŠ æ¨™æº–ï¼Œ`CreatedAt`ã€`UpdatedAt` çš„é¡å‹ç”± `time.Time` ä¿®æ”¹ç‚º `carbon.DateTime`. å¦‚æœä½ å°é€™å…©å€‹æ¬„ä½é€²è¡Œäº†é¡å¤–è™•ç†ï¼Œå¯ä»¥é€šé `CreatedAt.ToStdTime()` æ–¹æ³•ç²å–åŸæœ‰çš„ `time.Time` é¡å‹ã€‚

### 10. å„ªåŒ– Validation æ¨¡å¡Šçš„æ ¡é©—è¦å‰‡

æª¢æŸ¥åŸæœ‰æ ¡é©—è¦å‰‡ä¸­çš„é›¶å€¼ï¼Œä¾‹å¦‚ï¼Œè‹¥è¦å‰‡è¨­ç½®ç‚º `date` ä¸”æœªè¨­ç½® `required`ï¼Œè‹¥è©²æ¬„ä½ç‚ºç©ºæˆ–æœªå‚³å…¥ï¼Œæ ¡é©—æ¨¡å¡Šå°‡æç¤ºè©²æ¬„ä½ç‚ºå¿…å¡«ã€‚ å„ªåŒ–å¾Œï¼Œæ ¡é©—æ¨¡å¡Šæœƒé€šéæª¢æŸ¥ï¼Œæ›´ç¬¦åˆä½¿ç”¨ç›´è¦ºã€‚ å¦‚æœä½ ç”¨åˆ°äº†ç›¸é—œæ ¡é©—ï¼Œè«‹ç¢ºä¿å‡ç´šå¾Œèˆ‡é æœŸä¸€è‡´ã€‚

### 11. å†æ¬¡å®‰è£ä¾è³´

é‹è¡Œ `go mod tidy`

## åŠŸèƒ½ä»‹ç´¹

### æœå‹™å®¹å™¨

ç‰ˆæœ¬ï¼šv1.12.0

Goravel ä¸­æ‰€æœ‰æœå‹™éƒ½è¨»å†Šåˆ°æœå‹™å®¹å™¨ç•¶ä¸­ï¼Œç‚ºç¬¬ä¸‰æ–¹åŒ…çš„é–‹ç™¼æä¾›æœ‰åŠ›çš„æ”¯æŒï¼Œ[è©³è¦‹æ–‡æª”](../architecture-concepts/service-container.md)ã€‚

### æ“´å±•åŒ…é–‹ç™¼

ç‰ˆæœ¬ï¼šv1.12.0

åŒ…æ˜¯å‘ Goravel æ·»åŠ åŠŸèƒ½çš„ä¸»è¦æ–¹å¼ï¼Œå¯ä»¥ä½¿ Goravel çš„ç”Ÿæ…‹æ›´åŠ è±å¯Œï¼Œ[è©³è¦‹æ–‡æª”](../digging-deeper/package-development.md)ã€‚

### Artisan Flag æ–°å¢æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.12.0

ç‚º Artisan æ¨¡å¡Šæ–°å¢ç²å–ä¸åŒé¡å‹ `Flag` çš„æ–¹æ³•ï¼Œ[è©³è¦‹æ–‡æª”](../digging-deeper/artisan-console.md#options)

### æ–°å¢ Helpers æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.12.0

æ–°å¢ `path` å’Œ `carbon` Helpers æ–¹æ³•ï¼Œæ‚¨å¯ä»¥è¼•é¬†ç²å–é …ç›®çš„è·¯å¾‘ä¿¡æ¯ä¸¦è™•ç†æ™‚é–“ï¼Œ[è©³è¦‹æ–‡æª”](../digging-deeper/helpers.md)ã€‚

### å‡ç´šä¾è³´

ç‰ˆæœ¬ï¼šv1.12.0

ç‚ºæä¾›æ›´å¥½çš„åŠŸèƒ½æ”¯æŒï¼Œå‡ç´šäº† Goravel ä¾è³´çš„æ‰€æœ‰åŒ…çš„ç‰ˆæœ¬ã€‚

### Migration æ–°å¢å‘½ä»¤

ç‰ˆæœ¬ï¼šv1.12.0

| å‘½ä»¤                              | æ“ä½œ              |
| ------------------------------- | --------------- |
| migrate:fresh   | åˆªé™¤æ‰€æœ‰è¡¨ä¸¦é‡æ–°é‹è¡Œæ‰€æœ‰é·ç§»  |
| migrate:refresh | å›æ»¾æ‰€æœ‰é·ç§»ä¸¦é‡æ–°é‹è¡Œæ‰€æœ‰é·ç§» |
| migrate:reset   | å›æ»¾æ‰€æœ‰è³‡æ–™åº«é·ç§»       |
| migrate:status  | æŸ¥è©¢é·ç§»ç‹€æ…‹          |

### éƒ¨åˆ† `make` å‘½ä»¤æ”¯æŒå­æ–‡ä»¶å¤¾

ç‰ˆæœ¬ï¼šv1.12.0

| å‘½ä»¤                                                  | ç”Ÿæˆæ–‡ä»¶                                                                              |
| --------------------------------------------------- | --------------------------------------------------------------------------------- |
| make:policy User/AuthPolicy         | app/policies/User/auth_policy.go             |
| make:command Goravel/CleanCache     | app/console/commands/Goravel/clean_cache.go  |
| make:model User/Phone               | app/models/User/phone.go                                          |
| make:observer User/PhoneObserver    | app/observers/User/phone_observer.go         |
| make:event User/GoravelEvent        | app/events/User/goravel_event.go             |
| make:listener User/GoravelListen    | app/listeners/User/goravel_listen.go         |
| make:controller User/AuthController | app/http/controllers/User/auth_controller.go |
| make:middleware User/Auth           | app/http/middleware/User/auth.go                                  |
| make:request User/Auth              | app/http/requests/User/auth.go                                    |
| make:job Goravel/Job                | app/jobs/Goravel/job.go                                           |
| make:rule User/Phone                | app/rules/User/phone.go                                           |

### Windows ä¸‹å› æ–‡ä»¶è·¯å¾‘å¼•ç™¼ panic çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.12.1

ä¿®å¾© Windows ä¸‹ï¼Œ`make` å‘½ä»¤è‡ªå‹•å‰µå»ºæ–‡ä»¶å¤¾æ™‚ï¼Œç”±æ–¼åæ–œæ å¼•ç™¼ panic çš„å•é¡Œã€‚

### facades.Gate() è¿”å› nil çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.12.2

ä¿®å¾© facades.Gate() è¿”å› nil çš„å•é¡Œã€‚

### Windows ä¸‹ make:package å‘½ä»¤çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.12.3

ä¿®å¾© Windows ä¸‹ make:package å‘½ä»¤å‰µå»ºçš„æ–‡ä»¶ä¸­çš„è·¯å¾‘éŒ¯èª¤çš„å•é¡Œã€‚

### throttle ä¸­é–“ä»¶ panic çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.12.4

ä¿®å¾© throttle ä¸­é–“ä»¶ panic çš„å•é¡Œã€‚

### ä¿®å¾© facades.Orm().Query().Load() çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.12.5

ä¿®å¾© `facades.Orm().Query().Load()` æŸç¨®æƒ…æ³ä¸‹ç„¡æ³•æ­£ç¢ºåŠ è¼‰æ¨¡å‹çš„å•é¡Œã€‚

### ä¿®å¾© JWT çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.12.6

ä¿®å¾© JWT Token éæœŸä¸”ç„¡æ•ˆæ™‚ï¼Œè¿”å›éæœŸéŒ¯èª¤çš„å•é¡Œï¼Œé æœŸå„ªå…ˆè¿”å›ç„¡æ•ˆéŒ¯èª¤ã€‚
