# å¾ v1.10 å‡ç´šåˆ° v1.11

[[toc]]

## v1.11.3

### Bug ä¿®å¾© ğŸ›

- [Schedule ä¸­ panic å°è‡´é€²ç¨‹ä¸­æ–·çš„å•é¡Œ](#the-problem-of-process-interruption-caused-by-panic-in-schedule)
- [Schedule ä¸­ DailyAt æ¯åˆ†é˜éƒ½æœƒåŸ·è¡Œçš„å•é¡Œ](#the-problem-that-dailyat-in-schedule-will-be-executed-every-minute)

## v1.11.2

### Bug ä¿®å¾© ğŸ›

- [åŒæ™‚ä½¿ç”¨ Request.Input() èˆ‡ Request.Bind() æ•¸æ“šéŒ¯èª¤çš„å•é¡Œ](#fix-the-data-error-of-using-request-input\(\)-and-request-bind\(\)-at-the-same-time)

## v1.11.1

### ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½ ğŸ‰

- [Route æ–°å¢è³‡æºè·¯ç”±](#route-add-resource-routing)
- [Request æ–°å¢æ–¹æ³•](#request-add-new-methods)
- [Storage æ–°å¢æ–¹æ³•](#storage-add-new-methods)
- [File æ–°å¢æ–¹æ³•](#file-add-new-methods)

### Bug ä¿®å¾© ğŸ›

- [ä¿®å¾©æ–‡ä»¶å„²å­˜ windows è·¯å¾‘éŒ¯èª¤çš„å•é¡Œ](#fix-the-error-of-incorrect-windows-path-for-filesystem)
- [ä¿®å¾© Request æ¨¡çµ„ Header panic å•é¡Œ](#fix-the-panic-of-the-header-method-for-request)

## v1.11.0

## ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½ ğŸ‰

- [Orm æ–°å¢æ¨¡å‹äº‹ä»¶(1.11.0)](#orm-add-model-events)

## åŠŸèƒ½å¢å¼· ğŸš€

- [Cache æ–°å¢ã€å„ªåŒ–æ–¹æ³•(1.11.0)](#cache-add-and-optimize-methods)
- [Route æ”¯æŒ Fallback è·¯ç”±(1.11.0)](#route-supports-fallback-route)
- [Orm æ–°å¢æ–¹æ³•(1.11.0)](#orm-adds-new-methods)
- [å„ªåŒ– facades.Config.Add() æ–¹æ³•(1.11.0)](#optimize-facades-config-add)
- [ä¿®æ”¹ Sqlite é©…å‹•(1.11.0)](#change-sqlite-driver)
- [contracts/http å¢åŠ  net/http çš„ Method æ˜ å°„(1.11.0)](#contracts-http-add-method-mapping-of-net-http)

### ç ´å£æ€§è®ŠåŒ– ğŸ› 

- [Orm å„ªåŒ–ã€ç§»é™¤æ–¹æ³•(1.11.0)](#_2-remove-deprecated-methods)

### Bug ä¿®å¾© ğŸ›

- Hash é…ç½®åœ¨æŸç¨®æƒ…æ³ä¸‹ä¸ç”Ÿæ•ˆçš„å•é¡Œ(1.11.0)
- RateLimiter éåŸ·è¡Œç·’å®‰å…¨çš„å•é¡Œ(1.11.0)

## å‡ç´šæŒ‡å—

è«‹æ ¹æ“šæœ¬ç¯€å…§å®¹ï¼Œä¸€æ­¥æ­¥é€²è¡Œæ¡†æ¶å‡ç´šã€‚

**é ä¼°å‡ç´šæ™‚é–“ï¼š1 åˆ†é˜**

### 1. æ›´æ–°ä¾è³´

åœ¨ `go.mod` æ–‡ä»¶ä¸­æ›´æ–°ä¾è³´ï¼š

```
go get -u github.com/goravel/framework@v1.11.0 && go mod tidy
```

### 2. å„ªåŒ–ã€ç§»é™¤å»¢æ£„çš„æ–¹æ³•

```
import (
  "github.com/goravel/framework/database"
  "github.com/goravel/framework/database/gorm"
)

// å»¢æ£„
database.NewGormInstance()
// æ›¿æ›ç‚ºï¼ˆæ³¨ï¼šè©²æ–¹æ³•æœªæ¨è–¦ä½¿ç”¨ï¼Œè«‹ç›¡é‡ä¸ç”¨ï¼‰
gorm.New()

// å»¢æ£„
facades.Orm.Query().Updates()
// æ›¿æ›ç‚º(åªä¿®æ”¹æ–¹æ³•åå³å¯ï¼Œç„¡éœ€ä¿®æ”¹åƒæ•¸)
facades.Orm.Query().Update()

// Update æ–¹æ³•ä¿®æ”¹è¿”å›å€¼
// ä¿®æ”¹å‰
err := facades.Orm.Query().Update()
// ä¿®æ”¹å¾Œ
res, err := facades.Orm.Query().Update()
```

## æ–°å¢å…§å®¹

æœ¬ç¯€å…§å®¹ä¸æ¶‰åŠåˆ°ä»£ç¢¼ä¿®æ”¹ï¼Œåªæ˜¯åŠŸèƒ½å¢å¼·ã€‚

### Orm æ–°å¢æ¨¡å‹äº‹ä»¶

ç‰ˆæœ¬: v1.11.1

Orm æ¨¡å‹è§¸ç™¼å¹¾å€‹äº‹ä»¶ï¼Œå…è¨±ä½ æ›æ¥åˆ°æ¨¡å‹ç”Ÿå‘½é€±æœŸçš„å¦‚ä¸‹ç¯€é»ï¼š`Retrieved`ã€`Creating`ã€`Created`ã€`Updating`ã€`Updated`ã€`Saving`ã€`Saved`ã€`Deleting`ã€`Deleted`ã€`ForceDeleting`ã€`ForceDeleted`ã€‚

[è©³è¦‹æ–‡æª”](../orm/getting-started.md#events)

### Cache æ–°å¢ã€å„ªåŒ–æ–¹æ³•

ç‰ˆæœ¬: v1.11.1

#### æ–°å¢æ–¹æ³•

| æ–¹æ³•å       | æ“ä½œ                                                                     |
| --------- | ---------------------------------------------------------------------- |
| Decrement | [éæ¸›å€¼](../digging-deeper/cache.md#incrementing--decrementing-values)    |
| Increment | [éå¢å€¼](../digging-deeper/cache.md#incrementing--decrementing-values)    |
| Lock      | [åŸå­é–](../digging-deeper/cache.md#atomic-locks)                         |
| Store     | [è¨ªå•å¤šå€‹ç·©å­˜å­˜å„²](../digging-deeper/cache.md#accessing-multiple-cache-stores) |

#### å„ªåŒ–æ–¹æ³•

`Get`, `GetBool`, `GetInt`, `GetInt64`, `GetString`, `Pull` æ–¹æ³•ä¸å†éœ€è¦å‚³éé»˜èªå€¼ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰ã€‚

### Route æ”¯æŒ Fallback è·¯ç”±

ç‰ˆæœ¬: v1.11.1

ä½ å¯ä»¥å®šç¾©ä¸€å€‹åœ¨æ²’æœ‰å…¶ä»–è·¯ç”±åŒ¹é…å‚³å…¥è«‹æ±‚æ™‚å°‡åŸ·è¡Œçš„è·¯ç”±ã€‚

```go
facades.Route.Fallback(func(ctx http.Context) http.Response {
  return ctx.Response().String(404, "not found")
})
```

### Orm æ–°å¢æ–¹æ³•

ç‰ˆæœ¬: v1.11.1

| æ–¹æ³•å                    | æ“ä½œ                                                   |
| ---------------------- | ---------------------------------------------------- |
| db.Raw | [åŸç”Ÿè¡¨é”å¼](../orm/getting-started.md#raw-expressions)   |
| LockForUpdate          | [æ‚²è§€é–](../orm/getting-started.md#pessimistic-locking) |
| SharedLock             | [æ‚²è§€é–](../orm/getting-started.md#pessimistic-locking) |

### å„ªåŒ– facades.Config.Add() æ–¹æ³•

Version: v1.11.0

`facades.Config.Add()` æ–¹æ³• `configuration` åƒæ•¸ç”± `map[string]any` ä¿®æ”¹ç‚º `any`ï¼Œä½¿è¨­ç½®æ›´éˆæ´»ã€‚

[æŸ¥çœ‹æ–‡æª”](../getting-started/configuration.md#set-configuration)

### ä¿®æ”¹ Sqlite é©…å‹•

å› ç‚º `github.com/mattn/go-sqlite3` è¦æ±‚å¿…é ˆå•Ÿå‹• `CGO`ï¼Œå› æ­¤æ›¿æ›äº†ä¸€å€‹ä¸å¼·åˆ¶è¦æ±‚ `CGO` çš„ç¬¬ä¸‰æ–¹åŒ…ï¼š`github.com/glebarez/go-sqlite`ã€‚

### contracts/http å¢åŠ  net/http çš„ Method æ˜ å°„

Version: v1.11.0

å¯ä»¥åœ¨ controller ä¸­ç›´æ¥ä½¿ç”¨ `http.MethodGet`ï¼Œè€Œä¸éœ€è¦å†å°å…¥ `net/http`ã€‚

[è©³è¦‹æ–‡ä»¶](https://github.com/goravel/framework/blob/v1.11.0/contracts/http/method.go)

### Route æ–°å¢è³‡æºè·¯ç”±

ç‰ˆæœ¬: v1.11.1

```go
facades.Route.Resource("/resource", resourceController)
```

[è©³è¦‹æ–‡ä»¶](../the-basics/routing.md#è³‡æºè·¯ç”±)

### Request æ–°å¢æ–¹æ³•

ç‰ˆæœ¬: v1.11.1

| æ–¹æ³•å     | æ“ä½œ                                              |
| ------- | ----------------------------------------------- |
| All     | [ç²å–æ‰€æœ‰è¼¸å…¥æ•¸æ“š](../the-basics/request.md#ç²å–æ‰€æœ‰è¼¸å…¥æ•¸æ“š)   |
| Host    | [ç²å–è«‹æ±‚ Host](../the-basics/request.md#ç²å–è«‹æ±‚-host) |
| Queries | [ç²å–æ‰€æœ‰æŸ¥è©¢å­—ç¬¦ä¸²](../the-basics/request.md#ç²å–è·¯ç”±å‚³å…¥çš„åƒæ•¸) |

å³å°‡å»¢æ£„ `Form`, `Json` æ–¹æ³•ï¼Œè«‹ä½¿ç”¨ `Input` æ›¿ä»£ã€‚

### Storage æ–°å¢æ–¹æ³•

ç‰ˆæœ¬: v1.11.1

| æ–¹æ³•å          | æ“ä½œ                                                           |
| ------------ | ------------------------------------------------------------ |
| LastModified | [ç²å–æ–‡ä»¶æœ€å¾Œä¿®æ”¹æ™‚é–“](../digging-deeper/filesystem.md#æ–‡ä»¶-Metadata-ä¿¡æ¯) |
| MimeType     | [ç²å–æ–‡ä»¶é¡å‹](../digging-deeper/filesystem.md#æ–‡ä»¶-Metadata-ä¿¡æ¯)     |

### File æ–°å¢æ–¹æ³•

ç‰ˆæœ¬: v1.11.1

| æ–¹æ³•å          | ä½œç”¨                                                           |
| ------------ | ------------------------------------------------------------ |
| LastModified | [ç²å–æ–‡ä»¶æœ€å¾Œä¿®æ”¹æ™‚é–“](../digging-deeper/filesystem.md#æ–‡ä»¶-Metadata-ä¿¡æ¯) |
| MimeType     | [ç²å–æ–‡ä»¶é¡å‹](../digging-deeper/filesystem.md#æ–‡ä»¶-Metadata-ä¿¡æ¯)     |
| å¤§å°           | [ç²å–æ–‡ä»¶å¤§å°](../digging-deeper/filesystem.md#file-metadata)      |

### ä¿®å¾©æ–‡ä»¶å„²å­˜ windows è·¯å¾‘éŒ¯èª¤çš„å•é¡Œ

ç‰ˆæœ¬: v1.11.1

åœ¨ Windows ç³»çµ±ä¸­æœ‰ä¸€å€‹éŒ¯èª¤çš„æ–œç·šã€‚

### ä¿®å¾© Request æ¨¡çµ„ Header panic å•é¡Œ

ç‰ˆæœ¬: v1.11.1

`ctx.Request().Header( key: "token")` å°‡æœƒ panicã€‚

### åŒæ™‚ä½¿ç”¨ Request.Input() èˆ‡ Request.Bind() æ–¹æ³•æ•¸æ“šéŒ¯èª¤çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.11.2

ç”±æ–¼ä½¿ç”¨ `Request.Input()` æ–¹æ³•æœƒæ¸…ç©º `Request.Body`ï¼Œä¹‹å¾Œå†ä½¿ç”¨ `Request.Bind()`ï¼Œå°‡ç„¡æ³•æ­£ç¢ºç²å–åˆ°æ•¸æ“šã€‚

### Schedule ä¸­ panic å°è‡´é€²ç¨‹ä¸­æ–·çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.11.3

ç•¶ Schedule ä¸­å‡ºç¾ panicï¼Œæœƒå°è‡´é€²ç¨‹ä¸­æ–·ï¼Œå½±éŸ¿æ‰€æœ‰å®šæ™‚ä»»å‹™ã€‚

### Schedule ä¸­ DailyAt æ¯åˆ†é˜éƒ½æœƒåŸ·è¡Œçš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.11.3

ä¿®å¾© `DailyAt` æ¯åˆ†é˜éƒ½æœƒåŸ·è¡Œçš„å•é¡Œï¼š

```go
func (kernel *Kernel) Schedule() []schedule.Event {
  return []schedule.Event{
    facades.Schedule.Call(func() {
      fmt.Print("1")
    }).DailyAt("18:00"),
  }
}
```
