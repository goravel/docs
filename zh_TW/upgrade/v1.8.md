# å¾ v1.7 å‡ç´šåˆ° v1.8

[[toc]]

## ä»¤äººèˆˆå¥®çš„æ–°åŠŸèƒ½ ğŸ‰

- [Orm æ–°å¢æ¨¡å‹é—œè¯(1.8.0)](#add-model-association-for-orm)

## åŠŸèƒ½å¢å¼· ğŸš€

- [Request æ–°å¢æ–¹æ³•(1.8.0)](#add-methods-for-request)
- [Response æ–°å¢æ–¹æ³•(1.8.0)](#add-methods-for-response)
- [å„ªåŒ–è³‡æ–™åº«é·ç§»(1.8.0)](#optimize-database-migrate)
- [Route æ”¯æŒ HTTPS(1.8.3)](#route-supports-https)

## ç ´å£æ€§è®ŠåŒ– ğŸ› 

- [å„ªåŒ– import é †åº(1.8.0)](#optimize-import-order)
- [mock.Validator æ”¹å(1.8.0)](#mock-validator-change-name)
- [support.Mysql æ”¹å(1.8.0)](#support-mysql-change-name)
- [å³å°‡å»¢æ£„ database.NewGormInstance(1.8.0)](#database-newgorminstance-is-about-to-be-deprecated)

## Bug ä¿®å¾© ğŸ›

- [ä¿®å¾© Orm ä¸¦ç™¼å®‰å…¨çš„å•é¡Œ(1.8.1)](#fix-orm-concurrency-safety-issue)
- [ä¿®å¾© Mail ä¸èƒ½ä½¿ç”¨ 25ï¼Œ465 ç«¯å£ç™¼é€éƒµä»¶çš„å•é¡Œ(1.8.2)](#fix-mail-module-can-t-send-mail-by-25-and-465-ports)

## å‡ç´šæŒ‡å—

**é ä¼°å‡ç´šæ™‚é–“ï¼š1 åˆ†é˜**

### æ›´æ–°ä¾è³´

åœ¨ `go.mod` æ–‡ä»¶ä¸­æ›´æ–°ä¾è³´ï¼š

```
go get -u github.com/goravel/framework@v1.8.3
```

### Orm æ–°å¢æ¨¡å‹é—œè¯

ç‰ˆæœ¬ï¼šv1.8.0

Orm æ–°å¢æ–¹æ³•ï¼Œä»¥è™•ç†æ¨¡å‹é—œè¯ç­‰æ“ä½œï¼š

| æ–¹æ³•          | æ“ä½œ                                                                                             |
| ----------- | ---------------------------------------------------------------------------------------------- |
| é—œè¯          | [é—œè¯æ“ä½œ](../orm/relationships.md#querying-associations)                                          |
| DB          | [ç²å–é€šç”¨è³‡æ–™åº«æ¥å£ sql.DB](../orm/getting-started.md#generic-database-interface-sqldb) |
| è² è¼‰          | [å»¶é²é åŠ è¼‰](../orm/relationships.md#lazy-eager-loading)                                            |
| LoadMissing | [å»¶é²é åŠ è¼‰(ä¸å­˜åœ¨)](../orm/relationships.md#lazy-eager-loading)                    |
| Omit        | [å¿½ç•¥é—œè¯](../orm/relationships.md#create-or-update-associations)                                  |
| With        | [é åŠ è¼‰](../orm/relationships.md#eager-loading)                                                   |

### Request æ–°å¢æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.8.0

`ctx.Request()` æ–°å¢æ–¹æ³•ï¼Œä»¥è±å¯Œ `Query` åƒæ•¸çš„æ ¼å¼ï¼š

| æ–¹æ³•           | æ“ä½œ                                                                             |
| ------------ | ------------------------------------------------------------------------------ |
| `QueryArray` | [ç²å–éˆæ¥å‚³å…¥çš„æ•¸çµ„åƒæ•¸](../the-basics/request.md#retrieving-input-from-the-query-string) |
| `QueryMap`   | [ç²å–åœ°åœ–åƒæ•¸](../the-basics/request.md#Retrieving-Input-From-The-Query-String)      |

### ç‚ºéŸ¿æ‡‰æ–°å¢æ–¹æ³•

ç‰ˆæœ¬ï¼šv1.8.0

å‘ `ctx.Response()` æ–°å¢ `Origin` æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ HTTP ä¸­ä»‹è»Ÿä»¶ä¸­ç²å– `Response` çš„æ‰€æœ‰ä¿¡æ¯ã€‚

[è©³æƒ…](../the-basics/response.md#Get-Response)

### å„ªåŒ–å°å…¥é †åº

ç‰ˆæœ¬ï¼šv1.8.0

`bootstrap/app.go` æ–‡ä»¶ä¸­çš„å°å…¥é †åºè®Šæ›´ç‚ºï¼š

```go
package bootstrap

import (
  "github.com/goravel/framework/foundation"

  "goravel/config"
)
```

[æ–‡ä»¶éˆæ¥](https://github.com/goravel/goravel/blob/v1.8.0/bootstrap/app.go)

### å„ªåŒ–è³‡æ–™åº«é·ç§»

ç‰ˆæœ¬ï¼šv1.8.0

é‹è¡Œç”Ÿæˆé·ç§»æ–‡ä»¶çš„å‘½ä»¤ï¼š`go run . artisan make:migration create_users_table`ï¼Œå°‡æ ¹æ“šç•¶å‰ä½¿ç”¨çš„é è¨­è³‡æ–™åº«é©…å‹•(`facades.Config.GetString("database.default")`)ç”Ÿæˆå°æ‡‰çš„é·ç§»æ–‡ä»¶ã€‚

### mock.Validator æ”¹å

ç‰ˆæœ¬ï¼šv1.8.0

å¦‚æœä½ ä½¿ç”¨ `mock.Validator` ä¾†ç·¨å¯«å–®å…ƒæ¸¬è©¦ï¼Œéœ€è¦é€²è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š

```
import "github.com/goravel/framework/testing/mock"

mock.Validator

// ä¿®æ”¹ç‚º

import "github.com/goravel/framework/testing/mock"

mock.Validation
```

[è©³æƒ…](../testing/mock.md#Mock-facades.Validation)

### support.Mysql æ”¹å

ç‰ˆæœ¬ï¼šv1.8.0

å¦‚æœä½ ä½¿ç”¨ `support.Mysql` ç­‰æ¡†æ¶å¸¸é‡ä¾†åˆ¤æ–·è³‡æ–™åº«é©…å‹•ï¼Œéœ€è¦é€²è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š

```go
import "github.com/goravel/framework/database/support"

support.Mysql
support.Postgresql
support.Sqlite
support.Sqlserver

// ä¿®æ”¹ç‚º

import "github.com/goravel/framework/contracts/database/orm"

orm.Mysql
orm.Postgresql
orm.Sqlite
orm.Sqlserver
```

æ–°çš„å¸¸é‡å¦‚ `orm.Mysql` æ˜¯ `orm.Driver` é¡å‹ï¼Œä¸¦å¯ä»¥ä½¿ç”¨ `orm.Mysql.String()` æ–¹æ³•å°‡å…¶è½‰æ›ç‚ºå­—ç¬¦ä¸²é¡å‹ã€‚

### database.NewGormInstance å³å°‡è¢«æ£„ç”¨

ç‰ˆæœ¬ï¼šv1.8.0

`database.NewGormInstance` æ–¹æ³•å°‡åœ¨ v1.9.0 ç‰ˆæœ¬ä¸­è¢«æ£„ç”¨ï¼Œç›®å‰ç‰ˆæœ¬ä»å¯ä½¿ç”¨ï¼Œå¦‚æœä½ ä½¿ç”¨è©²æ–¹æ³•ä¾†ç²å– `gorm` å¯¦ä¾‹ï¼Œè«‹é€²è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š

```go
import "github.com/goravel/framework/database"

gorm, err := database.NewGormInstance(connection)

// ä¿®æ”¹ç‚º

import "github.com/goravel/framework/database/gorm"

gorm, err := gorm.New(connection)
```

### ä¿®å¾© Orm ä¸¦ç™¼å®‰å…¨å•é¡Œ

ç‰ˆæœ¬ï¼šv1.8.1

åœ¨é«˜ä½µç™¼è¨ªå•çš„æƒ…æ³ä¸‹ï¼Œç¬¬ä¸€æ¬¡è®€å– `facades.Orm` å¯èƒ½æœƒè¿”å› nilã€‚

### ä¿®å¾© Mail æ¨¡å¡Šç„¡æ³•é€šé 25 å’Œ 465 åŸ ç™¼é€éƒµä»¶çš„å•é¡Œ

ç‰ˆæœ¬ï¼šv1.8.2

ç¾åœ¨ä½ å¯ä»¥é€šé 25ã€465ã€587 åŸ ç™¼é€éƒµä»¶ã€‚

### è·¯ç”±æ”¯æŒ HTTPS

ç‰ˆæœ¬ï¼šv1.8.3

`facades.Route` æ–°å¢ `RunTLS` æ–¹æ³•ï¼Œæ”¯æŒå•Ÿå‹• HTTPS ä¼ºæœå™¨ï¼Œ[è©³æƒ…](../the-basics/routing.md#start-https-server)ã€‚
